<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å°è›‹å­</title>
  
  <subtitle>å°è›‹å­</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xv44586.github.io/"/>
  <updated>2020-01-11T06:37:47.709Z</updated>
  <id>https://xv44586.github.io/</id>
  
  <author>
    <name>[object Object]</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>è®°ä¸€æ¬¡npmç¯å¢ƒé—®é¢˜</title>
    <link href="https://xv44586.github.io/2020/01/11/npm-environment/"/>
    <id>https://xv44586.github.io/2020/01/11/npm-environment/</id>
    <published>2020-01-11T04:31:20.000Z</published>
    <updated>2020-01-11T06:37:47.709Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#qi-yin">èµ·å› </a></li><li><a href="#ddbug">Ddbug</a></li><li><a href="#jie-lun">ç»“è®º</a></li><li><a href="#guan-yu-tou">å…³äºå¤´</a></li></ul><!-- tocstop --></div><h1><span id="qi-yin">èµ·å› </span><a href="#qi-yin" class="header-anchor"></a></h1><p>ä¸Šå‘¨å†™å®Œåšå®¢ï¼Œæœ¬åœ°é¢„è§ˆæ—¶ï¼Œçªç„¶æŠ¥é”™ï¼Œçœ‹äº†ä¸€ä¸‹æ˜¯ sharp.js çš„é—®é¢˜ï¼Œä»¥ä¸ºæ˜¯ä¸ªå°åœºé¢ï¼Œç„¶åå°±å¼€å§‹äº†ä¸€å‘¨çš„ç—›è‹¦ä¿®ç¯å¢ƒç»å†ï¼Œå“­äº†ğŸ˜­</p><h1><span id="ddbug">Ddbug</span><a href="#ddbug" class="header-anchor"></a></h1><ol><li>é¦–å…ˆæ ¹æ®æç¤ºï¼Œé‡æ–°å®‰è£…  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf node_modules/sharp</span><br><span class="line">npm i sharp</span><br></pre></td></tr></table></figure></li></ol><p>æ­¤æ—¶æŠ¥é”™ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c++: error: unrecognized command line option <span class="string">'-stdlib=libc++'</span></span><br><span class="line">make: *** [Release/.node] Error <span class="number">1</span></span><br><span class="line">gyp ERR! build error</span><br><span class="line">gyp ERR! stack Error: `make` failed <span class="keyword">with</span> exit code: <span class="number">2</span></span><br><span class="line">gyp ERR! stack     at ChildProcess.onExit (/usr/local/Cellar/node@<span class="number">8</span>/<span class="number">8.16</span><span class="number">.2</span>/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:<span class="number">262</span>:<span class="number">23</span>)</span><br><span class="line">gyp ERR! stack     at emitTwo (events.js:<span class="number">126</span>:<span class="number">13</span>)</span><br><span class="line">gyp ERR! stack     at ChildProcess.emit (events.js:<span class="number">214</span>:<span class="number">7</span>)</span><br><span class="line">gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:<span class="number">198</span>:<span class="number">12</span>)</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªé—®é¢˜çš„æœ¬è´¨æ˜¯å½“å‰çš„åŒ…éœ€è¦é€šè¿‡æºç ç¼–è¯‘ï¼Œè€Œå½“å‰ç”¨çš„æ˜¯gccï¼ˆmacOSï¼‰ï¼Œè€Œgccä¸æ”¯æŒå½“å‰å‘½ä»¤ï¼Œä¹‹å‰è£…ç¯å¢ƒæ²¡æœ‰é‡åˆ°è¿‡è¿™ä¸ªé—®é¢˜ï¼Œå¯èƒ½æ˜¯æˆ‘æœ€è¿‘è·Ÿæ–°äº†gccï¼Ÿ<br>æŸ¥äº†ä¸€ä¸‹è§£å†³è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„æ–¹å¼æ˜¯æŒ‡å®šc++:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CXX=clang++ npm i xxx</span><br></pre></td></tr></table></figure></p><p>è¿™æ¬¡ç¡®å®è£…æˆåŠŸäº†ï¼Œèµ°èµ·ï¼<br>æ­¤æ—¶åˆæŠ¥æ–°é”™ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">can <span class="keyword">not</span> find sharp xxx</span><br><span class="line">rm node_modules/sharp <span class="keyword">and</span> rebuild</span><br></pre></td></tr></table></figure></p><p>é˜¿å˜ï¼Ÿè£…ä¸Šäº†åˆæ‰¾ä¸åˆ°ï¼Ÿwhyï¼Ÿ<br>åˆå°è¯•äº†å…¨å±€å®‰è£…ï¼Œä¾ç„¶æ‰¾ä¸åˆ°ï¼Œæ­¤æ—¶ï¼Œæœ‰ç‚¹ä¸Šå¤´ï¼Œæˆ‘å¹²è„†æŠŠnode_moduleså…¨éƒ¨åˆ æ‰ï¼Œé‡æ–°è£…å§ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf node_modules</span><br><span class="line">CXX=clang++ npm i</span><br></pre></td></tr></table></figure></p><p>é˜¿å˜ï¼Ÿè¿™æ¬¡è£…ä¹Ÿå¤±è´¥äº†ï¼Œé”™è¯¯å¤§è‡´åŸå› æ˜¯node-gyp rebuild nodejiebaå¤±è´¥ã€‚<br>å¼€å§‹ä»¥ä¸ºæ˜¯node-gypçš„é—®é¢˜ï¼Œåæ¥æŸ¥äº†ä¸€ä¸‹ï¼Œnode-gypæ˜¯ç”¨æ¥å¸®åŠ©ä¸›æºç ç¼–è¯‘çš„å·¥å…·ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šä¸æ˜¯ä»–çš„é—®é¢˜ï¼Œè¿˜æ˜¯åˆ«çš„é—®é¢˜ã€‚<br>åˆæŸ¥äº†ä¸€ä¸‹nodejieba, æœ‰äººè¯´æ˜¯åœ¨lunr.jsä¸­ç”¨çš„nodejiebaåœ¨nodeé«˜ç‰ˆæœ¬ä¸­ä¼šå­˜åœ¨ç¼–è¯‘å¤±è´¥ï¼Œå»ºè®®ç”¨ node8.x ,pythonç‰ˆæœ¬æœ€å¥½æ˜¯2.7ï¼Œé‚£æˆ‘ä¸Šæ¬¡æ²¡å¤±è´¥ï¼Ÿå…ˆå°†nodeé™çº§åˆ°node8, pythonåˆ‡åˆ°2.7ã€‚<br>å†è£…ä¸€æ¬¡ï¼Œä¾ç„¶å¤±è´¥ã€‚ä½†æ˜¯é”™è¯¯ä¿¡æ¯ä¸å¤Ÿå®šä½ï¼ŒæŸ¥ä¸€ä¸‹æ€ä¹ˆçœ‹æ›´å…¨çš„æ—¥å¿—ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CXX=clang++ npm i --verbose</span><br><span class="line">```  </span><br><span class="line">å‘ç°ä¸¤æ¡é‡è¦ä¿¡æ¯ï¼Œå¤§æ¦‚æ˜¯æ— æ³•æ‰¾åˆ°libä¸‹æŸä¸ªåº“ï¼Œå¯èƒ½æ˜¯æœ¬çº§çš„ç¯å¢ƒå‡ºäº†é—®é¢˜ï¼Œæ•´ç†ä¸€ä¸‹å§ã€‚</span><br><span class="line"> ```python</span><br><span class="line">brew update</span><br><span class="line">brew cleanup</span><br><span class="line">brew doctor</span><br><span class="line">```  </span><br><span class="line">ç¯å¢ƒçš„ä¸€å †issueè§£å†³æ‰ï¼ˆä¸»è¦æ˜¯linkæ— æ•ˆï¼‰ï¼Œç„¶åæŠŠä¹‹å‰æ— æ³•æ‰¾åˆ°çš„ä¸¤ä¸ªlibé‡æ–°è£…äº†ä¸€æ¬¡ï¼ˆå¾ˆæ…¢ï¼‰ã€‚</span><br><span class="line">æ­¤æ—¶è¿˜æ˜¯åŒæ ·é—®é¢˜ï¼Œè¿™æ¬¡åˆæŸ¥çœ‹äº†ä¸€ä¸‹å½“å‰ç¯å¢ƒé—®é¢˜ï¼Œä¸¤ä¸ªåŒ…æ²¡linkï¼Œä¸€ä¸ªæ˜¯python(å…¶å®æ˜¯python3ï¼Œä¹‹å‰linkçš„python2)ï¼Œ ä¸€ä¸ªæ˜¯swigï¼Œåæ¥ä¸€æƒ³ï¼Œå¯èƒ½æ˜¯swigè¿™ä¸ªå·¥å…·åœ¨æºç ç¼–è¯‘æ˜¯ç¼ºå¤±å¯¼è‡´çš„ï¼Œ</span><br><span class="line">```python</span><br><span class="line">brew link swig</span><br></pre></td></tr></table></figure></p><p>æ­¤æ—¶åœ¨è£…ï¼Œæå®šï¼èµ°èµ·ï¼ŒåˆæŠ¥æ–°é”™ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FATAL Something<span class="string">'s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span></span><br><span class="line"><span class="string">Error: spawn /Users/xuming/Project/blog/node_modules/optipng-bin/vendor/optipng ENOENT</span></span><br><span class="line"><span class="string">    at Process.ChildProcess._handle.onexit (internal/child_process.js:190:19)</span></span><br><span class="line"><span class="string">    at onErrorNT (internal/child_process.js:362:16)</span></span><br><span class="line"><span class="string">    at _combinedTickCallback (internal/process/next_tick.js:139:11)</span></span><br><span class="line"><span class="string">    at process._tickCallback (internal/process/next_tick.js:181:9)</span></span><br></pre></td></tr></table></figure></p><p>è¿™æ˜¯ç¼ºmoduleï¼Œä½†æ˜¯æˆ‘æ˜¯npm iï¼Œä¸ºä»€ä¹ˆè¿˜ç¼ºï¼Ÿæ­¤æ—¶å¯èƒ½åªæ˜¯å½“å‰node_modulesçš„é—®é¢˜ï¼Œä¸ºäº†éªŒè¯æœ¬æœºå…¶ä»–ç¯å¢ƒå·²ç»okäº†ï¼Œæ–°å»ºäº†ä¸€ä¸ªåšå®¢ï¼ŒéªŒè¯åå‘ç°æœ¬æœºç¡®å®OKäº†ã€‚<br>é¢ï¼Œé‚£å°±ç¼ºä»€ä¹ˆè£…ä»€ä¹ˆå§ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i optipng-bin</span><br></pre></td></tr></table></figure></p><p>èµ°èµ·ï¼ä¸€åˆ‡æ­£å¸¸ï¼æ­¤æ—¶æˆ‘çš„å¿ƒæƒ…å°±å¥½æ¯”ç«ç®­å‘å°„æˆåŠŸä¸€æ ·ã€‚æŠ˜ç£¨äº†ä¸€å‘¨çš„ç¯å¢ƒé—®é¢˜ï¼Œç»ˆäºæå®šäº†ï¼Œä¸­é—´è¿˜æœ‰è®¸å¤šå…¶ä»–æ–¹å‘çš„è¯•æ¢ï¼Œä½†éƒ½è®°ä¸å¾—äº†ã€‚- -ï¼</p><h1><span id="jie-lun">ç»“è®º</span><a href="#jie-lun" class="header-anchor"></a></h1><ol><li>npm å¤±è´¥åï¼Œå¯ä»¥åŠ  â€“verbose å‚æ•°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼Œå®šä½é—®é¢˜ã€‚</li><li>ç¼–è¯‘æºç å¯èƒ½ä½ è¿˜éœ€è¦è£…xcode-select --install</li><li>å¯¹äº Error: spawn .../node_modules/xxx/vendor/.. ENOENT,å•ç‹¬å®‰è£…ä¸€ä¸‹å¯¹åº”ç¼ºå¤±moduleå³å¯ã€‚</li><li>node-gyp å’Œ libvipså¯èƒ½ä¹Ÿä¼šå½±å“ï¼Œå»ºè®®é‡è£…ä¸€æ¬¡</li><li>MacOSä¸­ï¼Œå¯èƒ½ä¼šgccä¸clangå¹¶å­˜ï¼ŒåŠ ä¸Šç³»ç»Ÿå‡çº§ï¼Œå¯èƒ½å¯¼è‡´ç›¸åº”ç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜ã€‚æŒ‡å®šclang ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CXX=clang++ npm i</span><br></pre></td></tr></table></figure>6. æœ¬æœºç¯å¢ƒé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew doctor</span><br></pre></td></tr></table></figure></li></ol><h1><span id="guan-yu-tou">å…³äºå¤´</span><a href="#guan-yu-tou" class="header-anchor"></a></h1><p>é›ªä¸­å¥¥æ£®</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Life" scheme="https://xv44586.github.io/categories/Life/"/>
    
    
      <category term="npm" scheme="https://xv44586.github.io/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title>Backup</title>
    <link href="https://xv44586.github.io/2019/12/27/backup/"/>
    <id>https://xv44586.github.io/2019/12/27/backup/</id>
    <published>2019-12-27T14:24:21.000Z</published>
    <updated>2020-01-11T06:42:03.393Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#pei-zhi">é…ç½®</a><ul><li><a href="#cha-jian">æ’ä»¶</a></li></ul></li><li><a href="#zhu-ti">ä¸»é¢˜</a></li><li><a href="#markdown">MarkDown</a><ul><li><a href="#bu-ju">å¸ƒå±€</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id> </span><a href="#" class="header-anchor"></a></h1><p><strong>Just for meï¼<br>ç°åœ¨ä½¿ç”¨çš„åšå®¢è™½ç„¶ä½¿ç”¨çš„æ˜¯å¼€æºçš„ï¼Œä½†æ˜¯è‡ªå·±åšäº†éƒ¨åˆ†ä¿®æ”¹ï¼ŒåŠ ä¸Šä¸€äº›å¸¸ç”¨è¯­æ³•ä¸€æ®µæ—¶é—´ä¸ç”¨ååˆéœ€è¦é‡æ–°æŸ¥ï¼Œæ‰€ä»¥åœ¨æ­¤è®°å½•ä¸€ä¸‹å½“å‰åšå®¢å¸¸ç”¨çš„ã€‚ </strong> </p><h1><span id="pei-zhi">é…ç½®</span><a href="#pei-zhi" class="header-anchor"></a></h1><p>Hexo éƒ¨ç½²æ–‡æ¡£ï¼š <a href="http://hexo.io/docs/deployment.html" target="_blank" rel="noopener">http://hexo.io/docs/deployment.html</a><br>Hexo _config.xml çš„é…ç½® <a href="https://gist.github.com/btfak/18938572f5df000ebe06fbd1872e4e39" target="_blank" rel="noopener">https://gist.github.com/btfak/18938572f5df000ebe06fbd1872e4e39</a></p><h2><span id="cha-jian">æ’ä»¶</span><a href="#cha-jian" class="header-anchor"></a></h2><ul><li>hexo-toc  <a href="https://github.com/bubkoo/hexo-toc" target="_blank" rel="noopener">Insert a markdown TOC before posts be rendered</a><br>ç”¨æ¥ç”Ÿäº§ç›®å½•</li><li>hexo-renderer-marked + MathJax<br>æ•´ä½“é¡ºåºæ˜¯å…ˆç”±rendereræ¸²æŸ“ï¼Œç„¶åäº¤ç»™MathJaxæ¸²æŸ“Mathç›¸å…³ï¼Œå‰è€…åœ¨é‡è§$ $åå°†escape _ å¯¼è‡´ä¸‹æ ‡å¤±æ•ˆï¼ˆ_åœ¨rendererä¸­è®¤ä¸ºæ˜¯é»‘ä½“ï¼Œ<br>æ‰€ä»¥äº§ç”Ÿè¿™ç§å†²çªï¼‰ï¼Œæ‰€ä»¥ä¿®æ”¹äº†éƒ¨åˆ†escape</li></ul><h1><span id="zhu-ti">ä¸»é¢˜</span><a href="#zhu-ti" class="header-anchor"></a></h1><ul><li>hexo-theme-skapp <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank" rel="noopener">https://github.com/Mrminfive/hexo-theme-skapp</a><ul><li>ä¸»è¦ä¿®æ”¹ï¼š</li></ul><ol><li>éƒ¨åˆ†é¡µé¢å¸ƒå±€ï¼ŒåŒ…æ‹¬footerå’Œheader</li><li>å­—ä½“æ ·å¼ï¼ŒåŒ…æ‹¬éƒ¨åˆ†å…ƒç´ æ ·å¼ï¼Œå¦‚<strong>code</strong></li></ol></li></ul><h1><span id="markdown">MarkDown</span><a href="#markdown" class="header-anchor"></a></h1><h2><span id="bu-ju">å¸ƒå±€</span><a href="#bu-ju" class="header-anchor"></a></h2><ul><li><p>æ·»åŠ å¤§çº²<br>åœ¨æ­£æ–‡æœ€å¼€å§‹æ·»åŠ  </p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- toc --&gt;</span><br></pre></td></tr></table></figure></li><li><p>æ ‡é¢˜<br><code> # </code> ~ <code>######</code>ï¼Œ<code>#</code>å·çš„ä¸ªæ•°è¡¨ç¤ºå‡ çº§æ ‡é¢˜ï¼Œå³è¡¨ç¤ºä¸€çº§æ ‡é¢˜åˆ°å…­çº§æ ‡é¢˜</p></li><li><p>æœ‰åºåˆ—è¡¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. **æˆ‘æ˜¯ä¸€çº§åºåˆ—** </span><br><span class="line">2. **æˆ‘æ˜¯ä¸€çº§åºåˆ—** </span><br><span class="line">3. **æˆ‘æ˜¯ä¸€çº§åºåˆ—** </span><br><span class="line"> 1. *æˆ‘æ˜¯äºŒçº§åºåˆ—* </span><br><span class="line"> 1. *æˆ‘æ˜¯äºŒçº§åºåˆ—* </span><br><span class="line">  1. *æˆ‘æ˜¯äºŒçº§åºåˆ—*</span><br></pre></td></tr></table></figure></li></ul>  <blockquote><ol><li><strong>æˆ‘æ˜¯ä¸€çº§åºåˆ—</strong> </li><li><strong>æˆ‘æ˜¯ä¸€çº§åºåˆ—</strong> </li><li><strong>æˆ‘æ˜¯ä¸€çº§åºåˆ—</strong> <ol><li><em>æˆ‘æ˜¯äºŒçº§åºåˆ—</em> </li><li><em>æˆ‘æ˜¯äºŒçº§åºåˆ—</em> </li><li><em>æˆ‘æ˜¯äºŒçº§åºåˆ—</em> </li></ol></li></ol></blockquote><ul><li>æ— åºåˆ—è¡¨</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">* *åˆ—è¡¨å±•ç¤º  </span><br><span class="line"> * *åˆ—è¡¨å±•ç¤º</span><br><span class="line">  * *åˆ—è¡¨å±•ç¤º</span><br><span class="line">+ +åˆ—è¡¨å±•ç¤º</span><br><span class="line"> + +åˆ—è¡¨å±•ç¤º</span><br><span class="line">  + +åˆ—è¡¨å±•ç¤º</span><br><span class="line">- -åˆ—è¡¨å±•ç¤º</span><br><span class="line"> - -åˆ—è¡¨å±•ç¤º</span><br><span class="line">  - -åˆ—è¡¨å±•ç¤º</span><br></pre></td></tr></table></figure>  <blockquote><ul><li>*åˆ—è¡¨å±•ç¤º<ul><li>*åˆ—è¡¨å±•ç¤º<ul><li>*åˆ—è¡¨å±•ç¤º</li></ul><ul><li>+åˆ—è¡¨å±•ç¤º</li></ul></li></ul><ul><li>+åˆ—è¡¨å±•ç¤º<ul><li>+åˆ—è¡¨å±•ç¤º</li></ul><ul><li>-åˆ—è¡¨å±•ç¤º</li></ul></li></ul><ul><li>-åˆ—è¡¨å±•ç¤º<ul><li>-åˆ—è¡¨å±•ç¤º</li></ul></li></ul></li></ul></blockquote><ul><li>è¡¨æ ¼</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&amp;nbsp; | l1     | l2     </span><br><span class="line">  ----- | --- | ---- </span><br><span class="line">    w0 | $e_&#123;<span class="number">01</span>&#125;$ | $e_&#123;<span class="number">02</span>&#125;$ </span><br><span class="line">    w1 | $e_&#123;<span class="number">11</span>&#125;$ | $e_&#123;<span class="number">12</span>&#125;$ </span><br><span class="line">    w2 | $e_&#123;<span class="number">21</span>&#125;$ | $e_&#123;<span class="number">22</span>&#125;$</span><br></pre></td></tr></table></figure><p>è¡¨å¤´ä¸æ­£æ–‡ç”¨â€“æ¥åˆ†å‰²ï¼Œåˆ—ä¹‹é—´ç”¨|æ¥åˆ†å‰²ã€‚æ³¨ï¼šåˆ—åä¸èƒ½ä½¿ç”¨ç©ºæ ¼ï¼Œå¦‚éœ€è¦åˆ—åä¸ºç©ºï¼Œéœ€è¦ä½¿ç”¨ &amp;nbspï¼›æ›¿æ¢</p>  <blockquote><table><thead><tr><th>&nbsp;</th><th>l1</th><th>l2     </th></tr></thead><tbody><tr><td>  w0</td><td>$e_{01}$</td><td>$e_{02}$ </td></tr><tr><td>  w1</td><td>$e_{11}$</td><td>$e_{12}$ </td></tr><tr><td>  w2</td><td>$e_{21}$</td><td>$e_{22}$ </td></tr></tbody></table></blockquote><ul><li><p>å¼ºè°ƒ</p> **åŠ ç²—** __åŠ ç²—__ _æ–œä½“_  ***åŠ ç²—å¹¶æ–œä½“*** ~~åˆ é™¤çº¿ï½~ <blockquote><p><strong>åŠ ç²—</strong> <strong>åŠ ç²—</strong> _æ–œä½“_  <strong><em>åŠ ç²—å¹¶æ–œä½“</em></strong> ~~åˆ é™¤çº¿ï½~</p></blockquote></li><li><p>é«˜äº®</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç”¨&lt;code&gt; content &lt;/code&gt; æ¥åŒ…è£¹æƒ³è¦é«˜äº®çš„å…ƒç´ </span><br></pre></td></tr></table></figure>  <blockquote><p>ç”¨<code> content </code> æ¥åŒ…è£¹æƒ³è¦é«˜äº®çš„å…ƒç´ </p></blockquote><ul><li><p>å…³é—­MarkDown</p><blockquote><p>{% raw %} content {% endraw %}</p><p>è¿™ç§æ–¹å¼å°†ä¼šå¿½ç•¥ç©ºæ ¼å›è½¦ç­‰ï¼Œæœ‰äº›åœºæ™¯ä¹Ÿä¼šå¤±æ•ˆï¼Œæ­¤æ—¶å¯ä»¥ç”¨ <strong>ä»£ç å—</strong> ä»£æ›¿</p></blockquote></li><li><p>å¼•ç”¨</p><blockquote><p>{% blockquote æ±Ÿæ³½æ°‘%}ç§‘æŠ€æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ› {% endblockquote %} </p></blockquote><blockquote><p>ç§‘æŠ€æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›</p><footer><strong>æ±Ÿæ³½æ°‘</strong></footer></blockquote></li><li><p>Math</p><blockquote><p>è¡Œå†…å…¬å¼ç”¨ $åŒ…è£¹ï¼Œå¤šè¡Œæ—¶ç”¨$$åŒ…è£¹<br>ä½¿ç”¨çš„æ˜¯MathJaxï¼Œè¯­æ³•å¯å‚è€ƒåšå®¢<a href="https://blog.csdn.net/ethmery/article/details/50670297" target="_blank" rel="noopener">MathJaxåŸºæœ¬è¯­æ³•</a> å’Œå®˜æ–¹æ–‡æ¡£(<a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="noopener">https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference</a>)<br><code>è°ƒè¯•å‚è€ƒ<a href="https://www.quicklatex.com/" target="_blank" rel="noopener">quicklatex</a></code></p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$</span><br><span class="line"> states = $$\begin&#123;pmatrix&#125;</span><br><span class="line"> e_&#123;<span class="number">01</span>&#125;&amp;e_&#123;<span class="number">01</span>&#125;\\\\</span><br><span class="line"> e_&#123;<span class="number">02</span>&#125;&amp;e_&#123;<span class="number">02</span>&#125;\\\\</span><br><span class="line"> \end&#123;pmatrix&#125;$$</span><br><span class="line">$</span><br></pre></td></tr></table></figure>  <blockquote><p>$<br>states = $$\begin{pmatrix}<br>e_{01}&amp;e_{01}\\<br>e_{02}&amp;e_{02}\\<br>\end{pmatrix}$$<br>$</p><p><strong>æ³¨ï¼šå…¬å¼å†…\ ä¼šè¢«è½¬ä¹‰ï¼Œéœ€è¦ç”¨åŒ\ï¼Œå°¤å…¶åœ¨çŸ©é˜µä¸­ã€‚</strong></p></blockquote><ul><li>ä»£ç <blockquote><p>ä½¿ç”¨ä¸‰ä¸ª<code>`</code>åŒ…è£¹ï¼Œå¦‚æœéœ€è¦æ˜¾ç¤ºä¸‰ä¸ª <code>`</code>ï¼Œ å¯ä»¥ç”¨å››ä¸ªã€‚ä¹Ÿå¯ä»¥ç”¨  {%codeblock%}</p></blockquote></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">do</span><span class="params">(self, job_func, *args, **kwargs)</span>:</span></span><br><span class="line">        print(<span class="string">'hello world'</span>)  </span><br><span class="line">  ```</span><br></pre></td></tr></table></figure>   <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">do</span><span class="params">(self, job_func, *args, **kwargs)</span>:</span></span><br><span class="line">   print(<span class="string">'hello world'</span>)  </span><br><span class="line">   </span><br></pre></td></tr></table></figure><p>$$log(Z_{(0-&gt;1-&gt;2)}) = log(exp(states[0]) + exp(states[1])) \\<br>=log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{21} + t_{11}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{21}+t_{21})) \\+<br>log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{22} + t_{12}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{22}+t_{22})) \\<br>= log(exp(e_{01}+e_{11}+t_{11}+e_{21}+t_{11}) + exp(e_{02}+e_{11}+t_{21}+e_{21}+t_{11}) \\ +<br>exp(e_{01}+e_{12}+t_{12} +e_{21}+t_{21}) + exp(e_{02}+e_{12}+t_{22}+e_{21}+t_{21}) \\+<br>exp(e_{01}+e_{11}+t_{11} +e_{22}+t_{12}) + exp(e_{01}+e_{11}+t_{11}+e_{22}+t_{12}) \\+<br>exp(e_{01}+e_{12}+t_{12} +e_{22}+t_{22}) + exp(e_{01}+e_{12}+t_{12}+e_{22}+t_{21}))$$</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p> æœ›äº¬SOHOå¤œæ™¯</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Life" scheme="https://xv44586.github.io/categories/Life/"/>
    
    
      <category term="Hexo" scheme="https://xv44586.github.io/tags/Hexo/"/>
    
      <category term="MarkDown" scheme="https://xv44586.github.io/tags/MarkDown/"/>
    
  </entry>
  
  <entry>
    <title>from softmax to crf</title>
    <link href="https://xv44586.github.io/2019/12/26/from-softmax-to-crf/"/>
    <id>https://xv44586.github.io/2019/12/26/from-softmax-to-crf/</id>
    <published>2019-12-26T12:45:56.000Z</published>
    <updated>2020-01-11T06:47:30.641Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#xu-lie-biao-zhu">åºåˆ—æ ‡æ³¨</a><ul><li><a href="#mo-xing">æ¨¡å‹</a></li><li><a href="#shu-xue-xing-shi">æ•°å­¦å½¢å¼</a></li></ul></li><li><a href="#yan-shi-jian-zhou-softmax">æ²¿æ—¶é—´è½´Softmax</a></li><li><a href="#crf">CRF</a></li><li><a href="#xian-xing-lian-crf">çº¿æ€§é“¾CRF</a></li><li><a href="#qiu-jie">æ±‚è§£</a></li><li><a href="#demo">demo</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><p>åˆåšNERç›¸å…³ä¸œè¥¿ï¼Œ ç”¨åˆ°äº†CRFï¼Œæ‰€ä»¥æƒ³ç»™ç»„é‡Œäººä»å¤´ä¸€æ­¥ä¸€æ­¥çš„å°†CRFè®²ä¸€éï¼Œå¸Œæœ›å¤§å®¶çœ‹å®Œèƒ½æ˜ç™½CRFçš„æ•°å­¦æ¨¡å‹å·²ç»å·¥ç¨‹ä¸Šçš„ä½¿ç”¨ã€‚<br>ç½‘ä¸Šå…³äºCRFå¤§å¤šæ•°éƒ½æ˜¯å°†ä»–ä¸HMMåŠæ¦‚ç‡å›¾æ¨¡å‹ä¸€èµ·å¯¹æ¯”ç€è®²ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¿™éœ€è¦ä¸€äº›èƒŒæ™¯çŸ¥è¯†ï¼Œé‰´äºä¸Šæ¬¡åˆ†äº«å‘ç°å¤§å®¶å¹¶æ²¡æœ‰ä»€ä¹ˆèƒŒæ™¯çŸ¥è¯†ï¼Œ<br>æ‰€ä»¥è¿™æ¬¡å¸Œæœ›èƒ½å°½é‡å‡å°‘èƒŒæ™¯çŸ¥è¯†å°±èƒ½è®©äººææ‡‚CRFã€‚</p><h1><span id="xu-lie-biao-zhu">åºåˆ—æ ‡æ³¨</span><a href="#xu-lie-biao-zhu" class="header-anchor"></a></h1><h2><span id="mo-xing">æ¨¡å‹</span><a href="#mo-xing" class="header-anchor"></a></h2><p>é€šå¸¸CRFå‡ºç°åœ¨åºåˆ—æ ‡æ³¨ä»»åŠ¡ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹åºåˆ—æ ‡æ³¨ä¸»è¦æ˜¯åšä»€ä¹ˆçš„ã€‚<br>åºåˆ—æ ‡æ³¨æ˜¯NLPä¸­ä¸€ä¸ªé‡è¦çš„ä»»åŠ¡ï¼Œå®ƒåŒ…æ‹¬åˆ†è¯ã€è¯æ€§æ ‡æ³¨ã€å‘½åå®ä½“è¯†ç­‰ã€‚ä¸‹é¢ç”¨ä¸€ä¸ªåˆ†è¯çš„ä¾‹å­æ¥ç®€å•è¯´æ˜ã€‚ï¼ˆ<a href="https://spaces.ac.cn/archives/5542/comment-page-1#comments" target="_blank" rel="noopener">åŸæ–‡</a>)<br>å‡è®¾æˆ‘ä»¬ç°åœ¨ç”¨$bmes$å››æ ‡ç­¾æ¥è¿›è¡Œåˆ†è¯ï¼Œå…¶ä¸­b ä»£è¡¨beginå³è¯çš„å¼€å¤´ï¼Œ mä»£è¡¨middleå³è¯å†…ï¼Œeä»£è¡¨endå³è¯çš„ç»“å°¾ï¼Œsä»£è¡¨singleå³å•ç‹¬æˆè¯ã€‚<br>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²åºåˆ— â€œä»Šå¤©å¤©æ°”ä¸é”™â€ï¼Œå¦‚æœå¯¹åº”çš„åˆ†è¯ç»“æœä¸ºâ€œä»Šå¤©/å¤©æ°”/ä¸/é”™â€ï¼Œåˆ™å…¶æ ‡ç­¾åºåˆ—ä¸ºâ€œbebessâ€ã€‚ç”±äºåœ¨åºåˆ—æ ‡æ³¨ä¸­ï¼Œæˆ‘ä»¬è®¤ä¸ºæ­£ç¡®çš„æ ‡ç­¾åºåˆ—æ˜¯å”¯ä¸€çš„ï¼Œ<br>æ‰€ä»¥æˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯åœ¨æ‰€æœ‰å¯èƒ½çš„æ ‡ç­¾åºåˆ—ä¸­ï¼ˆå¦‚bbbbbb,ssssss)æŒ‘é€‰å‡ºçœŸå®çš„æ ‡ç­¾åºåˆ—ï¼ˆbebess), å³æœ€å¤§åŒ–æ¦‚ç‡$P(bebess|ä»Šå¤©å¤©æ°”ä¸é”™ï¼‰$ã€‚<br><img src="/2019/12/26/from-softmax-to-crf/seg.png" alt="4tagåˆ†è¯ç½‘ç»œç¤ºæ„å›¾"><br>å³åœ¨ä¸Šå›¾ä¸­ï¼Œæ‰€æœ‰ä»å·¦è‡³å³çš„è¿çº¿ä¸­ï¼Œé€‰å‡ºé»„è‰²çš„é‚£æ¡ã€‚</p><h2><span id="shu-xue-xing-shi">æ•°å­¦å½¢å¼</span><a href="#shu-xue-xing-shi" class="header-anchor"></a></h2><p>æˆ‘ä»¬å‡è®¾è¾“å…¥åºåˆ—æ˜¯$X=[x_1, x_2, x_3, â€¦, x_n]$,å¯¹åº”çš„è¾“å‡ºåºåˆ—æ˜¯ $Y = [y_1, y_2, â€¦, y_n]$,<br>labelçš„é›†åˆä¸º$L = [l_1, l_2, â€¦ , l_k]$. ä»»åŠ¡ç›®æ ‡æ˜¯è®©çœŸå®çš„è¾“å‡ºåºåˆ—çš„æ¦‚ç‡æœ€å¤§ï¼Œå³ï¼š<br>$<br>Max(P(y_1,y_2,..y_n|X))<br>$</p><h1><span id="yan-shi-jian-zhou-softmax">æ²¿æ—¶é—´è½´Softmax</span><a href="#yan-shi-jian-zhou-softmax" class="header-anchor"></a></h1><p>ç›´æ¥å¯¹ä¸Šè¿°æ¨¡å‹è¿›è¡Œæ±‚è§£æ¯”è¾ƒå›°éš¾ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå°†é—®é¢˜ç®€åŒ–ï¼Œç„¶ååœ¨å¯¹ç®€åŒ–åçš„é—®é¢˜è¿›è¡Œæ±‚è§£ã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬å¼•å…¥æœ´ç´ å‡è®¾ï¼šå³æ ‡ç­¾ä¹‹é—´ç‹¬ç«‹ä¸ç›¸å…³ï¼Œå¯¹åº”çš„ç›®æ ‡å°±ç®€åŒ–ä¸ºï¼š<br>$<br>Max(P(y_1|X)P(y_2|X)â€¦P(y_n|X))<br>$<br>ä¸ºäº†å¯¹$P(y_i|X)$è¿›è¡Œå»ºæ¨¡ï¼Œé€šå¸¸æˆ‘ä»¬å…ˆé€šè¿‡RNNsï¼ˆLSTMï¼ŒBiLSTM, etc)æ¥æ•è·è¾“å…¥Xçš„å…¨å±€ä¿¡æ¯ï¼Œè·å¾—éšè—çŠ¶æ€åºåˆ—$\bar{x_1}, \bar{x_2}, â€¦, \bar{x_n}$,<br>æ­¤æ—¶çš„$\bar{x_i}$å¯ä»¥çœ‹ä½œæ˜¯$x_i$ é€šè¿‡Xè·å–çš„ç‰¹å¾ï¼Œç”±äºRNNså¯ä»¥æ•è·å…¨å±€ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è®¤ä¸ºç‰¹å¾$\bar{x_i}$ä¹‹é—´äº’ä¸ç›¸å…³ï¼Œå¯¹åº”çš„<br>$P(y_i|X) = P(y_i|\bar{x_i})$<br>æˆ‘ä»¬çš„ç›®æ ‡ï¼š<br>$<br>Max(P(y_1|X)P(y_2|X)â€¦P(y_n|X))<br>= Max(P(y_1|\bar{x_1})P(y_2|\bar{x_2})..P(y_n|\bar{x_n}))<br>= Max(\prod(P(y_i|\bar{x_i})))<br>$<br>æ­¤æ—¶åªéœ€è¦$Max(P(y_i|\bar{x_i}))$è¿›è¡Œæ±‚è§£ï¼Œå³æ²¿æ—¶é—´è½´ä¸€æ­¥ä¸€æ­¥çš„å¯¹RNNsçš„éšè—è¾“å‡ºé€šè¿‡softmaxæ¥æœ€å¤§åŒ–å¯¹åº”ç›®æ ‡æ ‡ç­¾æ¦‚ç‡ã€‚<br><img src="/2019/12/26/from-softmax-to-crf/softmax.png" alt="æ²¿æ—¶é—´è½´softmax"></p><h1><span id="crf">CRF</span><a href="#crf" class="header-anchor"></a></h1><p>å› ä¸ºåœ¨ä¸Šä¸€ä¸ªæ–¹æ¡ˆä¸­ï¼Œæˆ‘ä»¬åšäº†æœ´ç´ å»ºè®¾ï¼Œå°†è¾“å‡ºåºåˆ—çœ‹ä½œæ˜¯ç›¸äº’ç‹¬ç«‹çš„ä¸€å…ƒæ¨¡å‹ï¼Œè¿™æ ·ä¼šå¼•å…¥ä¸€äº›é—®é¢˜ï¼Œå¦‚åœ¨åˆ†è¯ä¸­ï¼ˆbmesï¼‰ï¼Œm- æ ‡ç­¾ä¸èƒ½å‡ºç°åœ¨s- åé¢ï¼Œ<br>s- æ ‡ç­¾ä¸èƒ½å‡ºç°åœ¨b- å’Œm-åé¢ç­‰ï¼Œæ‰€ä»¥å³ä½¿åœ¨ä¸Šè¿°æ–¹æ¡ˆä¸­ï¼Œè‡³å°‘ä¹Ÿéœ€è¦äººä¸ºçš„è®¾ç½®ä¸€ä¸ªâ€œè½¬ç§»çŸ©é˜µâ€ï¼Œå°†ä¸åˆç†çš„è½¬ç§»æ–¹å¼å¾—åˆ†ç½®ä¸º0ï¼Œæ¥é¿å…ä¸åˆç†æ–¹æ¡ˆçš„å‡ºç°ã€‚<br>è€Œä¸Šè¿°æ–¹æ¡ˆå‡ºç°é”™è¯¯çš„åŸå› ï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºæˆ‘ä»¬çš„æœ´ç´ å‡è®¾ï¼šæ ‡ç­¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚ä¸ºäº†è§£å†³ä¸Šè¿°æ–¹æ¡ˆçš„é—®é¢˜ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦åœ¨è¾“å‡ºç«¯æ˜¾å¼è€ƒè™‘æ ‡ç­¾çš„å…³è”æ€§ï¼Œå³è¾“å‡ºæ ‡ç­¾ä¸ä¸Šä¸‹æ–‡ç›¸å…³ã€‚<br><img src="/2019/12/26/from-softmax-to-crf/crf_example.png" alt="æ˜¾å¼è€ƒè™‘è¾“å‡ºç«¯ä¸Šä¸‹æ–‡"><br>æ˜¾å¼è€ƒè™‘è¾“å‡ºç«¯ä¸Šä¸‹æ–‡ç›¸å…³</p><p>ç°åœ¨æˆ‘ä»¬å›åˆ°åŸå§‹ç›®æ ‡ä¸Šæ¥ï¼ŒåŸå§‹ç›®æ ‡æ˜¯$Max(P(y_1,y_2,..y_n|X)) $, ä¸Šä¸ªæ–¹æ¡ˆä¸­æˆ‘ä»¬æ˜¯å› ä¸ºç›´æ¥å¯¹$P(y_1, y_2,â€¦y_n|x_1, x_2, â€¦,x_n)$ç›´æ¥å»ºæ¨¡å¾ˆéš¾ï¼Œ<br>æ‰€ä»¥æ‰åšå‡ºäº†å‡è®¾ï¼Œç®€åŒ–ç›®æ ‡ã€‚ç°åœ¨è®©æˆ‘ä»¬æ¢ä¸ªæ€è·¯ï¼Œä¸ºäº†æ±‚è§£ä¸Šè¿°æ¦‚ç‡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç©·ä¸¾å‡ºè¾“å‡ºåºåˆ—æ‰€æœ‰çš„å¯èƒ½ç»“æœ$Y_1, Y_2, â€¦, Y_{k^n}$,<br>ç„¶åå¦‚æœèƒ½è®¡ç®—å‡ºå½“å‰è¾“å…¥Xå¯¹åº”æ¯ç§å¯èƒ½çš„è¾“å‡ºåºåˆ—çš„â€œå€¼â€ï¼Œ åˆ™æˆ‘ä»¬å¯ä»¥é€šè¿‡Softmaxè®¡ç®—å‡ºçœŸå®è¾“å‡ºåºåˆ—çš„æ¦‚ç‡ï¼Œå³å¾—åˆ°$P(Y_{true}|X)$ã€‚<br><code>å‡è®¾ä¸€ï¼šæˆ‘ä»¬å¯ä»¥å­¦ä¹ ä¸€ä¸ªæ‰“åˆ†å‡½æ•°fï¼Œé€šè¿‡å‡½æ•°få¯ä»¥å¾—åˆ°è¾“å‡ºåºåˆ—å…³äºè¾“å…¥çš„å¾—åˆ†ï¼Œå³$score_i = f(Y_i, X)$</code><br>æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å°±è½¬åŒ–ä¸º $P(Y|X) = \frac{exp(f(y_1, y_2,â€¦y_n; X))}{Z(X)}$.<br>å…¶ä¸­$Z(X) = \sum_{i=1}^{k^n}(exp(f(Y_i, X)))$ã€‚å³æ­¤æ—¶çš„æ¦‚ç‡Pæ˜¯ä¸€ä¸ªæŒ‡æ•°åˆ†å¸ƒã€‚<br>æ­¤æ—¶æˆ‘ä»¬çš„æ–¹æ¡ˆæ˜¯<code>1</code>ä¸ª<code>$k^n$</code>å¤šåˆ†ç±»é—®é¢˜ï¼Œå³æˆ‘ä»¬æ˜¯å¯¹ä¸€ä¸ªå®Œæ•´çš„è¾“å‡ºåºåˆ—ä¸ºå•ä½æ¥è®¡ç®—æ¦‚ç‡ï¼ˆè·¯å¾„ç§¯åˆ†ï¼‰ï¼Œè€Œä¸Šä¸€ä¸ªæ–¹æ¡ˆä¸­ï¼Œæ˜¯<code>n</code>ä¸ª<code>k</code>åˆ†ç±»é—®é¢˜ï¼Œ<br>è¿™æ˜¯ä¸¤ä¸ªæ–¹æ¡ˆçš„ä¸åŒç‚¹ä¹‹ä¸€ã€‚<br>åœ¨æ–¹æ¡ˆä¸€ä¸­æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œç›´æ¥å¯¹å®Œæ•´åºåˆ—å»ºæ¨¡æ¯”è¾ƒå›°éš¾ï¼Œæ­¤æ—¶æˆ‘ä»¬ç›´æ¥å¯¹$f(Y_i, X)$æ±‚è§£ä¹Ÿä¼šé¢ä¸´ç›¸åŒçš„å›°éš¾ï¼Œä¸ºäº†é¿å…æ–¹æ¡ˆä¸€çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸å†ä½¿ç”¨ä¸€å…ƒæ¨¡å‹ï¼Œæ”¹ä¸ºäºŒå…ƒæ¨¡å‹ã€‚<br><code>å¼•å…¥ä¸€é˜¶é©¬å°”å¯å¤«å‡è®¾ï¼Œä¸”å…¶å…³è”æ€§æ˜¯åŠ æ€§çš„ã€‚å³å½“å‰è¾“å‡ºæ ‡ç­¾åªä¸å‰ä¸€ä¸ªè¾“å‡ºæ ‡ç­¾ç›¸å…³ï¼Œå…¶æ€»å¾—åˆ†æ˜¯å¯¹æ‰€æœ‰å¾—åˆ†æ±‚å’Œã€‚</code><br>æ­¤æ—¶çš„ç›®æ ‡å°±è½¬åŒ–ä¸º<br>$<br>P(y_1, y_2, â€¦, y_n|X)<br>= P(y_1|X)P(y_2|y_1;X)â€¦P(y_n|y_{n-1}|X)<br>= P(y_1|X)\frac{P(y_1,y_2|X)}{P(y_1|X)P(y_2|X)} P(y_2|X) â€¦ \frac{P(y_{n-1}, y_n|X)}{P(y_{n-1}|X)P(y_n|X)} P(y_n|X)<br>$<br>å‡è®¾ä¸€ä¸­æˆ‘ä»¬å‡è®¾Pæ˜¯ä¸€ä¸ªæŒ‡æ•°åˆ†å¸ƒï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªå‡½æ•°e å’Œ tï¼šeå¯¹P(y_i|X)å»ºæ¨¡, t å¯¹$\frac{P(y_1,y_2|X)}{P(y_1|X)P(y_2|X)}$å»ºæ¨¡ï¼Œå³ï¼š<br>$<br>P(y_i|X) = exp(e(y_i, X))<br>\frac{P(y_{i-1},y_1|X)}{P(y_{i-1}|X)P(y_i|X)} = exp(t(y_{i-i}, y_i; X))<br>$</p><p>æ­¤æ—¶çš„ç›®æ ‡å°±åŒ–ç®€ä¸ºï¼š<br>$<br>P(y_1, y_2, â€¦, y_n|X)<br>= \frac{exp(f(y_1, y_2,â€¦y_n; X))}{Z(X)}<br>= \frac{1}{Z(X)} exp(e(y_i,X) + t(y_1, y_2; X) + e(y_2, X) + â€¦ + t(y_{n-1}, y_n; X) + e(y_n, X))<br>$<br>æ­¤æ—¶æˆ‘ä»¬åªéœ€è¦å¯¹æ¯ä¸ªæ ‡ç­¾å’Œç›¸é‚»æ ‡ç­¾æ‰“åˆ†ï¼Œç„¶åå°†æ‰€æœ‰æ‰“åˆ†æ±‚å’Œï¼Œå³å¯å¾—åˆ°æ€»å¾—åˆ†ï¼Œç„¶åå¯¹ç›®æ ‡è¿›è¡Œæ±‚è§£ã€‚</p><h1><span id="xian-xing-lian-crf">çº¿æ€§é“¾CRF</span><a href="#xian-xing-lian-crf" class="header-anchor"></a></h1><p>è™½ç„¶ä¸Šé¢å·²ç»åšäº†å¤§é‡ç®€åŒ–ï¼Œä½†æ˜¯æ±‚è§£æ—¶ä¾ç„¶æ¯”è¾ƒå›°éš¾ï¼Œä¸»è¦æ˜¯åœ¨æ±‚è§£tä¸­ï¼Œå› ä¸ºéœ€è¦åŒæ—¶å¯¹è¾“å…¥Xä¸æ ‡ç­¾$y_i$, $y_{i-1}$åŒæ—¶è€ƒè™‘ï¼Œè€Œåœ¨eä¸­ï¼Œ<br>å·²ç»å°†è¾“å…¥ä¸è¾“å‡ºçš„å…³è”è¿›è¡Œäº†å»ºæ¨¡ï¼Œæ­¤æ—¶æˆ‘ä»¬å¼•å…¥çº¿æ€§é“¾å‡è®¾ï¼šå‡è®¾tä¸è¾“å‡ºæ ‡ç­¾æ— å…³ï¼Œåˆ™æ­¤æ—¶$ t(y_{i-1}, y_i;X) = t(y_{i-1}, y_i)$ï¼Œé‚£æ‰“åˆ†å‡½æ•°fç®€åŒ–ä¸ºï¼š<br>$<br>f(y_1, y_2, â€¦, y_n;X)<br>= e(y_1,X) + t(y_1, y_2) + e(y_2, X) + â€¦ + t(y_{n-1},y_n;X) + e(y_n,X)<br>$<br>æ­¤æ—¶tå°±æ˜¯ä¸€ä¸ªå¾…è®­ç»ƒçš„å‚æ•°çŸ©é˜µï¼Œè€Œeåˆ™å¯ä»¥é€šè¿‡RNNsæ¥å»ºæ¨¡ï¼Œæ¦‚ç‡åˆ†å¸ƒä¹Ÿå˜ä¸ºï¼š<br>$P(y_1, y_2,â€¦,y_n|x_1, x_2,â€¦,x_n)$<br>$= exp(e(y_1, X) + \sum_{i=1}^{n-1}[t(y_i, y_{i+1}) + e(y_{i+1}, X)])) \frac{1}{Z(X)}$</p><h1><span id="qiu-jie">æ±‚è§£</span><a href="#qiu-jie" class="header-anchor"></a></h1><p>ä¸ºäº†æ±‚è§£æ¨¡å‹ï¼Œæˆ‘ä»¬ç”¨æœ€å¤§ä¼¼ç„¶æ³•ï¼Œ å³ï¼š<br>$loss = -logP(y_1, y_2, â€¦, y_n|x_1, x_2, â€¦, x_n)$<br>å°†ä¸Šå¼ä»£å…¥ï¼š<br>$loss = logZ(X) - (e(y_1, X) + \sum_{i=1}^{n-1}[t(y_i, y_{i+1}) + e( y_{i+1} , X)]) $</p><p>å‡å·åé¢çš„é¡¹é€šè¿‡æ·»åŠ ä¸€ä¸ªå¾…è®­ç»ƒçš„å‚æ•°çŸ©é˜µå¾ªç¯è®¡ç®—å³å¯å¾—åˆ°ç»“æœï¼Œéš¾ç®—çš„å‰é¢çš„å½’ä¸€åŒ–å› å­Z(X)ã€‚å‰é¢æˆ‘ä»¬ä¹Ÿè¯´äº†ï¼Œæˆ‘ä»¬æ­¤æ—¶æ˜¯ä»¥è·¯å¾„ä¸ºå•ä½ï¼Œ<br>åˆ™æ­¤æ—¶Z(X) éœ€è¦æˆ‘ä»¬ç©·ä¸¾æ‰€æœ‰å¯èƒ½çš„è·¯å¾„æ¯”å¯¹å…¶æ‰“åˆ†æ±‚å’Œï¼Œè€Œæ­¤æ—¶çš„è·¯å¾„æœ‰ $k^n$æ¡ï¼Œæ˜¯æŒ‡æ•°çº§çš„ï¼Œç›´æ¥ç®—æ•ˆç‡å¤ªä½ï¼Œå‡ ä¹ä¸å¯èƒ½ã€‚<br>åœ¨å‡è®¾äºŒä¸­ï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€é˜¶é©¬å°”å¯å¤«å‡è®¾ï¼Œå½“å‰æ ‡ç­¾åªä¸å‰ä¸€ä¸ªæ ‡ç­¾æœ‰è”ç³»ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€’å½’çš„è®¡ç®—å½’ä¸€åŒ–å› å­ï¼Œè¿™ä½¿å¾—åŸæ¥æ˜¯æŒ‡æ•°çº§çš„è®¡ç®—é‡é™ä½ä¸ºçº¿æ€§çº§åˆ«ã€‚<a href="https://spaces.ac.cn/archives/5542/comment-page-1#comments" target="_blank" rel="noopener">åŸæ–‡</a><br>ï¼ˆè¿™ç‚¹æ˜¯æ±‚è§£å½’ä¸€åŒ–å› å­çš„å…³é”®ï¼Œæœ€åˆæˆ‘åœ¨æ¨å¯¼æ—¶ä¸€ç›´å¡åœ¨è¿™ç‚¹ä¸Šï¼‰<br>å…·ä½“çš„: å°†è®¡ç®—åˆ°æ—¶åˆ»tçš„å½’ä¸€åŒ–å› å­è®°ä¸ºZtï¼Œå¹¶å°†å®ƒå®‰è£…æ ‡ç­¾åˆ†ä¸ºkä¸ªéƒ¨åˆ†ï¼Œå³ï¼š<br>$Zt = Zt^1 + Zt^2 + â€¦ + Zt^k<br>å…¶ä¸­$Zt^i$è¡¨ç¤ºä»¥æ ‡ç­¾iä¸ºç»ˆç‚¹çš„æ‰€æœ‰è·¯å¾„çš„å¾—åˆ†æŒ‡æ•°å’Œï¼Œæ­¤æ—¶ï¼Œæˆ‘ä»¬å†™å‡ºé€’å½’å…¬å¼ï¼š</p><p>$Z_{t+1}^1 = (Zt^1 T_{11} + Zt^2 T_{21} + â€¦ + Zt^k T_{k1})E_{t+1}(1|X)$</p><p>â€¦  </p><p>$Z_{t+1}^k = (Zt^1 T_{1k} + Zt^2 T{2k} + â€¦ + Zt^k T_{kk})E_{t+1}(k|X)$</p><p>å…¶ä¸­Tæ˜¯çŸ©é˜µtçš„å„ä¸ªå…ƒç´ å–æŒ‡æ•°å½¢å¼ï¼Œå³$T_{ij} = exp(t_{ij})$, Eæ˜¯eçš„æŒ‡æ•°å½¢å¼ï¼Œå³$E_{ij} = exp(e_{ij})$, è€Œ$e_{ij}$æ˜¯æŒ‡æ—¶åˆ»iæ—¶RNNså¯¹label jçš„æ‰“åˆ†ã€‚<br><img src="/2019/12/26/from-softmax-to-crf/logz.png" alt="logz"></p><p>ä¸Šå¼å¸¦æœ‰æŒ‡æ•°å½¢å¼ï¼Œæˆ‘ä»¬å–å¯¹æ•°æ¥ç®€åŒ–è®¡ç®—è¿‡ç¨‹ã€‚<br>$$<br>log(Z_{t+1}^1) = log((Zt^1 T_{11} + Zt^2 T_{21} + â€¦ + Zt^k T_{k1})E_{t+1}(1|X) )  \\<br>=log(exp(log(Zt^1) + t_{11}) + exp(log(Zt^2) + t_{21}) + â€¦ + exp(log(Zt^k) + t_{k1}) exp(e_{t+1}(1|X)))  \\<br>= log(exp(log(Zt^1) + t_{11} + e_{t+1}(1|X)) + exp(log(Zt^2) + t_{21} + e_{t+1}(1|X)) + â€¦ + exp(log(Zt^k) + t_{k1} + e_{t+1}(1|X)))\\<br>= log(\sum_k(log(Zt^k) + t_{k1} + e_{t+1}(1|X)))<br>$$</p><p>ä¸Šé¢çš„è¿‡ç¨‹æ¯”è¾ƒæ›²æŠ˜ï¼Œå¯¹æœ‰äº›åŒå­¦å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥å¸®åŠ©ç†è§£ã€‚<br>æˆ‘ä»¬å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªè¾“å…¥$X=[w_0,w_1, w_2]$, æ ‡ç­¾é›†åˆä¸º$L=[l_1, l_2]$. RNNså¯¹eå®Œæˆäº†å»ºæ¨¡ï¼Œå³ï¼š</p><table><thead><tr><th>&nbsp;</th><th>l1</th><th>l2     </th></tr></thead><tbody><tr><td>w0</td><td>$e_{01}$</td><td>$e_{02}$ </td></tr><tr><td>w1</td><td>$e_{11}$</td><td>$e_{12}$ </td></tr><tr><td>w2</td><td>$e_{21}$</td><td>$e_{22}$ </td></tr></tbody></table><p>å…¶ä¸­$e_{ij}$ä»£è¡¨ç¬¬iä¸ªå­—æ˜¯ç¬¬jä¸ªæ ‡ç­¾çš„å¾—åˆ†ã€‚<br>è½¬ç§»çŸ©é˜µt:</p><table><thead><tr><th>&nbsp;</th><th>l1</th><th>l2 </th></tr></thead><tbody><tr><td>l1</td><td>t11</td><td>t12  </td></tr><tr><td>l2</td><td>t21</td><td>t22  </td></tr></tbody></table><p>å…¶ä¸­$t_{ij}$ä»£è¡¨ç¬¬iä¸ªæ ‡ç­¾è½¬æ¢ä¸ºç¬¬jä¸ªæ ‡ç­¾çš„å¾—åˆ†ã€‚<br>æ¥ä¸‹æ¥æˆ‘ä»¬æŒ‰ä»$w_0$åˆ°$w_2$çš„æ–¹å‘ä¸€æ­¥ä¸€æ­¥æ¥è¿›è¡Œè®¡ç®—ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¼•å…¥ä¸¤ä¸ªå˜é‡: states, curï¼Œå…¶ä¸­:  </p><ul><li>statesä»£è¡¨ä¸Šä¸€ä¸ªæ—¶åˆ»è®¡ç®—çš„æœ€ç»ˆç»“æœï¼Œå³å¯¹åº”$log(Z_t^i)$</li><li><p>curä»£è¡¨å½“å‰æ—¶åˆ»å„ä¸ªæ ‡ç­¾çš„å¾—åˆ†ï¼Œå³å¯¹åº”$e_t^i$</p></li><li><p><code>$w_0$:</code></p></li><li>states = None</li><li>$cur = [e_{01}, e_{02}]$<br>æ­¤æ—¶:<br>$log(Z) = exp(e_{01}) + exp(e_{02})$</li></ul><ul><li><code>$w_0$ â€“&gt; $w_1$:</code></li><li>states = $[e_{01}, e_{02}]$</li><li>cur = $[e_{11}, e{12}]$</li></ul><ol><li>æ‰©å±•states:<br>$<br>states = $$\begin{pmatrix}<br>e_{01}&amp;e_{01}\\<br>e_{02}&amp;e_{02}\\<br>\end{pmatrix}$$<br>$</li></ol><ol start="2"><li>æ‰©å±•cur:<br>$<br>cur = $$\begin{pmatrix}<br>e_{11}&amp;e_{12}\\<br>e_{11}&amp;e_{12}\\<br>\end{pmatrix}$$<br>$</li></ol><ol start="3"><li>å°†cur, states ä¸è½¬ç§»çŸ©é˜µt æ±‚å’Œ:</li></ol><p>$<br>score = $$\begin{pmatrix}<br>e_{11}&amp;e_{12}\\<br>e_{11}&amp;e_{12}\\<br>\end{pmatrix}$$<br>$+$ $$\begin{pmatrix}<br>e_{01}&amp;e_{01}\\<br>e_{02}&amp;e_{02}\\<br>\end{pmatrix}$$<br>$+$ $$\begin{pmatrix}<br>t_{11}&amp;t_{12}\\<br>t_{21}&amp;t_{22}\\<br>\end{pmatrix}$$<br>$=$ $$\begin{pmatrix}<br>e_{01} + e_{11} + t_{11} &amp; e_{01} + e_{12} + t_{12}\\<br>e_{02} + e_{11} + t_{21} &amp; e_{02} + e_{12} + t_{22}\\<br>\end{pmatrix}$$<br>$</p><ol start="4"><li>å¯¹scoreå–æŒ‡æ•°å½¢å¼ç„¶åæ±‚å’Œï¼Œå¾—åˆ°æ–°çš„states:<br>$<br>states = [log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21})), log(exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22}))]<br>$<br>å…¶ä¸­ï¼Œstatesä¸­çš„æ¯ä¸ªå…ƒç´ å³å¯¹åº”ç€å¼ä¸­$logZt^i$, æ­¤æ—¶çš„$log(Z)= \sum_k(exp(log(Z^k)))$:</li></ol><p>$<br>log(Z_{0,1}) = log(exp(log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21}))) + exp(log(exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22})))) \\<br>= log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21}) + exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22}))<br>$</p><p>å½“åºåˆ—é•¿åº¦ä¸º2ï¼Œæ ‡ç­¾æœ‰ä¸¤ä¸ªæ—¶ï¼Œæ‰€æœ‰å¯èƒ½çš„æ ‡ç­¾åºåˆ—ä¸º$(label_1-&gt;label_1, label_2-&gt;label_1, label_1-&gt;label_2, label_2-&gt;label_2)$,è€Œå¯¹åº”çš„åºåˆ—å¾—åˆ†ï¼Œå³å¯¹åº”ä¸Šå¼ä¸­çš„é¡¹ï¼Œå³ï¼š</p><ul><li>$ S_1: label_1-&gt;label_1:$<br>$ S_1 = e_{01} + e_{11} + t_{11} $</li><li>$S_2: label_2-&gt;label_1:$<br>$ S_2 = e_{02} + e_{11} + t_{21}$</li><li>$S_3 = label_1-&gt;label_2:$<br>$ S_3 = e_{01} + e_{12} + t_{12}$</li><li>$S_4 = label_2-&gt;label_2:$<br>$ S_4 = e_{02} + e_{12} + t_{22}$</li></ul><ul><li><code>$w_0$ -&gt; $w_1$ -&gt; $w_2$:</code></li><li>$states = [log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21})), log(exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22}))] $</li><li>$cur = [e_{21}, e_{22}]$</li></ul><p>ä¸ä¸Šé¢çš„åšæ³•ä¸€æ ·ï¼Œä¹Ÿåˆ†ä¸º4æ­¥ï¼š</p><ol><li>æ‰©å±•states:<br>$<br>states = $$\begin{pmatrix}<br>log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21}))&amp;log(exp(e_{01} + e_{11} + t_{11}) + exp(e_{02} + e_{11} + t_{21}))\\<br>log(exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22}))&amp;log(exp(e_{01} + e_{12} + t_{12}) + exp(e_{02} + e_{12} + t_{22}))\\<br>\end{pmatrix}$$<br>$</li></ol><ol start="2"><li>curï¼š<br>$<br>cur = $$\begin{pmatrix}<br>e_{21} &amp;e_{22}\\<br>e_{21} &amp;e_{22}\\<br>\end{pmatrix}$$<br>$</li></ol><ol start="3"><li>å°†statesï¼Œcurä¸è½¬ä¹‰çŸ©é˜µtæ±‚å’Œï¼š</li></ol><p>$$<br>scores = \begin{pmatrix}<br>log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) &amp; log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) \\<br>log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22})) &amp; log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))\\<br>\end{pmatrix} \\+<br>\begin{pmatrix}<br>e_{21} &amp;e_{22}\\<br>e_{21} &amp;e_{22}\\<br>\end{pmatrix} \\+<br>\begin{pmatrix}<br>t_{11}&amp; t_{12}\\<br>t_{21}&amp;t_{22}\\<br>\end{pmatrix} \\=<br>\begin{pmatrix}<br>log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) + e_{21} + t_{11} &amp;log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) + e_{22} + t_{12}\\<br>log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22})) + e_{21} + t_{21} &amp;log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+x_{12}+t_{22})) + e_{22} + t_{22}\\<br>\end{pmatrix}<br>$$</p><ol start="4"><li>å¯¹scoreå–æŒ‡æ•°å½¢å¼ç„¶åæ±‚å’Œï¼Œå¾—åˆ°æ–°çš„states:</li></ol><p>$$ states = [\\<br>log(exp(log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) + e_{21} + t_{11})+exp(log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22})) + e_{21} + t_{21})), \\<br>log(exp(log(exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21})) + e_{22} + t_{12})+ exp(log(exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+x_{12}+t_{22})) + e_{22} + t_{22})))] \\<br> = [log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{21} + t_{11}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{21}+t_{21})),\\<br>log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{22} + t_{12}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{22}+t_{22}))]<br>$$</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬ç”¨statesè®¡ç®—ä¸€ä¸‹$(Z_2)$:</p><p>$$<br>log(Z_{(0-&gt;1-&gt;2)}) = log(exp(states[0]) + exp(states[1])) \\<br>=log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{21} + t_{11}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{21}+t_{21})) \\+<br>log((exp(e_{01}+e_{11}+t_{11}) + exp(e_{02}+e_{11}+t_{21}))exp(e_{22} + t_{12}) + (exp(e_{01}+e_{12}+t_{12}) + exp(e_{02}+e_{12}+t_{22}))exp(e_{22}+t_{22})) \\<br>= log(exp(e_{01}+e_{11}+t_{11}+e_{21}+t_{11}) + exp(e_{02}+e_{11}+t_{21}+e_{21}+t_{11}) \\ +<br>exp(e_{01}+e_{12}+t_{12} +e_{21}+t_{21}) + exp(e_{02}+e_{12}+t_{22}+e_{21}+t_{21}) \\+<br>exp(e_{01}+e_{11}+t_{11} +e_{22}+t_{12}) + exp(e_{01}+e_{11}+t_{11}+e_{22}+t_{12}) \\+<br>exp(e_{01}+e_{12}+t_{12} +e_{22}+t_{22}) + exp(e_{01}+e_{12}+t_{12}+e_{22}+t_{21}))<br>$$</p><p>ä¸Šå¼ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦æ±‚çš„æœ€ç»ˆç»“æœ$log(Z)$,å…¶ä¸­æŒ‡æ•°å†…å¯¹åº”ç€æ‰€æœ‰è·¯å¾„çš„å¾—åˆ†ã€‚<br>åˆ°æ­¤ï¼Œä¸Šä¾‹ä¸­çš„æ•´ä¸ªå½’ä¸€åŒ–å› å­çš„è®¡ç®—è¿‡ç¨‹ä¹Ÿå°±å®Œæˆäº†ï¼Œè€ŒCRFä¸­æœ€éš¾çš„éƒ¨åˆ†ä¹Ÿå°±è§£å†³äº†ã€‚</p><h1><span id="demo">demo</span><a href="#demo" class="header-anchor"></a></h1><p>ææ‡‚äº†ç†è®ºéƒ¨åˆ†ï¼Œä¸‹é¢å†™ä¸€ä¸ªdemoæ¥éªŒè¯ä¸€ä¸‹ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CRF</span><span class="params">(Layer)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, mask_label=False, **kwargs)</span>:</span></span><br><span class="line">        self.mask_label = <span class="number">1</span> <span class="keyword">if</span> mask_label <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">        super(CRF, self).__init__(**kwargs)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, input_shape)</span>:</span></span><br><span class="line">        self.num_label = input_shape[<span class="number">-1</span>] - self.mask_label</span><br><span class="line">        self.trans = self.add_weight(name=<span class="string">'crf_trans'</span>,</span><br><span class="line">                                     shape=(self.num_label, self.num_label),</span><br><span class="line">                                     trainable=<span class="literal">True</span>,</span><br><span class="line">                                     initializer=<span class="string">'glorot_uniform'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">path_score</span><span class="params">(self, inputs, labels)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        :param inputs: (batch_size, timesteps, num_label), obtained from rnn(lstm, bilstm. etc.)</span></span><br><span class="line"><span class="string">        :param labels: one-hot, (batch_size, timesteps, num_label) , real target series</span></span><br><span class="line"><span class="string">        :return:  path score</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        point_score = K.sum(K.sum(inputs * labels, <span class="number">2</span>), <span class="number">1</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">        label_pre = K.expand_dims(labels[:, :<span class="number">-1</span>], <span class="number">3</span>)</span><br><span class="line">        label_next = K.expand_dims(labels[:, <span class="number">1</span>:], <span class="number">2</span>)</span><br><span class="line">        label_trans = label_pre * label_next</span><br><span class="line">        trans = K.expand_dims(K.expand_dims(self.trans, <span class="number">0</span>), <span class="number">0</span>)</span><br><span class="line">        trans_score = K.sum(K.sum(label_trans * trans, [<span class="number">2</span>, <span class="number">3</span>]), <span class="number">1</span>, keepdims=<span class="literal">True</span>)</span><br><span class="line">        <span class="keyword">return</span> point_score + trans_score</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">log_norm_pre</span><span class="params">(self, inputs, states)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        expand previous states and inputs, sum with trans</span></span><br><span class="line"><span class="string">        :param inputs: (batch_size, num_label), current word emission scores</span></span><br><span class="line"><span class="string">        :param states: (batch_size, num_label), all paths  score of previous word</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        states = K.expand_dims(states[<span class="number">0</span>], <span class="number">2</span>)</span><br><span class="line">        inputs = K.expand_dims(inputs, <span class="number">1</span>)</span><br><span class="line">        trans = K.expand_dims(self.trans, <span class="number">0</span>)</span><br><span class="line">        scores = states + trans + inputs</span><br><span class="line">        output = K.logsumexp(scores, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> output, [output]</span><br><span class="line">        <span class="comment"># states = K.expand_dims(states[0], 2)  # (batch_size, output_dim, 1)</span></span><br><span class="line">        <span class="comment"># trans = K.expand_dims(self.trans, 0)  # (1, output_dim, output_dim)</span></span><br><span class="line">        <span class="comment"># output = K.logsumexp(states + trans, 1)  # (batch_size, output_dim)</span></span><br><span class="line">        <span class="comment"># return output + inputs, [output + inputs]</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">loss</span><span class="params">(self, y_true, y_pre)</span>:</span></span><br><span class="line">        <span class="string">'''</span></span><br><span class="line"><span class="string">        :param inputs: (batch_size, timesteps, num_label)</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        '''</span></span><br><span class="line">        <span class="comment"># mask = 1 - y_true[:, 1: -1] if self.mask_label else None</span></span><br><span class="line">        <span class="comment"># # y_true, y_pred = y_true[:, :, :self.num_label], y_pre[:, :, :self.num_label]</span></span><br><span class="line">        <span class="comment"># real_path_score = self.path_score(y_pre, y_true)</span></span><br><span class="line">        <span class="comment"># init_states = [y_pre[:, 0]]</span></span><br><span class="line">        <span class="comment"># log_norm, _ = K.rnn(self.log_norm_pre, initial_states=init_states, inputs=y_pre[:, 1:], mask=mask)  # log(Z)</span></span><br><span class="line">        <span class="comment"># log_norm_score = K.logsumexp(log_norm, 1, keepdims=True)</span></span><br><span class="line">        <span class="comment"># return log_norm_score - real_path_score</span></span><br><span class="line">        mask = <span class="number">1</span> - y_true[:, <span class="number">1</span>:, <span class="number">-1</span>] <span class="keyword">if</span> self.mask_label <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">        y_true, y_pre = y_true[:, :, :self.num_label], y_pre[:, :, :self.num_label]</span><br><span class="line">        init_states = [y_pre[:, <span class="number">0</span>]]  <span class="comment"># åˆå§‹çŠ¶æ€</span></span><br><span class="line">        log_norm, _, _ = K.rnn(self.log_norm_pre, y_pre[:, <span class="number">1</span>:], init_states, mask=mask)  <span class="comment"># è®¡ç®—Zå‘é‡ï¼ˆå¯¹æ•°ï¼‰</span></span><br><span class="line">        log_norm = K.logsumexp(log_norm, <span class="number">1</span>, keepdims=<span class="literal">True</span>)  <span class="comment"># è®¡ç®—Zï¼ˆå¯¹æ•°ï¼‰</span></span><br><span class="line">        path_score = self.path_score(y_pre, y_true)  <span class="comment"># è®¡ç®—åˆ†å­ï¼ˆå¯¹æ•°ï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> log_norm - path_score  <span class="comment"># å³log(åˆ†å­/åˆ†æ¯)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs)</span>:</span>  <span class="comment"># crf åªæ˜¯lossï¼Œä¸æ”¹å˜inputs</span></span><br><span class="line">        <span class="keyword">return</span> inputs</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">accuracy</span><span class="params">(self, y_true, y_pred)</span>:</span></span><br><span class="line">        mask = <span class="number">1</span> - y_true[:, :, <span class="number">-1</span>] <span class="keyword">if</span> self.mask_label <span class="keyword">else</span> <span class="literal">None</span></span><br><span class="line">        y_true, y_pred = y_true[:, :, :self.num_label], y_pred[:, :, :self.num_label]</span><br><span class="line">        isequal = K.equal(K.argmax(y_true, <span class="number">2</span>), K.argmax(y_pred, <span class="number">2</span>))</span><br><span class="line">        isequal = K.cast(isequal, <span class="string">'float32'</span>)</span><br><span class="line">        <span class="keyword">if</span> mask == <span class="literal">None</span>:</span><br><span class="line">            <span class="keyword">return</span> K.mean(isequal)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> K.sum(isequal * mask) / K.sum(mask)</span><br></pre></td></tr></table></figure></p><p>ç»“æœï¼š<br><img src="/2019/12/26/from-softmax-to-crf/result.png" alt="result"></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>åˆé›ªä¸‹çš„çº¢æœæœ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
      <category term="CRF" scheme="https://xv44586.github.io/tags/CRF/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†äº«ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆ</title>
    <link href="https://xv44586.github.io/2019/12/09/longton/"/>
    <id>https://xv44586.github.io/2019/12/09/longton/</id>
    <published>2019-12-09T14:35:44.000Z</published>
    <updated>2019-12-13T13:29:33.341Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><p>ä»Šå¤©ç¬¬ä¸€æ¬¡çŸ¥é“äº†ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆï¼ŒLangtonçš„èš‚èšï¼ŒåŠ¨æ‰‹è‡ªå·±ç”»äº†ä¸€ä¸ªåï¼Œå†³å®šåˆ†äº«ä¸€ä¸‹ã€‚è¿™ä¸ªæ¸¸æˆçš„æœ‰è¶£ä½“ç°åœ¨ä¸¤ä¸ªæ–¹é¢ï¼š<br><em>1ï¼š</em> è¿™ä¸ªæ¸¸æˆæ˜¯ä¸ªé›¶ç©å®¶æ¸¸æˆï¼Œæ•´ä¸ªè¿‡ç¨‹ä¹Ÿååˆ†çš„ç®€å•ï¼šæœ‰ä¸€ä¸ªåƒå›´æ£‹ç›˜ä¸€æ ·ç”»æ»¡æ–¹æ ¼çš„ç”»å¸ƒï¼Œåˆå§‹æ—¶ï¼Œæ•´ä¸ªç”»å¸ƒéƒ½æ˜¯ç©ºç™½ï¼Œ<br>ä¸€åªèš‚èšåœ¨ç”»å¸ƒçš„æŸä¸€ä¸ªåœ°æ–¹ï¼Œå¦‚æœå½“å‰ç©ºæ ¼ä¸ºç™½è‰²ï¼Œåˆ™å°†å½“å‰ç©ºæ ¼å»åï¼Œç„¶åå·¦è½¬90åº¦å¹¶å‰è¿›ä¸€æ ¼ï¼›å¦‚æœå½“å‰ç©ºæ ¼ä¸ºé»‘è‰²ï¼Œåˆ™å°†å½“å‰ç©ºæ ¼é¢œè‰²å»åï¼Œ<br>ç„¶åå³è½¬90åº¦å¹¶å‰è¿›ä¸€æ ¼ï¼Œå¦‚æ­¤å¾€å¤ã€‚<br><em>2ï¼š</em> æœ€åçš„ç»“æœéå¸¸æœ‰æ„æ€ï¼Œå¼€å§‹æ—¶ï¼Œæ•´ä¸ªç”»å¸ƒæ˜¯å¤æ‚æ— è§„å¾‹çš„å¤æ‚å›¾åƒï¼Œå¾ˆéš¾æƒ³è±¡æ˜¯è¿™ä¹ˆç®€å•çš„è§„åˆ™äº§ç”Ÿçš„ï¼Œä½†å½“èš‚èšèµ°äº†ä¸€ä¸‡æ­¥ä»¥åï¼Œæ•´ä¸ªè¿åŠ¨è¿‡ç¨‹<br>è¿›å…¥äº†å¾ªç¯ï¼Œè€Œå›¾åƒä¹Ÿå¼€å§‹å˜ä¸ºæœ‰è§„å¾‹çš„å›¾åƒã€‚</p><p>å¼€å§‹çš„å‰ä¸€ç™¾æ­¥å¦‚ä¸Šå›¾ï¼Œåˆ°ä¸€ä¸‡æ­¥è¿˜æœ‰ç‚¹æ—¶é—´ï¼Œæ‰€ä»¥ä¸ºç›´æ¥è·³è¿‡ä¸­é—´ä¸€ä¸‡æ­¥ï¼Œç»™å‡ºä¸€ä¸‡æ­¥åçš„ä¸€ç™¾æ­¥ã€‚æ„Ÿå…´è¶£æœ‰è€å¿ƒçš„å¯ä»¥è·‘ä¸‹ä»£ç è§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªæœ‰ç‚¹ç¥å¥‡çš„æ¸¸æˆã€‚Have funï¼</p><p><img src="/2019/12/09/longton/ant.gif" alt><br>    <strong>å‰ä¸€ç™¾æ­¥</strong></p><p><img src="/2019/12/09/longton/ant_r.gif" alt><br>    <strong>è§„å¾‹å‡ºç°åçš„ä¸€ç™¾æ­¥</strong></p><p>Langlonçš„èš‚èšæ¸¸æˆä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Date    : 2019/12/9</span></span><br><span class="line"><span class="comment"># @Author  : mingming.xu</span></span><br><span class="line"><span class="comment"># @File    : test.py</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> animation</span><br><span class="line"><span class="keyword">import</span> matplotlib.ticker <span class="keyword">as</span> plticker</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Direction</span><span class="params">(object)</span>:</span></span><br><span class="line">    D = [<span class="string">'E'</span>, <span class="string">'N'</span>, <span class="string">'W'</span>, <span class="string">'S'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, position, direct)</span>:</span></span><br><span class="line">        self.direct = direct</span><br><span class="line">        self.position = position</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">go_one_step</span><span class="params">(self, left=True)</span>:</span></span><br><span class="line">        lr = <span class="number">1</span> <span class="keyword">if</span> left <span class="keyword">else</span> <span class="number">-1</span></span><br><span class="line">        direct = self.D[(self.D.index(self.direct) + <span class="number">1</span> * lr) % len(self.D)]</span><br><span class="line">        next_position = &#123;</span><br><span class="line">            <span class="string">'E'</span>: <span class="keyword">lambda</span> p: [p[<span class="number">0</span>], p[<span class="number">1</span>] + <span class="number">1</span> * lr],</span><br><span class="line">            <span class="string">'N'</span>: <span class="keyword">lambda</span> p: [p[<span class="number">0</span>] - <span class="number">1</span> * lr, p[<span class="number">1</span>]],</span><br><span class="line">            <span class="string">'W'</span>: <span class="keyword">lambda</span> p: [p[<span class="number">0</span>], p[<span class="number">1</span>] - <span class="number">1</span> * lr],</span><br><span class="line">            <span class="string">'S'</span>: <span class="keyword">lambda</span> p: [p[<span class="number">0</span>] + <span class="number">1</span> * lr, p[<span class="number">1</span>]]</span><br><span class="line">        &#125;</span><br><span class="line">        position = next_position[self.direct](self.position)</span><br><span class="line">        <span class="keyword">return</span> Direction(position=position, direct=direct)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">N = <span class="number">100</span>  <span class="comment"># length of matrix</span></span><br><span class="line">lc, hc = <span class="number">1</span>, <span class="number">-1</span>  <span class="comment"># color for negative and positive</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">50</span>, <span class="number">50</span>))</span><br><span class="line">data = np.zeros((N, N)) + lc</span><br><span class="line">data[int(N/<span class="number">2</span>), int(N/<span class="number">2</span>)] *= <span class="number">-1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># remove axis</span></span><br><span class="line">ax.get_yaxis().set_visible(<span class="literal">False</span>) <span class="comment">#ä¸æ˜¾ç¤ºyè½´</span></span><br><span class="line">ax.get_xaxis().set_visible(<span class="literal">False</span>) <span class="comment">#ä¸æ˜¾ç¤ºxè½´</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># add text</span></span><br><span class="line">time_template = <span class="string">'step = %d'</span></span><br><span class="line">time_text = plt.text(<span class="number">0.5</span>, N+<span class="number">0.1</span>, <span class="string">''</span>, fontdict=&#123;<span class="string">'size'</span>: <span class="number">20</span>, <span class="string">'color'</span>: <span class="string">'red'</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">#add grid</span></span><br><span class="line"><span class="comment"># myInterval = 1</span></span><br><span class="line"><span class="comment"># loc = plticker.MultipleLocator(base=myInterval)</span></span><br><span class="line"><span class="comment"># ax.xaxis.set_major_locator(loc)</span></span><br><span class="line"><span class="comment"># ax.yaxis.set_major_locator(loc)</span></span><br><span class="line"><span class="comment"># ax.grid(which='major', axis='both', linestyle='-')</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># imshow</span></span><br><span class="line">ln = plt.imshow(data, animated=<span class="literal">True</span>, cmap=<span class="string">'gray'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dct = Direction(position=[int(N / <span class="number">2</span>), int(N / <span class="number">2</span>)], direct=<span class="string">'N'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">init</span><span class="params">()</span>:</span></span><br><span class="line">    ax.set_xlim(<span class="number">0</span>, N)</span><br><span class="line">    ax.set_ylim(<span class="number">0</span>, N+<span class="number">5</span>)</span><br><span class="line">    time_text.set_text(<span class="string">''</span>)</span><br><span class="line">    <span class="keyword">return</span> ln, time_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(dct, data)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    å½“å‰ä¸ºç™½è‰²æ–¹æ ¼ï¼Œåˆ™å¯¹å½“å‰æ–¹æ ¼å–åï¼Œå·¦è½¬å‰è¿›ä¸€æ ¼ï¼›è‹¥å½“å‰ä¸ºé»‘è‰²æ–¹æ ¼ï¼Œå–ååå³è½¬å‰è¿›ä¸€æ ¼</span></span><br><span class="line"><span class="string">    :param dct:</span></span><br><span class="line"><span class="string">    :param mat:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    pos = dct.position</span><br><span class="line">    <span class="keyword">if</span> data[pos[<span class="number">0</span>], pos[<span class="number">1</span>]] &gt; <span class="number">0</span>:</span><br><span class="line">        data[pos[<span class="number">0</span>], pos[<span class="number">1</span>]] *= <span class="number">-1</span></span><br><span class="line">        dct_ = dct.go_one_step(left=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        data[pos[<span class="number">0</span>], pos[<span class="number">1</span>]] *= <span class="number">-1</span></span><br><span class="line">        dct_ = dct.go_one_step(left=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> dct_, data</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span><span class="params">(f)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> dct</span><br><span class="line">    <span class="keyword">global</span> data</span><br><span class="line">    dct, data = move(dct, data)</span><br><span class="line">    ln.set_data(data)</span><br><span class="line">    time_text.set_text(time_template % f)</span><br><span class="line">    <span class="keyword">return</span> ln, time_text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_gen</span><span class="params">()</span>:</span></span><br><span class="line">    frame = <span class="number">0</span></span><br><span class="line">    max_step = <span class="number">11000</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> frame &lt; max_step:</span><br><span class="line">        frame += <span class="number">1</span></span><br><span class="line">        <span class="keyword">yield</span> frame</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">anim = animation.FuncAnimation(fig, update, frames=data_gen, interval=<span class="number">10</span>,</span><br><span class="line">                               init_func=init, blit=<span class="literal">True</span>, repeat=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">anim.save(<span class="string">'ant.gif'</span>, writer=<span class="string">'imagemagick'</span>, fps=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ¸¸æˆçš„å‰ä¸€ç™¾æ­¥</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Math" scheme="https://xv44586.github.io/categories/Math/"/>
    
    
      <category term="Game" scheme="https://xv44586.github.io/tags/Game/"/>
    
  </entry>
  
  <entry>
    <title>æœ‰è¶£çš„æ¦‚ç‡ç»Ÿè®¡é¢˜</title>
    <link href="https://xv44586.github.io/2019/11/30/statistics/"/>
    <id>https://xv44586.github.io/2019/11/30/statistics/</id>
    <published>2019-11-30T02:28:23.000Z</published>
    <updated>2019-11-30T07:15:58.387Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#fen-xiang-yi-ge-you-qu-de-gai-lu-ti">åˆ†äº«ä¸€ä¸ªæœ‰è¶£çš„æ¦‚ç‡é¢˜</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><p>æ˜¨æ™šä¸‹é›ªäº†ï¼Œå¼€å¿ƒğŸ˜„ï¼</p><h1><span id="fen-xiang-yi-ge-you-qu-de-gai-lu-ti">åˆ†äº«ä¸€ä¸ªæœ‰è¶£çš„æ¦‚ç‡é¢˜</span><a href="#fen-xiang-yi-ge-you-qu-de-gai-lu-ti" class="header-anchor"></a></h1><p>ä¸€æ®µçº¿æ®µä¸Šï¼Œä»»æ„å–ä¸¤ä¸é‡åˆçš„ç‚¹ï¼Œå°†è¿™æ¡çº¿æ®µåˆ‡åˆ†æˆä¸‰æ®µï¼Œé—®ï¼Œè¿™ä¸‰æ¡çº¿æ®µç»„æˆä¸‰è§’å½¢ç‚¹æ¦‚ç‡æ˜¯å¤šå°‘ï¼Ÿ</p><p>ç°åœ¨æˆ‘ä»¬å°†é—®é¢˜è½¬åŒ–ä¸€ä¸‹ï¼Œå‡è®¾åŸå§‹çº¿æ®µé•¿åº¦ä¸º1ï¼Œå³$(0ï¼Œ1)$è¡¨ç¤ºåŸå§‹çº¿æ®µï¼Œæ­¤æ—¶ï¼Œéšæœºåœ¨$(0ï¼Œ1)$èŒƒå›´å†…é€‰ä¸¤ä¸ªç‚¹aï¼Œbï¼Œç»„æˆ$(0ï¼Œa)$ï¼Œ$(aï¼Œb)$ï¼Œ$(bï¼Œ1)$ä¸‰ä¸ªçº¿æ®µï¼Œ<br>æ­¤æ—¶åŸå§‹é—®é¢˜ç­‰ä»·äºç°åœ¨çš„ä¸‰ä¸ªçº¿æ®µç»„æˆä¸‰è§’å½¢çš„æ¦‚ç‡ã€‚<br>ç°åœ¨æˆ‘ä»¬æ¥è€ƒè™‘ä¸€ä¸‹ï¼Œä¸‰æ¡çº¿æ®µåˆ†åˆ«ä¸º$A$ï¼Œ $B$ï¼Œ$C$ï¼Œå…¶ä¸­$A &gt;= B &gt;= C$,åˆ™Açš„é•¿åº¦å¿…å®šåœ¨$[1/3, 1)$,è€Œè¦ç»„æˆä¸‰è§’å½¢ï¼Œåˆ™éœ€è¦ $B + C &gt; A$,æ‰€ä»¥ B + C çš„é•¿åº¦ä¸º$(1/2, 1)$,<br>è€Œå¯¹åº”çš„Açš„é•¿åº¦ä¹Ÿå°±åœ¨[1/3, 1/2)å†…ï¼Œæ‰€ä»¥ï¼Œæœ€ç»ˆèƒ½æ„æˆä¸‰è§’å½¢çš„æ¦‚ç‡å³ä¸º $A_{triangle} / A_{all} = (1/2 - 1/3) / (1 - 1/3) = 1/4$</p><p>çœ‹ä¼¼éå¸¸å¤æ‚çš„é—®é¢˜ï¼Œä»æœ€åŸºæœ¬çš„æ•°å­¦çŸ¥è¯†å°±èƒ½è§£ç­”ï¼Œè¿˜çœŸæ˜¯æœ‰è¶£ï¼ </p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>2019å¹´çš„ç¬¬ä¸€åœºé›ªï¼Œæ‘„äºæœ›äº¬åœ°é“ç«™</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Math" scheme="https://xv44586.github.io/categories/Math/"/>
    
    
      <category term="Statistics" scheme="https://xv44586.github.io/tags/Statistics/"/>
    
  </entry>
  
  <entry>
    <title>å¸¦çº¦æŸçš„é¢†åŸŸè¯æŒ–æ˜</title>
    <link href="https://xv44586.github.io/2019/11/28/domain-words/"/>
    <id>https://xv44586.github.io/2019/11/28/domain-words/</id>
    <published>2019-11-28T07:31:41.000Z</published>
    <updated>2019-12-04T01:47:13.812Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#bei-jing">èƒŒæ™¯</a></li><li><a href="#fang-an">æ–¹æ¡ˆ</a><ul><li><a href="#shi-yan">å®éªŒ</a></li><li><a href="#shi-yan-jie-guo">å®éªŒç»“æœ</a></li></ul></li><li><a href="#zong-jie">æ€»ç»“</a><ul><li><a href="#you-dian">ä¼˜ç‚¹</a></li><li><a href="#que-dian">ç¼ºç‚¹</a></li><li><a href="#fen-xiang">åˆ†äº«</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="bei-jing">èƒŒæ™¯</span><a href="#bei-jing" class="header-anchor"></a></h1><p>åˆ†äº«ä¸€ä¸ªæœ€è¿‘åšçš„é¡¹ç›®æ–¹æ¡ˆï¼ŒèƒŒæ™¯æ˜¯å½“å‰çš„å†…å®¹æ ‡ç­¾æ˜¯æœ€ç»†ç²’åº¦åˆ°ä¸€çº§å¤§ç±»ï¼Œè€Œäº§å“å¸Œæœ›å‡ºä¸€äº›ä¸‰çº§å°ç±»ï¼ˆå½“å‰æœ€ç»†åˆ†ç±»ï¼‰çš„æ ‡ç­¾ï¼Œè€Œä¸”è¿™äº›æ ‡ç­¾åº”è¯¥æ˜¯æœ‰åˆ«äºå…¶ä»–ä¸‰çº§å°ç±»çš„ã€‚</p><h1><span id="fang-an">æ–¹æ¡ˆ</span><a href="#fang-an" class="header-anchor"></a></h1><p>æˆ‘å°†å…¶çœ‹ä½œæ˜¯é¢†åŸŸè¯æŒ–æ˜ä»»åŠ¡ï¼Œåªæ˜¯è¿™ä¸ªä»»åŠ¡å¸¦æœ‰ä¸€äº›çº¦æŸï¼ŒåŠè¿™äº›é¢†åŸŸè¯æ˜¯ä¸ªæ€§åŒ–çš„ï¼Œä¸å…¶ä»–å°ç±»å†…çš„é¢†åŸŸè¯æ˜¯ä¸åŒçš„ã€‚<br>æ‰€ä»¥ï¼Œéœ€è¦åšçš„æ˜¯æŠ½è¯ï¼ˆæ–°è¯å‘ç°ï¼‰+é¢†åŸŸè¯æŒ–æ˜+ä¸ªæ€§åŒ–åˆ¤æ–­ã€‚<br>ç”±äºä¹‹å‰åšè¿‡æ–°è¯å‘ç°ï¼Œä¸»è¦å‚è€ƒ<a href="http://www.matrix67.com/blog/archives/5044" target="_blank" rel="noopener">äº’è”ç½‘æ—¶ä»£çš„ç¤¾ä¼šè¯­è¨€å­¦ï¼šåŸºäºSNSçš„æ–‡æœ¬æ•°æ®æŒ–æ˜</a>,<br>å¯¹åº”çš„javaå®ç°<a href="https://github.com/xv44586/dict_build" target="_blank" rel="noopener">dict_build</a>ã€‚<br>é™¤äº†æ— ç›‘ç£æŠ½è¯å¤–ï¼Œmatrix67çš„åšæ–‡åé¢åŠéƒ¨åˆ†ä¹Ÿå¾ˆæœ‰æ„æ€ï¼šé€šè¿‡å¯¹ä¸¤ä»½è¯­æ–™è¿›è¡ŒæŠ½è¯ï¼Œç„¶åå¯¹è¯è¿›è¡Œè¯é¢‘ç»Ÿè®¡ï¼Œé€šè¿‡å¯¹æ¯”è¯åœ¨ä¸¤ä»½è¯­æ–™å†…çš„è¯é¢‘å·®å¼‚ï¼Œæ¥å‘ç°â€œçƒ­è¯â€ã€‚<br>å›åˆ°ç°åœ¨çš„ä»»åŠ¡ï¼Œä¸ªæ€§åŒ–çš„è¯ï¼Œå¿…å®šåœ¨å½“å‰å°ç±»å†…ç›¸å¯¹äºå…¶ä»–å°ç±»æ›´â€œçƒ­â€ï¼Œæˆ‘ä»¬å¯ä»¥å°†å½“å‰å°ç±»å†…çš„è¯ä¸éå½“å‰å°ç±»è¿›è¡Œå¯¹æ¯”ï¼Œå°±èƒ½å¾—åˆ°å½“å‰å°ç±»çš„â€œçƒ­è¯â€ï¼Œ<br>æœ‰äº†çƒ­è¯ï¼Œæˆ‘ä»¬åœ¨åˆ¤æ–­è¿™äº›â€œçƒ­è¯â€æ˜¯ä¸æ˜¯é¢†åŸŸè¯ï¼Œå³å¯å¾—åˆ°æƒ³è¦çš„ç»“æœã€‚è€Œå®é™…ä¸Šï¼Œç”±äºä¸€çº§å¤§ç±»ä¹‹é—´çš„è¯å·²ç»æœ‰å¾ˆå¤§å·®å¼‚ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åœ¨æŠ½å½“å‰å°ç±»â€œçƒ­è¯â€æ—¶ï¼Œä¸å¿…å¯¹å…¨é‡éå½“å‰å°ç±»è¯­æ–™è¿›è¡Œç»Ÿè®¡ï¼Œåªéœ€è¦å¯¹å…¶ä¸€çº§å¤§ç±»å†…éå½“å‰å°ç±»è¯­æ–™è¿›è¡Œç»Ÿè®¡å¯¹æ¯”ï¼Œå³å¯å¾—åˆ°â€œçƒ­è¯â€ã€‚<br>è€Œå¯¹äºé¢†åŸŸè¯åˆ¤æ–­ï¼Œç”±äºæˆ‘ä»¬å·²ç»æœ‰äº†ä¸€çº§å¤§ç±»çš„æ ‡ç­¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™éƒ¨åˆ†ä¿¡æ¯æ¥è¿›è¡Œé¢†åŸŸè¯åˆ¤æ–­ã€‚<br>æ‰€ä»¥ï¼Œæœ€ç»ˆçš„æ–¹æ¡ˆæ˜¯å…ˆæŠ½è¯ï¼Œç„¶åå¯¹è¯è¿›è¡Œé¢†åŸŸè¯åˆ¤æ–­ï¼Œå¯¹è¯è¿›è¡Œæ˜¯å¦æ˜¯â€œçƒ­è¯â€åˆ¤æ–­ï¼Œå¯¹é¢†åŸŸè¯ä¸çƒ­è¯è¿›è¡Œæ±‚äº¤è¿ç®—ï¼Œå¾—åˆ°ä¸ªæ€§åŒ–çš„é¢†åŸŸè¯ã€‚</p><h2><span id="shi-yan">å®éªŒ</span><a href="#shi-yan" class="header-anchor"></a></h2><p>å®é™…å¤„ç†æ—¶ï¼Œç”±äºæˆ‘ä»¬æŒ–æ˜çš„â€œè¯â€å…¶å®æ›´åƒæ˜¯ä¸€ä¸ªçŸ­è¯­ï¼Œå…¶é•¿åº¦ä¹Ÿæ¯”è¯ç¨é•¿ï¼Œè€Œâ€œè¯â€çš„ç»„åˆä¸Šé™æ˜¯${CharCount}^{WordLength}$ï¼Œè€Œå­—ç¬¦å¤§æ¦‚æœ‰12000+ï¼Œ è¯å¹³å‡é•¿åº¦å‡å¦‚æ˜¯7ï¼Œè¿™ä¸ªé‡ä¹Ÿæ˜¯ç›¸å½“å¤§çš„ã€‚<br>æ‰€ä»¥æŠ½è¯å¯¹å†…å­˜è¦æ±‚å¾ˆé«˜ï¼Œè€Œä¸”éå¸¸è€—æ—¶ï¼ˆ10h+).åœ¨æ€è€ƒå¦‚ä½•ä¼˜åŒ–æŠ½è¯ç¨‹åºæ—¶ï¼Œçœ‹åˆ°äº†<a href="https://kexue.fm/archives/6540" target="_blank" rel="noopener">åˆ†äº«ä¸€æ¬¡ä¸“ä¸šé¢†åŸŸè¯æ±‡çš„æ— ç›‘ç£æŒ–æ˜</a>ï¼Œä½œè€…çš„æ€è·¯ä¸æˆ‘çš„æ€è·¯ä¸€æ ·ï¼Œä¸è¿‡ä¸åŒçš„æ˜¯ï¼Œ<br>ä½œè€…åœ¨æŠ½è¯æ—¶ï¼Œå¹¶æ²¡æœ‰æ²¿ç”¨matrix67çš„åšæ–‡ä¸­æ ¹æ®å‡åˆåº¦ä¸ä¿¡æ¯ç†µæ¥è¿›è¡Œæ˜¯å¦æˆè¯åˆ¤æ–­ï¼Œè€Œä¸”ç”¨ä¿¡æ¯ç†µæ˜¯å¦ä½äºæŸä¸ªé˜ˆå€¼ï¼Œæ¥åˆ¤æ–­æ˜¯å¦åˆ‡å¼€ï¼Œå³ä¸ºä¸¤ä¸ªè¯ï¼Œè¿™ä¸ªæ€è·¯è¿˜æ˜¯éå¸¸å·§å¦™çš„ï¼Œè¿™æ ·ï¼Œä¸å…‰è®¡ç®—é‡å‡å°äº†å¾ˆå¤šï¼Œè€Œä¸”ä¸åœ¨éœ€è¦è®¾ç½®è¶…å‚æ•°ä¸­ngramçš„å€¼ï¼Œ<br>æŒ–æ˜å‡ºçš„è¯ä¹Ÿæ›´ç¬¦å·â€œè¯­ä¹‰å®Œæ•´æ€§â€ï¼›è€Œé¢†åŸŸè¯åˆ¤æ–­ï¼Œä½œè€…é‡‡ç”¨çš„æ˜¯é€šè¿‡è¯­æ–™è®­ç»ƒè¯å‘é‡ï¼Œå†ç”±ç§å­è¯æ¥æ‰©å±•é¢†åŸŸè¯ï¼Œä¹Ÿä¸å¤±ä¸ºä¸€ä¸ªå¥½æ€è·¯ã€‚</p><h2><span id="shi-yan-jie-guo">å®éªŒç»“æœ</span><a href="#shi-yan-jie-guo" class="header-anchor"></a></h2><p>ä»ç»“æœä¸Šçœ‹ï¼Œæ•ˆæœè¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚<br><img src="/2019/11/28/domain-words/words.png" alt="çƒ­è¯ç»“æœ"><br>çƒ­è¯ç»“æœ<br><img src="/2019/11/28/domain-words/keywords.png" alt="é¢†åŸŸè¯ç»“æœ"><br>é¢†åŸŸè¯ç»“æœ<br><img src="/2019/11/28/domain-words/result.png" alt="æœ€ç»ˆç»“æœ"><br>æœ€ç»ˆæŒ–æ˜çš„ä¸ªæ€§åŒ–é¢†åŸŸè¯</p><h1><span id="zong-jie">æ€»ç»“</span><a href="#zong-jie" class="header-anchor"></a></h1><h2><span id="you-dian">ä¼˜ç‚¹</span><a href="#you-dian" class="header-anchor"></a></h2><p>æŒ–æ˜é¢†åŸŸè¯ä»»åŠ¡ä¸­ï¼Œé¦–å…ˆæ˜¯å¦‚ä½•å¯¹â€è¯â€è¿›è¡Œåˆ¤æ–­ï¼Œç„¶åæ‰æ˜¯â€é¢†åŸŸè¯â€åˆ¤æ–­ï¼Œæ‰€ä»¥å½±å“æœ€ç»ˆç»“æœå¥½åçš„ä¸»è¦å› ç´ ä¹Ÿæ˜¯â€è¯â€åˆ’åˆ†çš„è´¨é‡ä¸â€é¢†åŸŸè¯â€åˆ¤æ–­çš„å‡†ç¡®æ€§ã€‚<br>ä¸Šè¿°æ–¹æ¡ˆä¸­ï¼Œé€šè¿‡ç”¨ä¿¡æ¯ç†µçš„æœ€å°é˜ˆå€¼æ¥åˆ¤æ–­ç›¸é‚»ä¸¤ä¸ªå­—æ˜¯å¦å±äºåŒä¸€ä¸ªè¯å†…æ¥è¿›è¡Œåˆ†è¯ï¼Œä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ï¼Œèƒ½åˆ‡åˆ†å‡ºé«˜é¢‘çš„çŸ­è¯­ï¼›<br>é€šè¿‡ç§å­è¯åœ¨è¯å‘é‡ç©ºé—´æ¥ä¸€å±‚ä¸€å±‚æŒ–æ˜é¢†åŸŸè¯ï¼Œä¸»è¦æ€è·¯æ˜¯è¿‘é‚»çš„è¿‘é‚»ï¼Œè™½ç„¶ä¸ä½ â€ç›´çº¿è·ç¦»â€ç¨è¿œï¼Œä½†é€šè¿‡ä½ çš„è¿‘é‚»ç‚¹è·³è½¬åâ€è·ç¦»â€è¿‘ï¼Œè¿™æ ·æ¥æ‰©å¤§å¬å›ï¼Œæ‰€ä»¥é€šè¿‡å°‘é‡ç§å­ç‚¹å³å¯å¬å›å‡ºå¤§é‡â€è¿‘é‚»â€è¯ã€‚</p><h2><span id="que-dian">ç¼ºç‚¹</span><a href="#que-dian" class="header-anchor"></a></h2><p>ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œé¦–å…ˆåˆ†è¯æ—¶ï¼Œå®¹æ˜“å°†å¸¸ç”¨æ­é…é”™è¯¯åˆ‡åˆ†ï¼Œå¦‚htmlå®¹æ˜“åˆ‡å‡º *h/tml,çš„xxxå®¹æ˜“åˆ‡åˆ†ä¸ºä¸€ä¸ªè¯ï¼Œæ‰€ä»¥éœ€è¦å†™ä¸€äº›è§„åˆ™è¿‡æ»¤æ‰æ˜æ˜¾é”™è¯¯åˆ‡åˆ†çš„è¯ï¼›ç§å­è¯åœ¨å¬å›æ—¶ï¼Œç”±äºè¯å‘é‡ç”¨çš„æ˜¯word2vecè¿™ç§é™æ€è¯å‘é‡ï¼Œè¿‘é‚»å®¹æ˜“è·³å‡ºå½“å‰domainï¼Œå¦‚ç”¨â€åä¸ºâ€åšç§å­è¯ï¼Œç›´æ¥èšç±»å‡ºâ€å°ç±³â€/â€œè‹¹æœâ€ï¼Œè€Œè‹¹æœçš„è¿‘é‚»å°±å¯èƒ½è·³å‡ºæ‰‹æœºå“ç‰Œï¼Œ<br>è½¬å‘æ°´æœï¼Œå¦‚â€è¥¿ç“œâ€/â€œæ¡ƒå­â€ï¼Œæ‰€ä»¥éœ€è¦æ§åˆ¶æ‰©æ•£çš„å±‚æ¬¡æ·±åº¦ã€‚</p><h2><span id="fen-xiang">åˆ†äº«</span><a href="#fen-xiang" class="header-anchor"></a></h2><p>æœºå™¨å­¦ä¹ ä¸­æœ€é‡è¦çš„ä¸€ä¸ªæ€è·¯å°±æ˜¯å¯»æ‰¾å·®å¼‚ï¼Œæ‰¾åˆ°åˆç†çš„å·®å¼‚å¾€å¾€æ˜¯è§£å†³é—®é¢˜çš„å…³é”®ã€‚æœ¬æ¬¡åˆ†äº«äº†ä¸€ä¸ªé€šè¿‡å¯¹æ¯”å·®å¼‚æ¥è¿›è¡Œé¢†åŸŸè¯æŒ–æ˜çš„ä¾‹å­ï¼Œå¸Œæœ›ç»™åšç±»ä¼¼ä»»åŠ¡çš„åŒå­¦ä¸€äº›æ€è·¯ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºå¥¥æ£®</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Programming" scheme="https://xv44586.github.io/categories/Programming/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
      <category term="æ–°è¯å‘ç°" scheme="https://xv44586.github.io/tags/%E6%96%B0%E8%AF%8D%E5%8F%91%E7%8E%B0/"/>
    
      <category term="é¢†åŸŸè¯æŒ–æ˜" scheme="https://xv44586.github.io/tags/%E9%A2%86%E5%9F%9F%E8%AF%8D%E6%8C%96%E6%8E%98/"/>
    
      <category term="ä¿¡æ¯ç†µ" scheme="https://xv44586.github.io/tags/%E4%BF%A1%E6%81%AF%E7%86%B5/"/>
    
  </entry>
  
  <entry>
    <title>å¤©çŒ«åŒåä¸€é”€å”®é¢ç›¸å…³æ€è€ƒ</title>
    <link href="https://xv44586.github.io/2019/11/24/tm-1111/"/>
    <id>https://xv44586.github.io/2019/11/24/tm-1111/</id>
    <published>2019-11-24T01:49:06.000Z</published>
    <updated>2019-12-13T13:36:39.118Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#qi-yin">èµ·å› </a></li><li><a href="#shi-yan">å®éªŒ</a></li><li><a href="#shi-yan-xiao-jie">å®éªŒå°ç»“</a></li><li><a href="#shi-me-shi-guo-ni-he">ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ</a></li><li><a href="#tong-su-de-jie-shi">é€šä¿—çš„è§£é‡Š</a></li><li><a href="#zhi-shi-zu-zhou">çŸ¥è¯†è¯…å’’</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="qi-yin">èµ·å› </span><a href="#qi-yin" class="header-anchor"></a></h1><p>æœ€è¿‘åŒåä¸€ï¼Œå„å¤§ç”µå•†å¹³å°é€ åŠ¿ï¼Œå®£ä¼ è‡ªå·±å½“å¤©å¹³å°é”€å”®é¢ï¼Œè€Œæœ‰ä¸ªç½‘å‹çˆ†æ–™å¤©çŒ«é”€å”®é¢é€ å‡ï¼Œå› ä¸ºè‡ªå·±åœ¨å‡ ä¸ªæœˆå‰å°±å·²ç»æˆåŠŸé¢„æµ‹äº†ä»Šå¹´åŒåä¸€çš„é”€å”®é¢ï¼Œå¹¶ç»™å‡ºäº†è‡ªå·±çš„æ¨¡å‹å‚æ•°ï¼ˆå…¬å¼ï¼‰ã€‚<br><a href="/2019/11/24/tm-1111/wb.jpeg">2019å¹´11æœˆ12æ—¥ç½‘æ°‘è®¤ä¸ºå°¹ç«‹åº†ç¥æ¨ç®—çš„å¾®åš</a></p><h1><span id="shi-yan">å®éªŒ</span><a href="#shi-yan" class="header-anchor"></a></h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬æŒ‰ç…§æ¥¼ä¸»çš„æ€è·¯åšä¸€ä¸ªçš„å®éªŒã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tm_2009_2019 =  [<span class="number">0.50</span>, <span class="number">9.36</span>, <span class="number">52.00</span>, <span class="number">191.00</span>, <span class="number">350.00</span>, <span class="number">571.00</span>, <span class="number">912.00</span>, <span class="number">1207.00</span>, <span class="number">1682.69</span>, <span class="number">2135.00</span>]</span><br><span class="line">year = list(range(<span class="number">2009</span>, <span class="number">2019</span>))</span><br><span class="line">year = list(map(<span class="keyword">lambda</span> x: x<span class="number">-2009</span>, year))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sse</span><span class="params">(y_pre, y_true)</span>:</span></span><br><span class="line">    se = (y_pre - y_true) ** <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> se.sum()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ssr</span><span class="params">(y_pre, y_true)</span>:</span></span><br><span class="line">    sr = (y_pre - y_true.mean()) ** <span class="number">2</span></span><br><span class="line">    <span class="keyword">return</span> sr.sum()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">R</span><span class="params">(y_pre, y_true)</span>:</span></span><br><span class="line">    se = sse(y_pre, y_true) </span><br><span class="line">    sr = ssr(y_pre, y_true)</span><br><span class="line">    <span class="keyword">return</span> sr/(se+sr)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">build_model</span><span class="params">(x, y, degree=<span class="number">3</span>)</span>:</span></span><br><span class="line">    x = np.array(x).reshape(<span class="number">-1</span>,<span class="number">1</span>)</span><br><span class="line">    y = np.array(y).reshape(<span class="number">-1</span>,<span class="number">1</span>)</span><br><span class="line">    pf = PolynomialFeatures(degree=degree)</span><br><span class="line">    X = pf.fit_transform(x)</span><br><span class="line">    linear_reg = LinearRegression()</span><br><span class="line">    linear_reg.fit(X, y)</span><br><span class="line">    y_pre = linear_reg.predict(X)</span><br><span class="line">    print(<span class="string">'R is: '</span>, R(y_pre, y))</span><br><span class="line">    <span class="keyword">return</span> linear_reg, pf</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(model, pf, test_x)</span>:</span></span><br><span class="line">    test_X = pf.transform(np.array(test_x).reshape(<span class="number">-1</span>,<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> model.predict(test_X)</span><br></pre></td></tr></table></figure></p><p><img src="/2019/11/24/tm-1111/r0.png" alt="æ¨¡å‹ç»“æœ"><br>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶çš„æ‹Ÿåˆä¼˜åº¦Ré«˜è¾¾0.999ï¼Œè€Œé¢„æµ‹ä»Šå¹´çš„å€¼ä¸º2689ï¼Œç¡®å®ä¹Ÿä¸ä»Šå¹´çš„å®é™…å€¼2684åŸºæœ¬å»åˆï¼Œæ‰€ä»¥ç½‘å‹è®¤å®šè‡ªå·±æˆåŠŸçš„å‘ç°äº†å¤©çŒ«åŒåä¸€çš„é”€å”®é¢â€æ¨¡å‹â€ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åšå‡ ä¸ªä¸ä¸€æ ·çš„å®éªŒæ¥çœ‹çœ‹å…¶ç»“æœã€‚<br><strong>å®éªŒ1</strong><br>è¿™æ¬¡æˆ‘ä»¬å°†æ•°æ®ä¿®æ”¹ä¸€ä¸‹ï¼šå°†ç¬¬ä¸‰å¹´å’Œå€’æ•°ç¬¬ä¸‰å¹´çš„æ•°æ®éƒ½å‡å°‘10%ï¼Œå…¶ä»–å‚æ•°ä¸å˜ï¼Œçœ‹çœ‹æ¨¡å‹æ•ˆæœã€‚<br><img src="/2019/11/24/tm-1111/lower_9.png" alt="ä¿®æ”¹æ•°æ®åæ¨¡å‹ç»“æœ"><br>æ‹Ÿåˆä¼˜åº¦0.996ï¼Œé¢„æµ‹å€¼ä¸º2642ï¼Œä¸ä»Šå¹´å®é™…å€¼ä¹ŸåŸºæœ¬å»åˆã€‚</p><p><strong>å®éªŒ2</strong><br>è¿™æ¬¡æˆ‘ä»¬ä¸å†ä½¿ç”¨å…¨éƒ¨æ•°æ®ï¼Œè€Œåªç”¨2013-2018è¿™å…­å¹´çš„æ•°æ®ï¼Œå…¶ä»–ä¸å˜ï¼Œæ¥çœ‹çœ‹æˆ‘ä»¬çš„æ¨¡å‹æ•ˆæœå¦‚ä½•ã€‚<br><img src="/2019/11/24/tm-1111/r6.png" alt="å…­å¹´æ•°æ®æ¨¡å‹ç»“æœ"><br>æ‹Ÿåˆä¼˜åº¦ä¹Ÿé«˜è¾¾0.997ï¼Œè€Œä¸”é¢„æµ‹å€¼2672ä¹Ÿä¸ä»Šå¹´çš„å®é™…å€¼åŸºæœ¬å»åˆã€‚</p><p><strong>å®éªŒ3</strong><br>è¿™æ¬¡æˆ‘ä»¬ä¸å†ä½¿ç”¨ä¸‰æ¬¡ï¼Œè€Œæ¢ä¸ºäºŒæ¬¡çº¿æ€§æ–¹ç¨‹æ¥æ‹Ÿåˆï¼Œä»ç„¶ä½¿ç”¨åŸå§‹çš„åå¹´æ•°æ®ã€‚<br><img src="/2019/11/24/tm-1111/degree_2.png" alt="ä¿®æ”¹æ¨¡å‹å‚æ•°åç»“æœ"><br>æ‹Ÿåˆä¼˜åº¦0.999ï¼Œé¢„æµ‹å€¼ä¸º2675ï¼Œä¸ä»Šå¹´çš„å®é™…å€¼ä¹ŸåŸºæœ¬å»åˆã€‚</p><h1><span id="shi-yan-xiao-jie">å®éªŒå°ç»“</span><a href="#shi-yan-xiao-jie" class="header-anchor"></a></h1><p>å®éªŒ1ä¸å®éªŒ2è¯´æ˜ï¼Œå¯¹æ ·æœ¬åšä¸€å®šå¤„ç†åï¼Œå¯¹æ¨¡å‹æœ€ç»ˆçš„æ‹Ÿåˆå½±å“ä¸å¤§ï¼ŒåŸå› æ˜¯åœ¨æ±‚è§£æ¨¡å‹æ—¶ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨çš„lossæ˜¯æ¬§å¼è·ç¦»ï¼ˆæœ€å°äºŒä¹˜ä¼°è®¡ï¼‰ï¼Œæ•´ä½“çš„<br>lossæ˜¯å¯¹æ‰€æœ‰æ ·æœ¬æ‹Ÿåˆlossçš„å’Œï¼Œæ‰€ä»¥æ¨¡å‹åœ¨æ‹Ÿåˆæ—¶ä¼šæ›´â€å…³æ³¨â€å€¼å¤§çš„æ ·æœ¬ï¼Œè€Œå‰å‡ å¹´çš„å€¼ä¸åå‡ å¹´ç›¸æ¯”å·®è·ä¸€ä¸ªæ•°é‡çº§ï¼Œæ‰€ä»¥ä¸ä½¿ç”¨å€¼å¾ˆå°çš„æ ·æœ¬å¯¹æ¨¡å‹<br>å½±å“ä¸å¤§ã€‚è€Œå®é™…å»ºæ¨¡æ—¶ï¼Œå¯¹äºæ ·æœ¬èŒƒå›´è·¨åº¦å¾ˆå¤§çš„ç‰¹å¾ï¼Œé€šå¸¸æˆ‘ä»¬éƒ½éœ€è¦å¹³æ»‘è€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨åŸå§‹å€¼ã€‚<br>å®éªŒ3æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå‚æ•°æ›´å°çš„æ¨¡å‹ï¼Œ$f(x) = A + Bx + Cx^2$, è€ŒåŸå§‹æ¨¡å‹ä½¿ç”¨ä¸‰æ¬¡æ‹Ÿåˆï¼Œ$F(x) = A + bx + Cx^2 + Dx^3$, ä¸¤ä¸ªæ¨¡å‹æ˜æ˜¾æ˜¯<br>ä¸åŒçš„ï¼Œä½†æ˜¯å´éƒ½èƒ½æ‹Ÿåˆæ•°æ®ï¼Œè¿™æ˜¯å› ä¸ºè¿™äº›æ¨¡å‹éƒ½è¿‡æ‹Ÿåˆäº†ï¼Œä¹Ÿå°±æ˜¯å¯¹äºä¸€æ‰¹ç¦»æ•£ç‚¹ï¼Œæ€»æ˜¯èƒ½æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°Fï¼Œå¯ä»¥éå¸¸å¥½çš„æ‹Ÿåˆä»–ï¼Œè¿™ä¹Ÿæ˜¯å†¯è¯ºä¼Šæ›¼çš„é‚£<br>ä¸ªç¬‘è¯ï¼šå››ä¸ªå‚æ•°ç”»å¤§è±¡ï¼Œäº”ä¸ªå‚æ•°é¼»å­æ™ƒã€‚</p><h1><span id="shi-me-shi-guo-ni-he">ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ</span><a href="#shi-me-shi-guo-ni-he" class="header-anchor"></a></h1><p>åœ¨è¿™ä¸ªé—®é¢˜ä¸Šï¼Œä¸€äº›ç½‘å‹è¯´ï¼Œè¿™ä¸ªæ¨¡å‹è‚¯å®šæ˜¯æœ‰æ•ˆçš„è€Œä¸æ˜¯è¿‡æ‹Ÿåˆï¼Œå› ä¸ºä»–â€å®Œç¾é¢„æµ‹â€äº†ä»Šå¹´çš„çœŸå®å€¼ï¼Œæ¨¡å‹å¦‚æœåªæ˜¯å•çº¯çš„åœ¨ä¹‹å‰çš„æ•°æ®ä¸Šå¾ˆå¥½çš„æ‹Ÿåˆï¼Œè€Œä¸èƒ½æˆåŠŸé¢„æµ‹ä»Šå¹´çš„çœŸå®å€¼ï¼Œè¿™æ‰æ˜¯è¿‡æ‹Ÿåˆï¼Œç°åœ¨æ¨¡å‹æˆåŠŸé¢„æµ‹äº†ä»Šå¹´çš„å€¼ï¼Œæ‰€ä»¥ç°åœ¨çš„æ¨¡å‹æ˜¯æœ‰æ•ˆçš„ï¼Œä¸å­˜åœ¨è¿‡æ‹Ÿåˆã€‚<br>ä¸ºäº†è¯´æ˜è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç®€å•è®¨è®ºä¸€ä¸‹ï¼Œä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆï¼Œæ˜¯ä¸æ˜¯æˆåŠŸé¢„æµ‹äº†å°±ä¸å­˜åœ¨è¿‡æ‹Ÿåˆã€‚<br>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥ç®€å•è¯´æ˜ä¸€ä¸‹ï¼Œä¸€ä¸ªæ¨¡å‹çš„è¯¯å·®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å› ä¸ºæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®æ‹Ÿåˆçš„ä¸å¥½å¸¦æ¥çš„è¯¯å·®ï¼Œè¿™éƒ¨åˆ†æˆ‘ä»¬ç§°ä¸ºåå·®ï¼›è€Œç”±äºæŠ½æ ·è¿‡ç¨‹ä¸­ï¼ŒæŠ½å‡ºçš„è®­ç»ƒæ ·æœ¬ä¸æ•´ä½“æ ·æœ¬åˆ†å¸ƒä¸åŒå¼•èµ·çš„è¯¯å·®ï¼Œæˆ‘ä»¬ç§°ä¸ºæ–¹å·®ã€‚è€Œå½“æˆ‘ä»¬æŠ½æ ·æ—¶æ˜¯æœ‰åçš„ï¼Œå³æŠ½æ ·ä¸æ•´ä½“æ ·æœ¬åˆ†å¸ƒä¸åŒï¼Œè€Œæˆ‘ä»¬çš„æ¨¡å‹åˆå¯¹è®­ç»ƒæ•°æ®æ‹Ÿåˆçš„éå¸¸å¥½ï¼Œæ­¤æ—¶çš„æ¨¡å‹æˆ‘ä»¬å°±ç§°ä¹‹ä¸ºè¿‡æ‹Ÿåˆï¼Œå³ä»–è™½ç„¶å¯¹æ ·æœ¬æ‹Ÿåˆçš„å¾ˆå¥½ï¼Œä½†æ˜¯ç”±äºæ ·æœ¬ä¸æ•´ä½“åˆ†å¸ƒä¸åŒï¼Œå¯¼è‡´æ¨¡å‹åœ¨æ³›åŒ–æ—¶æ€§èƒ½å¹¶ä¸å¥½ï¼Œé€šå¸¸æ¯”åœ¨è®­ç»ƒé›†ä¸Šè¦å·®å¾ˆå¤šï¼Œå› ä¸ºæ¯•ç«Ÿæ¨¡å‹æ‹Ÿåˆçš„æ˜¯ä¸€ä¸ªä¸æ•´ä½“ä¸åŒåˆ†å¸ƒçš„æ•°æ®é›†ï¼Œæ‹Ÿåˆçš„è¶Šå¥½ï¼Œæ³›åŒ–è¶Šå·®ã€‚<br>é‚£å½“æ¨¡å‹åœ¨æ–°çš„æ ·æœ¬ä¸Šé¢„æµ‹å¯¹æ—¶ï¼Œæ˜¯ä¸æ˜¯å°±ä¸èƒ½è¯´ä»–è¿‡æ‹Ÿåˆå‘¢ï¼Ÿå…¶å®ä¹Ÿä¸å°½ç„¶ï¼Œæœ¬è´¨ä¸Šè¿‡æ‹Ÿåˆåªä¸ä½ çš„æ•´ä¸ªè¿‡ç¨‹æœ‰å…³ï¼Œè‡³äºæœ€ç»ˆçš„æ¨¡å‹åœ¨æ–°æ ·æœ¬ä¸Šé¢„æµ‹çš„å‡†ä¸å‡†ï¼Œå¹¶ä¸èƒ½è¯´æ˜è¿™ä¸ªæ¨¡å‹æ˜¯å¦è¿‡æ‹Ÿåˆï¼Œæ¯•ç«ŸççŒ«è¿˜èƒ½ç¢°ä¸Šæ­»è€—å­ï¼Œæ¨¡å‹æ‹Ÿåˆçš„æ•°æ®é›†è™½ç„¶ä¸æ•´ä½“åˆ†å¸ƒä¸åŒï¼Œä½†æ˜¯æ¯•ç«Ÿä¹Ÿæ˜¯æ•´ä½“æ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œé¢„æµ‹å‡†<br>ä¸€éƒ¨åˆ†æ•°æ®ä¹Ÿæ­£å¸¸ï¼Œæ¯•ç«Ÿæˆ‘ä»¬è¯´è¿‡æ‹Ÿåˆçš„æ³›åŒ–æ€§èƒ½ä½ï¼Œä½†ä¸æ˜¯è¯´ä»–æ³›åŒ–ä½åˆ°å…¨é”™ã€‚<br>æ‰€ä»¥å¯¹åº”å¤©çŒ«çš„è¿™ä¸ªæ¡ˆä¾‹ï¼Œæ€»çš„æ¥è¯´å¤©çŒ«çš„é”€å”®é¢æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸šåŠ¡åœºæ™¯æœ€ç»ˆå¸¦æ¥çš„ç»“æœï¼Œè€Œä»…ä»…ç”¨æœ€ç»ˆçš„é”€å”®é¢æ¥è¿›è¡Œæ¨¡å‹ï¼Œå¿½ç•¥å„ç§ä¸šåŠ¡ç­–ç•¥çš„å½±å“å› ç´ ï¼Œæ˜¾ç„¶ä¸ä¸šåŠ¡çš„çœŸå®åˆ†å¸ƒç›¸å»ç”šè¿œï¼Œä¸ç„¶ä¹Ÿä¸ç”¨æŠ•å…¥è¿™ä¹ˆå¤šäººåŠ›ç‰©åŠ›ï¼Œç›´æ¥ç­‰ç€æ–°çš„ä¸€å¹´åˆ°æ¥å°±å¥½äº†ï¼Œå› ä¸ºä½ ä¸ç®¡æ€ä¹ˆè°ƒæ•´ï¼Œæœ€ç»ˆçš„ç»“æœéƒ½æ˜¯â€æ¨¡å‹â€å®šå¥½çš„ã€‚</p><h1><span id="tong-su-de-jie-shi">é€šä¿—çš„è§£é‡Š</span><a href="#tong-su-de-jie-shi" class="header-anchor"></a></h1><p>å½“æˆ‘ç”¨ä¸Šé¢è¿™äº›è®ºè¿°æ¥è§£é‡Šæ—¶ï¼ŒåŒäº‹å‘Šè¯‰æˆ‘ï¼šâ€æˆ‘ä¸æ‡‚æ•°å­¦ä¸æ‡‚æœºå™¨å­¦ä¹ ï¼Œæˆ‘å°±çŸ¥é“ä»–çš„æ¨¡å‹é¢„æµ‹å¯¹äº†ï¼Œéƒ½é¢„æµ‹å¯¹äº†ï¼Œä½ æ€ä¹ˆèƒ½è¯´ä»–ä¸å‡†å‘¢ï¼Œè¿˜è¿‡æ‹Ÿåˆï¼Œè¿‡æ‹Ÿåˆä¸æ˜¯é¢„æµ‹ä¸å¯¹æ‰å«è¿‡æ‹Ÿåˆå—ï¼Ÿâ€ è¿™æ—¶æˆ‘ä¼šæ¢ä¸€ä¸ªåœºæ™¯ï¼Œâ€å‡å¦‚ç°åœ¨æœ‰ä¸ªäººï¼Œé€šè¿‡ä¹‹å‰çš„åæœŸåŒè‰²çƒï¼Œé¢„æµ‹å¯¹äº†è¿™æœŸå¯¹åŒè‰²çƒï¼Œé‚£ä½ è¦ä¸è¦ç”¨ä»–çš„æ¨¡å‹ï¼Œé‡é‡‘æŠ•å…¥ä¹°ä¸‹ä¸€æœŸçš„åŒè‰²çƒå‘¢ï¼Ÿâ€</p><h1><span id="zhi-shi-zu-zhou">çŸ¥è¯†è¯…å’’</span><a href="#zhi-shi-zu-zhou" class="header-anchor"></a></h1><p>æœ€è¿‘å­¦åˆ°äº†ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼šçŸ¥è¯†çš„è¯…å’’ï¼Œå…¶å«ä¹‰æ˜¯å½“ä½ çŸ¥é“äº†ä¸€ä»¶äº‹åï¼Œä½ å°±æ— æ³•æƒ³è±¡è‡ªå·±æ˜¯ä¸çŸ¥é“è¿™ä»¶äº‹çš„ã€‚è€Œé€ æˆè¿™ç§ç°è±¡çš„æ ¹æœ¬åŸå› æ˜¯ä¿¡æ¯çš„ä¸å¯¹ç­‰ã€‚åœ¨æˆ‘æœ€åˆç»™äººè§£é‡Šå¤©çŒ«é”€å”®é¢äº‹ä»¶æ—¶ï¼Œå¯¹é¢æ€»æ˜¯å¬ä¸å¤ªæ‡‚æˆ‘åœ¨è¯´ä»€ä¹ˆï¼Œæˆ‘ä¹Ÿæä¸æ¸…æ¥šä¸ºä»€ä¹ˆæˆ‘è¯´çš„è¿™ä¹ˆç®€å•ç›´ç™½ï¼Œä»–ä¼šå¬ä¸æ‡‚ï¼Œå½“çœ‹åˆ°çŸ¥è¯†è¯…å’’è¿™ä¸ªæ¦‚å¿µåï¼Œè¿™ä¸ªé—®é¢˜å°±æœ‰äº†ç­”æ¡ˆäº†ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºæ•…å®«</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="æœºå™¨å­¦ä¹ " scheme="https://xv44586.github.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æ–‡æ¡£æŸ¥é‡ä¹‹SimHashç®—æ³•</title>
    <link href="https://xv44586.github.io/2019/10/26/simhash/"/>
    <id>https://xv44586.github.io/2019/10/26/simhash/</id>
    <published>2019-10-26T02:13:06.000Z</published>
    <updated>2019-10-26T02:31:56.413Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#simhash">SimHash</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="simhash">SimHash</span><a href="#simhash" class="header-anchor"></a></h1><p>ä¸åŒç½‘ç«™é—´ç›¸äº’è½¬è½½å†…å®¹çš„æƒ…å†µéå¸¸å¸¸è§ï¼Œå³ä½¿åŒä¸€ç½‘ç«™ï¼Œä¸åŒçš„URLåœ°å€ä¹Ÿå¯èƒ½å¯¹åº”ç›¸åŒå†…å®¹ï¼Œåªæ˜¯ä»¥ä¸åŒçš„å½¢å¼æ˜¾ç¤ºå‡ºæ¥ï¼ˆä¸åŒçš„UIï¼‰ï¼Œè€Œæˆ‘ä»¬åœ¨çˆ¬å–å¤§é‡å†…å®¹æ—¶ï¼Œé™¤äº†é URLå»é‡å¤–ï¼Œè¿˜éœ€æŒ‰æ–‡æ¡£å†…å®¹æ’é‡<br>æŒ‡çº¹å¯ä»¥åˆ¤æ–­äººçš„èº«ä»½ï¼Œæ¯”å¦‚ä¾¦æ¢æŠŠä»çŠ¯ç½ªç°åœºé‡‡é›†çš„æŒ‡çº¹ä¸æŒ‡çº¹åº“ä¸­çš„æŒ‡çº¹åšä¸ªå¯¹æ¯”ï¼Œå°±èƒ½ç¡®å®šçŠ¯ç½ªå«Œç–‘äººçš„èº«ä»½ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ–‡æ¡£çš„è¯­ä¹‰æŒ‡çº¹æ¥ä»£è¡¨æ–‡æ¡£çš„è¯­ä¹‰ï¼Œå¦‚é‡‡ç”¨ä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„æ¥ä»£è¡¨ã€‚ä»è€Œåˆ¤æ–­æ–‡æ¡£ä¹‹é—´çš„ç›¸ä¼¼æ€§è½¬åŒ–ä¸ºåˆ¤æ–­ä¸¤ä¸ªè¯­ä¹‰æŒ‡çº¹ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚<br>SimHashæ˜¯Googleåœ¨2007å¹´å‘è¡¨çš„è®ºæ–‡ã€ŠDetecting Near-Duplicates for Web Crawling ã€‹ä¸­æåˆ°çš„ä¸€ç§æŒ‡çº¹ç”Ÿæˆç®—æ³•æˆ–è€…å«æŒ‡çº¹æå–ç®—æ³•ï¼Œè¢«Googleå¹¿æ³›åº”ç”¨åœ¨äº¿çº§çš„ç½‘é¡µå»é‡çš„Jobä¸­ï¼Œä½œä¸ºlocality sensitive hashï¼ˆå±€éƒ¨æ•æ„Ÿå“ˆå¸Œï¼‰çš„ä¸€ç§ï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯é™ç»´ï¼Œå³å°†ä¸€ç¯‡è‹¥å¹²æ•°é‡çš„æ–‡æœ¬å†…å®¹ç”¨ä¸€ä¸ªé•¿åº¦è¾ƒçŸ­çš„æ•°ç»„æ¥è¡¨ç¤ºï¼Œè€Œè¿™ä¸ªæ•°ç»„ä¸è¿™ç¯‡æ–‡æ¡£çš„ä¸»è¦çš„ç‰¹å¾æ‰€å¯¹åº”ã€‚å¦‚åœ¨æ²¡æœ‰çŠ¯ç½ªå«Œç–‘äººçš„èº«ä»½è¯å’ŒæŒ‡çº¹æ—¶ï¼Œä¸€ä¸ªäººçš„ç‰¹å¾æœ‰æ— æ•°å¤šä¸ªï¼Œè€Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæŸ¥çŠ¯ç½ªå«Œç–‘äººçš„å§“åï¼Œæ€§åˆ«ï¼Œå‡ºç”Ÿæ—¥æœŸï¼Œèº«é«˜ï¼Œä½“é‡ï¼Œå½“å¤©ç©¿çš„è¡£æœï¼Œå¤–è²Œç­‰ä¸€äº›ä¸»è¦ç‰¹å¾æ¥ç”„åˆ«å«Œç–‘äººçš„èº«ä»½ã€‚simhashä¹Ÿæ˜¯å°†å¤æ‚çš„ç‰¹å¾ï¼Œé™ç»´æ¥ç®€åŒ–ã€‚<br>SimHashè®¡ç®—è¿‡ç¨‹ï¼š<br><img src="/2019/10/26/simhash/sim.png" alt="simhashè®¡ç®—æµç¨‹"></p><ul><li>1.å¯¹æ–‡æ¡£æå–ç‰¹å¾åŠç‰¹å¾å¯¹åº”çš„æƒé‡</li><li>2.å¯¹ç‰¹å¾è¿›è¡Œhashï¼Œç”Ÿæˆå¯¹åº”çš„hashå€¼</li><li>3.hashå€¼åŠ æƒï¼šå¯¹ç‰¹å¾hashå€¼çš„æ¯ä¸€ä½åšå¾ªç¯å¤„ç†ï¼šå¦‚æœè¯¥ä½å€¼ä¸º1ï¼Œåˆ™ç”¨weightä»£æ›¿ï¼Œå¦åˆ™ï¼Œç”¨-weightä»£æ›¿</li><li>4.æ±‚å’Œï¼šå°†ç‰¹å¾hashåŠ æƒåçš„ç»“æœï¼ŒæŒ‰ä½æ±‚å’Œï¼Œç„¶åå°†ç»“æœæŒ‰ä½äºŒå€¼åŒ–ï¼šå¤§äº0åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0ï¼Œå³å¾—åˆ°æœ€åçš„SimHashå€¼ã€‚</li></ul><p>SimHashçš„è®¡ç®—ä¾æ®æ˜¯è¦æ¯”è¾ƒçš„å¯¹è±¡çš„ç‰¹å¾ï¼Œå¯¹äºç»“æ„åŒ–çš„è®°å½•ï¼Œå¯ä»¥æŒ‰åˆ—æå–ç‰¹å¾ï¼›å¯¹äºéç»“æ„åŒ–çš„æ–‡æ¡£ï¼Œç‰¹å¾å¯ä»¥ç”¨å…¨æ–‡æå–topkå…³é”®è¯ã€æ ‡é¢˜ã€æœ€é•¿çš„å‡ å¥è¯ã€æ¯æ®µçš„é¦–å¥ã€å°¾å¥ç­‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jieba.analyse <span class="keyword">as</span> analyse</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimHash</span><span class="params">(object)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, content, topK=<span class="number">50</span>)</span>:</span></span><br><span class="line"></span><br><span class="line">        self.topK = topK</span><br><span class="line"></span><br><span class="line">        self.simhash = self.getSimHash(content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getSimHash</span><span class="params">(self, content)</span>:</span></span><br><span class="line"></span><br><span class="line">        seg = jieba.cut(content)</span><br><span class="line"></span><br><span class="line"><span class="comment">#        jieba.analyse.set_stop_words('stopword.txt')</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#topk words and it's tf/idf</span></span><br><span class="line"></span><br><span class="line">        keyWords = jieba.analyse.extract_tags(</span><br><span class="line"></span><br><span class="line">            <span class="string">'|'</span>.join(seg), topK=self.topK, withWeight=<span class="literal">True</span>, allowPOS=())</span><br><span class="line"></span><br><span class="line"><span class="comment">#        print(keyWords)</span></span><br><span class="line"></span><br><span class="line">        word_list = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> feature, weight <span class="keyword">in</span> keyWords:</span><br><span class="line"></span><br><span class="line">            feature = self.string_hash(feature)</span><br><span class="line"></span><br><span class="line">            temp = []</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> feature:</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> i == <span class="string">'1'</span>:</span><br><span class="line"></span><br><span class="line">                    temp.append(weight)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">                    temp.append(-weight)</span><br><span class="line"></span><br><span class="line">            word_list.append(temp)</span><br><span class="line"></span><br><span class="line">        hashSum = np.sum(np.array(word_list), axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        simhash = <span class="string">''</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> code <span class="keyword">in</span> hashSum:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> code &gt; <span class="number">0</span>:</span><br><span class="line"></span><br><span class="line">                simhash += <span class="string">'1'</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">                simhash += <span class="string">'0'</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> simhash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">string_hash</span><span class="params">(self,source)</span>:</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> source == <span class="string">""</span>:</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line"></span><br><span class="line">            x = ord(source[<span class="number">0</span>]) &lt;&lt; <span class="number">7</span></span><br><span class="line"></span><br><span class="line">            m = <span class="number">1000003</span></span><br><span class="line"></span><br><span class="line">            mask = <span class="number">2</span> ** <span class="number">128</span> - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> c <span class="keyword">in</span> source:</span><br><span class="line"></span><br><span class="line">                x = ((x * m) ^ ord(c)) &amp; mask</span><br><span class="line"></span><br><span class="line">            x ^= len(source)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> x == <span class="number">-1</span>:</span><br><span class="line"></span><br><span class="line">                x = <span class="number">-2</span></span><br><span class="line"></span><br><span class="line">            x = bin(x).replace(<span class="string">'0b'</span>, <span class="string">''</span>).zfill(<span class="number">64</span>)[<span class="number">-64</span>:]</span><br><span class="line"></span><br><span class="line"><span class="comment">#            print(source,x)</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><p><strong>æµ·æ˜è·ç¦»</strong></p><p>å¾—åˆ°æ–‡æ¡£çš„SimHashå€¼åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åˆ¤æ–­ä¸¤ä¸ªæ–‡æ¡£æ˜¯å¦ç›¸ä¼¼ã€‚å¯¹ç›¸åŒé•¿åº¦çš„æ•°å­—åºåˆ—ï¼Œæˆ‘ä»¬é‡‡ç”¨æµ·æ˜è·ç¦»æ¥è¡¡é‡å…¶ç›¸ä¼¼æ€§ã€‚æµ·æ˜è·ç¦»æ˜¯æŒ‡ä¸¤ä¸ªç å­—å¯¹åº”æ¯”ç‰¹ä½ï¼ˆæ•°å­—åºåˆ—å¯¹åº”ä½ç½®ï¼‰ä¸åŒçš„æ¯”ç‰¹ä½ä¸ªæ•°ã€‚å¦‚1011101å’Œ1001001çš„ç¬¬ä¸‰ä½å’Œç¬¬äº”ä½æœ‰å·®åˆ«ï¼Œæ‰€ä»¥å¯¹åº”çš„æµ·æ˜è·ç¦»ä¸º2ã€‚<br>è®¡ç®—ä¸¤ä¸ªæ•°çš„æµ·æ˜è·ç¦»æ—¶ï¼Œæˆ‘ä»¬å…ˆæŠŠä¸¤ä¸ªæ•°æŒ‰ä½å¼‚æˆ–ï¼ˆXORï¼‰ï¼Œç„¶åè®¡ç®—ç»“æœä¸­1çš„ä¸ªæ•°ï¼Œç»“æœå°±æ˜¯æµ·æ˜è·ç¦»ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hamDis</span><span class="params">(l1, l2)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¼‚æˆ–</span></span><br><span class="line"></span><br><span class="line">    lxor = int(l1,<span class="number">2</span>) ^ int(l2,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    c = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#è®¡ç®—å¼‚æˆ–ç»“æœ1çš„ä¸ªæ•°</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(lxor):</span><br><span class="line"></span><br><span class="line">        lxor &amp;= lxor<span class="number">-1</span></span><br><span class="line"></span><br><span class="line">        c += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> c</span><br></pre></td></tr></table></figure><p>æŠŠæ–‡æ¡£è½¬åŒ–æˆSimHashåï¼Œæ–‡æ¡£çš„æ’é‡å°±å˜æˆäº†æµ·æ˜è·ç¦»è®¡ç®—é—®é¢˜ï¼šç»™å‡ºä¸€ä¸ªfä½çš„è¯­ä¹‰æŒ‡çº¹é›†åˆFå’Œä¸€ä¸ªè¯­ä¹‰æŒ‡çº¹fgï¼Œæ‰¾å‡ºFä¸­æ˜¯å¦å­˜åœ¨ä¸fgåªæœ‰kä½å·®å¼‚çš„è¯­ä¹‰æŒ‡çº¹ã€‚<br>å½“kå€¼å¾ˆå°è€Œè¦æ‰¾çš„è¯­ä¹‰æŒ‡çº¹é›†åˆä¸­çš„å…ƒç´ ä¸å¤šæ—¶ï¼Œå¯ä»¥ç”¨é€æ¬¡æ¢æŸ¥æ³•ï¼šå…ˆæŠŠæ‰€æœ‰å’Œå½“å‰æŒ‡çº¹å·®kä½çš„æŒ‡çº¹æ‰©å±•å‡ºæ¥ï¼Œç„¶åç”¨æŠ˜åŠæŸ¥æ‰¾æ³•åœ¨æ’å¥½åºçš„æŒ‡çº¹é›†åˆä¸­æŸ¥æ‰¾ï¼›<br>å¦‚æœæ˜¯é¢å¯¹çš„æ˜¯æµ·é‡çš„æ•°æ®ï¼Œä¸”åŠ¨æ€çš„å¢åŠ ï¼Œé€æ¬¡æ¢æŸ¥æ³•çš„æ•ˆç‡å°†è¶Šæ¥è¶Šæ…¢ã€‚å½“kå€¼è¾ƒå°ï¼Œå¦‚ä¸å¤§äº3æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ç§å¿«é€Ÿæ–¹æ³•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†64ä½åˆ†æˆ4ä»½ï¼Œå½“kä¸º3æ—¶ï¼Œåˆ™æœ‰ä¸€ä»½ä¸­ä¸¤è€…ç›¸ç­‰ã€‚<br><img src="/2019/10/26/simhash/match.png" alt><br>æ‰€ä»¥æˆ‘ä»¬åœ¨å­˜å‚¨æ—¶ï¼Œå°†æ•°æ®æ‰©å±•ä¸º4ä»½ï¼Œæ¯ä»½ä»¥å…¶ä¸­16ä½ä¸ºkï¼Œå‰©ä½™çš„éƒ¨åˆ†ä¸ºvï¼ŒæŸ¥æ‰¾æ—¶ç²¾ç¡®åŒ¹é…è¿™16ä½ã€‚<br><img src="/2019/10/26/simhash/search.png" alt><br>é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äºä¸€ä¸ªå·²ç»æ’åºçš„å®¹é‡ä¸º$2^d$çš„fä½æŒ‡çº¹é›†åˆï¼Œç”±äºæŒ‡çº¹é›†åˆä¸­æœ‰å¾ˆå¤šçš„ä½ç»„åˆå­˜åœ¨ï¼Œæ‰€ä»¥é«˜dä½åªæœ‰å°‘é‡é‡å¤å­˜åœ¨ï¼Œæ‰€ä»¥åœ¨æœç´¢æ—¶ï¼Œä¹Ÿå¯ä»¥æ‰¾å‡ºé«˜dä½ä¸å½“å‰æŒ‡çº¹ç›¸åŒçš„é›†åˆfâ€˜ï¼Œç¼©å°æŸ¥æ‰¾ä»½èŒƒå›´ã€‚</p><p>Simhashç®—æ³•å¯¹é•¿æ–‡æœ¬500å­—+æ¯”è¾ƒé€‚ç”¨ï¼ŒçŸ­æ–‡æœ¬å¯èƒ½åå·®è¾ƒå¤§ï¼Œæœ€åä½¿ç”¨æµ·æ˜è·ç¦»ï¼Œæ±‚ç›¸ä¼¼ï¼Œåœ¨googleçš„è®ºæ–‡ç»™å‡ºçš„æ•°æ®ä¸­ï¼Œ64ä½çš„ç­¾åï¼Œåœ¨æµ·æ˜è·ç¦»ä¸º3çš„æƒ…å†µä¸‹ï¼Œå¯è®¤ä¸ºä¸¤ç¯‡æ–‡æ¡£æ˜¯ç›¸ä¼¼çš„æˆ–è€…æ˜¯é‡å¤çš„ï¼Œå½“ç„¶è¿™ä¸ªå€¼åªæ˜¯å‚è€ƒå€¼ï¼Œé’ˆå¯¹è‡ªå·±çš„åº”ç”¨å¯ä»¥è‡ªæµ‹å–å€¼ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºæ²³å—è€å®¶å†¬é›ª</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>åˆ†è¯ç®—æ³•ç»¼è¿°</title>
    <link href="https://xv44586.github.io/2019/10/22/cutwords/"/>
    <id>https://xv44586.github.io/2019/10/22/cutwords/</id>
    <published>2019-10-22T14:06:05.000Z</published>
    <updated>2019-10-23T00:57:58.725Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#fen-ci-xian-zhuang">åˆ†è¯ç°çŠ¶</a></li><li><a href="#ji-yu-ci-dian-de-fen-ci">åŸºäºè¯å…¸çš„åˆ†è¯</a><ul><li><a href="#zui-da-pi-pei-fen-ci-suan-fa">æœ€å¤§åŒ¹é…åˆ†è¯ç®—æ³•</a></li><li><a href="#zui-duan-lu-jing-fen-ci-suan-fa">æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•</a><ul><li><a href="#dijkstra-suan-fa">Dijkstraç®—æ³•</a></li></ul></li><li><a href="#n-zui-duan-lu-jing-fen-ci-suan-fa">N-æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•</a></li><li><a href="#ji-yu-n-gram-model-de-fen-ci-suan-fa">åŸºäºn-gram modelçš„åˆ†è¯ç®—æ³•</a></li></ul></li><li><a href="#ji-yu-zi-de-fen-ci">åŸºäºå­—çš„åˆ†è¯</a><ul><li><a href="#hmm-mo-xing">HMMæ¨¡å‹</a><ul><li><a href="#wei-te-bi-suan-fa">ç»´ç‰¹æ¯”ç®—æ³•</a></li></ul></li><li><a href="#crf">CRF</a><ul><li><a href="#hmm-yu-crf-de-guan-xi-shi-shi-me">HMMä¸CRFçš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</a></li><li><a href="#wei-te-bi-suan-fa-yu-liang-zhe-hmm-crf-de-guan-xi-shi-shi-me">ç»´ç‰¹æ¯”ç®—æ³•ä¸ä¸¤è€…ï¼ˆHMM/CRFï¼‰çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</a></li></ul></li><li><a href="#shen-jing-wang-luo-fen-ci-suan-fa">ç¥ç»ç½‘ç»œåˆ†è¯ç®—æ³•</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="fen-ci-xian-zhuang">åˆ†è¯ç°çŠ¶</span><a href="#fen-ci-xian-zhuang" class="header-anchor"></a></h1><p>NLPçš„åº•å±‚ä»»åŠ¡ç”±æ˜“åˆ°éš¾å¤§è‡´å¯ä»¥åˆ†ä¸ºè¯æ³•åˆ†æã€å¥æ³•åˆ†æå’Œè¯­ä¹‰åˆ†æã€‚åˆ†è¯æ˜¯è¯æ³•åˆ†æï¼ˆè¿˜åŒ…æ‹¬è¯æ€§æ ‡æ³¨å’Œå‘½åå®ä½“è¯†åˆ«ï¼‰ä¸­æœ€åŸºæœ¬çš„ä»»åŠ¡ï¼Œå¯ä»¥è¯´æ—¢ç®€å•åˆå¤æ‚ã€‚è¯´ç®€å•æ˜¯å› ä¸ºåˆ†è¯çš„ç®—æ³•ç ”ç©¶å·²ç»å¾ˆæˆç†Ÿäº†ï¼Œå¤§éƒ¨åˆ†çš„å‡†ç¡®ç‡éƒ½å¯ä»¥è¾¾åˆ°95%ä»¥ä¸Šï¼Œè¯´å¤æ‚æ˜¯å› ä¸ºå‰©ä¸‹çš„5%å¾ˆéš¾æœ‰çªç ´ï¼Œä¸»è¦å› ä¸ºä¸‰ç‚¹ï¼š</p><ul><li><ol><li>ç²’åº¦ï¼Œä¸åŒåº”ç”¨å¯¹ç²’åº¦çš„è¦æ±‚ä¸ä¸€æ ·ï¼Œæ¯”å¦‚â€œè‹¹æœæ‰‹æœºâ€å¯ä»¥æ˜¯ä¸€ä¸ªè¯ä¹Ÿå¯ä»¥æ˜¯ä¸¤ä¸ªè¯ã€‚</li></ol></li><li><ol start="2"><li>æ­§ä¹‰ï¼Œæ¯”å¦‚â€œä¸‹é›¨å¤©ç•™äººå¤©ç•™æˆ‘ä¸ç•™â€ã€‚</li></ol></li><li><ol start="3"><li>æœªç™»å½•è¯ï¼Œæ¯”å¦‚â€œskrrrâ€ã€â€œæ‰“callâ€ç­‰æ–°å…´è¯è¯­ã€‚<br>åˆ†è¯ç®—æ³•æ ¹æ®å…¶æ ¸å¿ƒæ€æƒ³ä¸»è¦åˆ†ä¸ºä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯åŸºäºå­—å…¸çš„åˆ†è¯ï¼Œå…ˆæŠŠå¥å­æŒ‰ç…§å­—å…¸åˆ‡åˆ†æˆè¯ï¼Œå†å¯»æ‰¾è¯çš„æœ€ä½³ç»„åˆæ–¹å¼ï¼›ç¬¬äºŒç§æ˜¯åŸºäºå­—çš„åˆ†è¯ï¼Œå³ç”±å­—æ„è¯ï¼Œå…ˆæŠŠå¥å­åˆ†æˆä¸€ä¸ªä¸ªå­—ï¼Œå†å°†å­—ç»„åˆæˆè¯ï¼Œå¯»æ‰¾æœ€ä¼˜çš„åˆ‡åˆ†ç­–ç•¥ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥è½¬åŒ–æˆåºåˆ—æ ‡æ³¨é—®é¢˜ã€‚å½’æ ¹ç»“åº•ï¼Œä¸Šè¿°ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥å½’ç»“ä¸ºåœ¨å›¾æˆ–è€…æ¦‚ç‡å›¾ä¸Šå¯»æ‰¾æœ€çŸ­è·¯å¾„çš„é—®é¢˜ã€‚</li></ol></li></ul><h1><span id="ji-yu-ci-dian-de-fen-ci">åŸºäºè¯å…¸çš„åˆ†è¯</span><a href="#ji-yu-ci-dian-de-fen-ci" class="header-anchor"></a></h1><h2><span id="zui-da-pi-pei-fen-ci-suan-fa">æœ€å¤§åŒ¹é…åˆ†è¯ç®—æ³•</span><a href="#zui-da-pi-pei-fen-ci-suan-fa" class="header-anchor"></a></h2><p>æœ€å¤§åŒ¹é…åˆ†è¯å¯»æ‰¾æœ€ä¼˜ç»„åˆçš„æ–¹å¼æ˜¯å°†åŒ¹é…åˆ°çš„æœ€é•¿è¯ç»„åˆåœ¨ä¸€èµ·ã€‚ä¸»è¦çš„æ€è·¯æ˜¯å…ˆå°†è¯å…¸æ„é€ æˆä¸€æ£µTrieæ ‘ï¼Œä¹Ÿç§°ä¸ºå­—å…¸æ ‘ã€‚<br><img src="/2019/10/22/cutwords/max.jpeg" alt="image.jpeg"> </p><p>Trieæ ‘ç”±è¯çš„å…¬å…±å‰ç¼€æ„æˆèŠ‚ç‚¹ï¼Œé™ä½å­˜å‚¨ç©ºé—´åŒæ—¶æå‡æŸ¥æ‰¾æ•ˆç‡ã€‚æœ€å¤§åŒ¹é…åˆ†è¯å°†å¥å­ä¸Trieæ ‘è¿›è¡ŒåŒ¹é…ï¼Œåœ¨åŒ¹é…åˆ°æ ¹èŠ‚ç‚¹åç”±ä¸‹ä¸€ä¸ªå­—é‡æ–°å¼€å§‹æŸ¥æ‰¾ã€‚æœ€å¤§åŒ¹é…åˆåˆ†ä¸ºå‰å‘åŒ¹é…å’Œåå‘åŒ¹é…ç®—æ³•ï¼Œå¦‚ä¸Šå›¾ä¸­ï¼Œå¯¹è¯­å¥â€œä»–è¯´çš„ç¡®å®åœ¨ç†â€ï¼Œå‰å‘æœ€å¤§åŒ¹é…çš„ç»“æœâ€œä»–/è¯´/çš„ç¡®/å®åœ¨/ç†ï¼Œè€Œåå‘æœ€å¤§åŒ¹é…ç»“æœâ€ä»–/è¯´/çš„/ç¡®å®/åœ¨ç†â€œã€‚é€šè¿‡è¯å…¸æœ€å¤§åŒ¹é…æ—¶é—´æ•ˆç‡è™½ç„¶é«˜ï¼Œä½†æ˜¯æ•ˆæœå¾ˆå·®ï¼Œå®é™…ä¸€èˆ¬å¾ˆå°‘ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚</p><h2><span id="zui-duan-lu-jing-fen-ci-suan-fa">æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•</span><a href="#zui-duan-lu-jing-fen-ci-suan-fa" class="header-anchor"></a></h2><p>æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•é¦–å…ˆå°†ä¸€å¥è¯ä¸­çš„æ‰€æœ‰è¯åŒ¹é…å‡ºæ¥ï¼ˆåŸºäºè¯å…¸ï¼‰ï¼Œæ„æˆè¯å›¾ï¼ˆæœ‰å‘æ— ç¯å›¾DAGï¼‰ï¼Œç„¶åå¯»æ‰¾ä»èµ·å§‹ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·¯å¾„ä½œä¸ºæœ€ä½³ç»„åˆæ–¹å¼ã€‚<br><img src="/2019/10/22/cutwords/min.jpeg" alt="image.jpeg"> </p><p>å›¾ä¸­æ‰€æœ‰è¯çš„æƒé‡éƒ½æ˜¯ç›¸ç­‰çš„ï¼Œæ‰€ä»¥æ¯æ¡è¾¹çš„æƒé‡éƒ½æ˜¯1.<br>DAGå›¾çš„æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå¯ä»¥æè¿°ä¸º åœ¨æ— å‘å›¾ $G=(V,E)$ ä¸­ï¼Œå‡è®¾æ¯æ¡è¾¹ $E[i]$ çš„é•¿åº¦ä¸º $w[i]$ï¼Œæ‰¾åˆ°ç”±é¡¶ç‚¹ V0 åˆ°å…¶ä½™å„ç‚¹çš„æœ€çŸ­è·¯å¾„ï¼ˆå•æºæœ€çŸ­è·¯å¾„ï¼‰ã€‚å‡è®¾æºç‚¹ä¸ºSï¼ŒèŠ‚ç‚¹é›†åˆä¸ºVï¼Œç»ˆç‚¹ä¸ºEã€‚å¯¹äºæœ€çŸ­è·¯å¾„P(S,E)ä¸­çš„ä¸­é—´èŠ‚ç‚¹ï¼Œå…¶æºç‚¹åˆ°å…¶çš„æœ€çŸ­è·¯å¾„ä¹Ÿåœ¨Pï¼ˆSEï¼‰å†…ã€‚å³ï¼šå‡å¦‚S-&gt;A-&gt;B-&gt;C-&gt;Eæ˜¯æœ€çŸ­è·¯å¾„ï¼Œé‚£S-&gt;A-&gt;Bä¸€å®šæ˜¯Såˆ°Bçš„æœ€çŸ­è·¯å¾„ï¼Œå¦åˆ™ï¼Œå°†ä¼šå­˜åœ¨ä¸€ç‚¹Fï¼Œä½¿å¾—d(S-&gt;F-&gt;B)&lt;d(S-&gt;A-&gt;B),è€Œæœ€çŸ­è·¯å¾„P1(S,E)=S-&gt;F-&gt;B-&gt;C-&gt;Eå°†æ¯”P(S,E)çŸ­ï¼Œä»è€Œä¸å‡è®¾çŸ›ç›¾ã€‚å› æ­¤ï¼Œæ±‚è§£DAGå¯ä»¥åˆ©ç”¨æœ€ä¼˜å­ç»“æ„ï¼Œé€šè¿‡è´ªå¿ƒæˆ–è€…åŠ¨æ€è§„åˆ’æ¥æ±‚è§£ã€‚</p><h3><span id="dijkstra-suan-fa">Dijkstraç®—æ³•</span><a href="#dijkstra-suan-fa" class="header-anchor"></a></h3><p>Dijkstraç®—æ³•æœ¬è´¨æ˜¯è´ªå¿ƒç®—æ³•ï¼Œæ¯ä¸€æ­¥æ±‚è§£æœ€çŸ­è·¯å¾„èŠ‚ç‚¹ï¼Œç„¶åé€’æ¨æ›´æ–°æºèŠ‚ç‚¹åˆ°å…¶ä»–èŠ‚ç‚¹çš„è·ç¦»ã€‚<br>ç®—æ³•æ­¥éª¤ï¼š</p><ul><li>a.åˆå§‹æ—¶ï¼ŒSåªåŒ…å«æºç‚¹ï¼Œå³Sï¼{v}ï¼Œvçš„è·ç¦»ä¸º0ã€‚UåŒ…å«é™¤vå¤–çš„å…¶ä»–é¡¶ç‚¹ï¼Œå³:U={å…¶ä½™é¡¶ç‚¹}ï¼Œè‹¥vä¸Uä¸­é¡¶ç‚¹uæœ‰è¾¹ï¼Œåˆ™&lt;u,v&gt;æ­£å¸¸æœ‰æƒå€¼ï¼Œè‹¥uä¸æ˜¯vçš„å‡ºè¾¹é‚»æ¥ç‚¹ï¼Œåˆ™&lt;u,v&gt;æƒå€¼ä¸ºâˆã€‚</li><li>b.ä»Uä¸­é€‰å–ä¸€ä¸ªè·ç¦»væœ€å°çš„é¡¶ç‚¹kï¼ŒæŠŠkï¼ŒåŠ å…¥Sä¸­ï¼ˆè¯¥é€‰å®šçš„è·ç¦»å°±æ˜¯våˆ°kçš„æœ€çŸ­è·¯å¾„é•¿åº¦ï¼‰ã€‚</li><li>c.ä»¥kä¸ºæ–°è€ƒè™‘çš„ä¸­é—´ç‚¹ï¼Œä¿®æ”¹Uä¸­å„é¡¶ç‚¹çš„è·ç¦»ï¼›è‹¥ä»æºç‚¹våˆ°é¡¶ç‚¹uçš„è·ç¦»ï¼ˆç»è¿‡é¡¶ç‚¹kï¼‰æ¯”åŸæ¥è·ç¦»ï¼ˆä¸ç»è¿‡é¡¶ç‚¹kï¼‰çŸ­ï¼Œåˆ™ä¿®æ”¹é¡¶ç‚¹uçš„è·ç¦»å€¼ï¼Œä¿®æ”¹åçš„è·ç¦»å€¼çš„é¡¶ç‚¹kçš„è·ç¦»åŠ ä¸Šè¾¹ä¸Šçš„æƒã€‚</li><li>d.é‡å¤æ­¥éª¤bå’Œcç›´åˆ°æ‰€æœ‰é¡¶ç‚¹éƒ½åŒ…å«åœ¨Sä¸­ã€‚<br><img src="/2019/10/22/cutwords/dij.gif" alt="image.gif"> </li></ul><p>Dijkstraç®—æ³•çš„ç»“æœä¸ºâ€ä»–/è¯´/çš„/ç¡®å®/åœ¨ç†â€œï¼Œå¯è§æœ€çŸ­è·¯å¾„åˆ†è¯å¯ä»¥è§£å†³å¤§éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯å½“æœ€çŸ­è·¯å¾„å­˜åœ¨å¤šæ¡æ—¶ï¼ŒDijkstraåªä¿å­˜ä¸€æ¡ï¼Œè¿™ç§ç­–ç•¥å³ç¼ºä¹ç†è®ºä¾æ®ä¹Ÿå¯¹å…¶ä»–è·¯å¾„ä¸å…¬å¹³ã€‚</p><h2><span id="n-zui-duan-lu-jing-fen-ci-suan-fa">N-æœ€çŸ­è·¯å¾„åˆ†è¯ç®—æ³•</span><a href="#n-zui-duan-lu-jing-fen-ci-suan-fa" class="header-anchor"></a></h2><p>N-æœ€çŸ­è·¯å¾„åˆ†è¯æ˜¯å¯¹Dijkstraç®—æ³•çš„æ‰©å±•ï¼Œä»–åœ¨æ¯ä¸€æ­¥éƒ½ä¿å­˜æœ€çŸ­çš„Næ¡è·¯å¾„ï¼ˆbeam searchï¼‰ï¼ŒåŒæ—¶è®°å½•å½“å‰èŠ‚ç‚¹çš„å‰é©±ï¼Œæœ€åæ±‚å¾—æœ€ä¼˜è§£æ—¶å›æº¯å¾—åˆ°æœ€çŸ­è·¯å¾„ï¼Œè¯¥ç®—æ³•ç»“æœä¼˜äºDijkstraï¼Œä½†æ˜¯æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦ä¸Šæ›´å¤§ã€‚<br><img src="/2019/10/22/cutwords/nshort.png" alt="image.png"></p><h2><span id="ji-yu-n-gram-model-de-fen-ci-suan-fa">åŸºäºn-gram modelçš„åˆ†è¯ç®—æ³•</span><a href="#ji-yu-n-gram-model-de-fen-ci-suan-fa" class="header-anchor"></a></h2><p>å‰æ–‡ä¸­è¾¹çš„æƒé‡éƒ½æ˜¯1ï¼Œä½†å®é™…ä¸­ä¸åŒçš„è¯å‡ºç°çš„é¢‘ç‡/æ¦‚ç‡ä¸åŒï¼Œå…¶æˆè¯çš„æ¦‚ç‡ä¹Ÿå°±ç›¸åº”ä¸åŒï¼Œå› æ­¤å°†æ±‚è§£è¯å›¾æœ€çŸ­è·¯å¾„çš„é—®é¢˜è½¬åŒ–ä¸ºæ±‚è§£æœ€å¤§æ¦‚ç‡è·¯å¾„é—®é¢˜ã€‚å³å°†å¥å­åˆ‡åˆ†ä¸ºâ€æœ€æœ‰å¯èƒ½çš„è¯çš„ç»„åˆâ€œã€‚è€Œè®¡ç®—è¯å‡ºç°çš„æ¦‚ç‡ï¼Œå°±éœ€è¦è¯­æ–™å¯¹â€è¯­è¨€â€œè¿›è¡Œç»Ÿè®¡å»ºæ¨¡ã€‚<br>è¯­è¨€æ¨¡å‹æ˜¯å¯¹ä¸€å¥è¯å‡ºç°çš„æ¦‚ç‡è¿›è¡Œå»ºæ¨¡ï¼Œæ ¹æ®æ¡ä»¶æ¦‚ç‡ï¼š<br>p(ä»–è¯´çš„ç¡®å®åœ¨ç†) = p(ä»–)p(è¯´|ä»–)p(çš„|ä»–è¯´)â€¦p(ç†|ä»–è¯´çš„ç¡®å®åœ¨)<br>ä¸Šè¿°è®¡ç®—è¿‡äºåºå¤§ï¼Œä¸€èˆ¬æˆ‘ä»¬é‡‡ç”¨n-gramæ¥è¿‘ä¼¼ï¼Œå¦‚2-gramã€‚<br>ç„¶åæˆ‘ä»¬å°†è¯­è¨€æ¨¡å‹å¾—åˆ°çš„æ¦‚ç‡åˆ†å¸ƒåº”ç”¨åˆ°è¯å›¾ï¼Œå¯ä»¥å¾—åˆ°è¯å›¾çš„æ¦‚ç‡å›¾ ï¼š</p><p><img src="/2019/10/22/cutwords/dag.jpeg" alt="image.jpeg"></p><p>åˆ©ç”¨ä¸Šé¢ä¸¤ç§æ±‚è§£DAGæœ€çŸ­è·¯å¾„çš„æ–¹æ³•è¿›è¡Œæ±‚è§£å³å¯ã€‚</p><h1><span id="ji-yu-zi-de-fen-ci">åŸºäºå­—çš„åˆ†è¯</span><a href="#ji-yu-zi-de-fen-ci" class="header-anchor"></a></h1><p>ä¸åŸºäºè¯å…¸çš„åˆ†è¯ä¸åŒï¼ŒåŸºäºå­—çš„åˆ†è¯äº‹å…ˆä¸å¯¹å¥å­è¿›è¡Œè¯åŒ¹é…ï¼Œè€Œæ˜¯å°†åˆ†è¯çœ‹æˆæ˜¯ç»™å¥å­ä¸­çš„æ¯ä¸ªå­—æ‰“ä¸Šæ ‡ç­¾çš„åºåˆ—æ ‡æ³¨é—®é¢˜ï¼Œå¯ä»¥çœ‹æˆæ˜¯å¯¹æ¯ä¸ªå­—çš„åˆ†ç±»é—®é¢˜ã€‚ æ¯”å¦‚é€šè¿‡4æ ‡ç­¾æ¥è¿›è¡Œæ ‡æ³¨ï¼ˆsingleï¼Œå•å­—æˆè¯ï¼›beginï¼Œå¤šå­—è¯çš„å¼€å¤´ï¼›middleï¼Œä¸‰å­—ä»¥ä¸Šè¯è¯­çš„ä¸­é—´éƒ¨åˆ†ï¼›endï¼Œå¤šå­—è¯çš„ç»“å°¾ã€‚å‡åªå–ç¬¬ä¸€ä¸ªå­—æ¯ã€‚ï¼‰ï¼Œè¿™æ ·ï¼Œâ€œä¸ºäººæ°‘æœåŠ¡â€å°±å¯ä»¥æ ‡æ³¨ä¸ºâ€œsbebeâ€äº†ã€‚ 4æ ‡æ³¨ä¸æ˜¯å”¯ä¸€çš„æ ‡æ³¨æ–¹å¼ï¼Œç±»ä¼¼åœ°è¿˜æœ‰6æ ‡æ³¨ï¼Œç†è®ºä¸Šæ¥è¯´ï¼Œæ ‡æ³¨è¶Šå¤šä¼šè¶Šç²¾ç»†ï¼Œç†è®ºä¸Šæ¥è¯´æ•ˆæœä¹Ÿè¶Šå¥½ï¼Œä½†æ ‡æ³¨å¤ªå¤šä¹Ÿå¯èƒ½å­˜åœ¨æ ·æœ¬ä¸è¶³çš„é—®é¢˜ï¼Œä¸€èˆ¬å¸¸ç”¨çš„å°±æ˜¯4æ ‡æ³¨å’Œ6æ ‡æ³¨ã€‚</p><h2><span id="hmm-mo-xing">HMMæ¨¡å‹</span><a href="#hmm-mo-xing" class="header-anchor"></a></h2><p>HMMæ¨¡å‹è®¤ä¸ºåœ¨è§£å†³åºåˆ—æ ‡æ³¨é—®é¢˜æ—¶ï¼Œå­˜åœ¨ä¸¤ç§åºåˆ—ï¼Œä¸€ç§æ˜¯è§‚æµ‹åºåˆ—ï¼Œæ˜¯äººæ˜¾æ€§è§‚å¯Ÿåˆ°çš„å¥å­ï¼Œè€Œæ ‡ç­¾æ˜¯éšçŠ¶æ€åºåˆ—ï¼Œå³è§‚æµ‹çŠ¶æ€ä¸ºXï¼Œéšè—çŠ¶æ€åºåˆ—æ˜¯Yï¼Œå› æœå…³ç³»æ˜¯Y-&gt;X.<br>æˆ‘ä»¬ç”¨Î»=Î»1Î»2â€¦Î»nè¡¨ç¤ºè¾“å…¥çš„å¥å­ï¼Œç”¨o= o1o2â€¦onè¡¨ç¤ºå¯¹åº”çš„labelï¼Œé‚£æœ€ä¼˜çš„è¾“å‡ºæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä»æ¦‚ç‡çš„è§’åº¦ï¼Œæˆ‘ä»¬å¸Œæœ›ä¸‹é¢çš„æ¡ä»¶æ¦‚ç‡æœ€å¤§ï¼š</p><p>$max P(oâˆ£Î»)=max P(o1o2â€¦onâˆ£Î»1Î»2â€¦Î»n)$<br>ä¹Ÿå°±æ˜¯ï¼Œoæœ‰å¾ˆå¤šç§å¯èƒ½ï¼Œä½†æ˜¯æœ€ä¼˜çš„æ˜¯oåº”è¯¥æ˜¯æ¦‚ç‡æœ€å¤§çš„oã€‚è€Œä¸Šå¼çš„æ¦‚ç‡æ˜¯å…³äº2nä¸ªå˜é‡çš„æ¡ä»¶æ¦‚ç‡ï¼Œè€Œä¸”ä¸åŒçš„è¾“å…¥æœ‰ä¸åŒçš„nï¼Œç²¾ç¡®è®¡ç®—åŸºæœ¬ä¸å¤ªå¯èƒ½ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œå…ˆæå‡ºç¬¬ä¸€ä¸ªå‡è®¾ï¼šè¾“å‡ºåªä¸å¯¹åº”çš„è¾“å…¥æœ‰å…³ã€‚äºæ˜¯ï¼Œä¸Šå¼å°±å¯ä»¥ç®€åŒ–ä¸ºï¼š<br>$maxP(oâˆ£Î»)=max P(o1âˆ£Î»1)P(o2âˆ£Î»2)â€¦P(onâˆ£Î»n)$<br>ç°åœ¨ï¼Œä¸Šå¼çš„æ±‚è§£å°±ç®€å•å¤šäº†ï¼Œåªè¦è®©æ¯ä¸ª<strong>P(ok|Î»k)</strong>æœ€å¤§ï¼Œå³å¯å¾—åˆ°æœ€å¤§çš„$P(o|Î»)$.<br>ä¸Šé¢çš„æ–¹æ¡ˆæ˜¯ä¸€ä¸ªç®€åŒ–æ–¹æ¡ˆï¼Œä½†æ˜¯å®Œå…¨æ²¡æœ‰è€ƒè™‘ä¸Šä¸‹æ–‡ï¼Œè¿™æ ·ä¼šå‡ºç°å¾ˆå¤šä¸åˆç†çš„ç»“æœï¼Œæ¯”å¦‚æŒ‰ç…§æˆ‘ä»¬4æ ‡æ³¨æ–¹æ³•ï¼Œbååªèƒ½æ¥mæˆ–è€…eï¼Œè€Œä¸Šè¿°æ–¹æ¡ˆä¸è€ƒè™‘ä¸Šä¸‹æ–‡ï¼Œå°±å¯èƒ½å‡ºç°bb\bsç­‰é”™è¯¯ç»“æœã€‚è¿™äº›éƒ½æ˜¯ä¸åˆç†çš„ç»“æœã€‚è€Œäº§ç”Ÿè¿™ç§ç»“æœçš„åŸå› æ˜¯æˆ‘ä»¬æ²¡æœ‰è€ƒè™‘labelä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ¢ä¸ªè§’åº¦ï¼Œåè¿‡æ¥è€ƒè™‘è¿™ä¸ªé—®é¢˜ã€‚<br>é¦–å…ˆï¼Œåˆ©ç”¨è´å¶æ–¯å…¬å¼ï¼š<br><img src="/2019/10/22/cutwords/bys.png" alt="image.png"></p><p>ç”±äºÎ»æ˜¯ç»™å®šçš„è¾“å…¥ï¼Œé‚£ä¹ˆP(Î»)å°±æ˜¯å¸¸æ•°ï¼Œæˆ‘ä»¬å¿½ç•¥ä»–ã€‚ç°åœ¨ï¼Œæœ€å¤§åŒ–P(o|Î»)~P(o)P(Î»|o).æ­¤æ—¶ï¼Œæˆ‘ä»¬çš„æ¨¡å‹æ˜¯è€ƒè™‘äº†è¾“å‡ºä¹‹é—´çš„å…³ç³»P(o),å°±å¯ä»¥é¿å…ä¸€äº›ä¸åˆç†çš„æƒ…å†µçš„å‡ºç°ã€‚</p><p>$P(o)P(Î»|o)=P(o1o2â€¦on)P(Î»1Î»2â€¦Î»n|o1o2â€¦on)$<br>æ ¹æ®æˆ‘ä»¬ç¬¬ä¸€ä¸ªå‡è®¾ï¼Œæˆ‘ä»¬å¾—åˆ°ï¼š<br>$P(Î»|o)=P(Î»1|o1)P(Î»2|o2)â€¦P(Î»n|on)$<br>å¯¹äº$P(o)$,æœ‰<br>$P(o) = P(o1)P(o2|o1)â€¦P(on|o1o2..on-1)$<br>æ­¤æ—¶ï¼Œæˆ‘ä»¬æå‡ºç¬¬äºŒä¸ªå‡è®¾ï¼šè¾“å‡ºçŠ¶æ€åªä¸å‰ä¸€ä¸ªçŠ¶æ€æœ‰å…³ã€‚<br>$P(o) = P(o1)P(o2|o1)â€¦P(on|on-1)$<br>æ­¤æ—¶ï¼Œ<br>$P(o|Î»)~P(Î»1|o1)P(o2|o1)P(Î»2|o2)P(o3|o2)â€¦P(on|on-1)P(Î»n|on)$<br>å…¶ä¸­ï¼Œ$P(Î»k|ok)$ç§°ä¸ºå‘å°„æ¦‚ç‡ï¼Œ$P(on|on-1)$ç§°ä¸ºè½¬ç§»æ¦‚ç‡ã€‚å¯¹äºä¸åˆç†çš„è¾“å‡ºåºåˆ—ï¼Œå¦‚bbï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®å…¶çŠ¶æ€è½¬ç§»æ¦‚ç‡ä¸º0æ¥é¿å¼€ã€‚<br>æ¥ä¸‹æ¥çš„HMMæ¨¡å‹çš„è®­ç»ƒï¼Œå°±æ˜¯å¦‚ä½•æ±‚è§£å‘å°„æ¦‚ç‡ä¸è½¬ç§»æ¦‚ç‡äº†ã€‚<br>å­¦ä¹ è®­ç»ƒä¸»è¦æœ‰æå¤§ä¼¼ç„¶ä¼°è®¡å’Œ Baum-Welch(å‰å‘åå‘)ä¸¤ç§ç®—æ³•ï¼Œé€šå¸¸ç”¨æå¤§ä¼¼ç„¶ä¼°è®¡ã€‚å¦‚æœæœ‰ä¸€æ‰¹æ ‡æ³¨å¥½çš„è¯­æ–™ï¼Œè¿™ä¿©ä¸ªæ¦‚ç‡çš„ä¼°è®¡å°±éå¸¸ç®€å•äº†ï¼Œä½†é€šå¸¸æˆ‘ä»¬æ²¡æœ‰å¤§æ‰¹æ ‡æ³¨å¥½çš„è¯­æ–™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯å…¸å’Œæœªæ ‡æ³¨çš„è¯­æ–™æ¥ä¼°è®¡ï¼Œå¦‚æœæ²¡æœ‰è¯­æ–™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯å…¸æ¥ä¼°è®¡å‘å°„æ¦‚ç‡ï¼ŒçŠ¶æ€è½¬ç§»æ¦‚ç‡äººä¸ºç»™ä¸€ä¸ªã€‚<br>å¾—åˆ°äº†å‘å°„æ¦‚ç‡å’Œè½¬ç§»æ¦‚ç‡ï¼Œæ­¤æ—¶å°±æ˜¯è®¡ç®—ç»™å®šè¾“å…¥çš„æœ€å¤§æ¦‚ç‡çš„è¾“å‡ºåºåˆ—ã€‚è®¾è¾“å…¥åºåˆ—é•¿åº¦ä¸ºL, çŠ¶æ€ï¼ˆlabel)æœ‰nç§ï¼Œåˆ™æœ‰ $n^L$ç§å¯èƒ½çš„æ’åˆ—æ–¹å¼ï¼Œæ­¤æ—¶è®¡ç®—æœ€å¤§æ¦‚ç‡çš„å¤æ‚åº¦ä¸º$O(Ln^L)$ï¼Œè¿™ä¸ªé‡å¤ªå¤§äº†ï¼Œä¸å¯å–ï¼Œäºæ˜¯ï¼Œç»´ç‰¹æ¯”ç®—æ³•ç™»åœºäº†ã€‚</p><h3><span id="wei-te-bi-suan-fa">ç»´ç‰¹æ¯”ç®—æ³•</span><a href="#wei-te-bi-suan-fa" class="header-anchor"></a></h3><p>ç»´ç‰¹æ¯”ç®—æ³•æ˜¯HMMï¼ŒCRFä¸­çš„ç»å…¸è§£ç ç®—æ³•ï¼Œå…¶æ ¸å¿ƒæ˜¯é€šè¿‡DPæ€æƒ³ï¼Œåœ¨æ¯ä¸ªæ—¶é—´ç‚¹çš„æ¯ä¸ªlabelä¸Šå­˜å‚¨åˆ°è¯¥ä½ç½®çš„æœ€å¤§æ¦‚ç‡ï¼Œå°†è®¡ç®—å¤æ‚åº¦é™ä½ä¸º $O(L^2n)$ã€‚å…¶æµç¨‹å›¾å¦‚ä¸‹:<br><img src="/2019/10/22/cutwords/vtb.jpeg" alt="image.jpeg"></p><p>ç®—æ³•æµå¯èƒ½ä¸å¤Ÿç›´è§‚ï¼Œä¸‹é¢æ¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥æ›´å¥½çš„ç†è§£ã€‚<br><img src="/2019/10/22/cutwords/vtb_demo.gif" alt="image.gif"></p><p>å›¾ä¸­Xæ˜¯è§‚å¯Ÿåºåˆ—ï¼ˆè¾“å…¥åºåˆ—ï¼‰ï¼ŒYæ˜¯æ ‡ç­¾çŸ©é˜µã€‚T1ä¸ºæ¯ä¸ªæ—¶é—´ç‚¹æ¯ä¸ªlabelçš„æœ€å¤§æ¦‚ç‡ï¼Œ</p><p><img src="/2019/10/22/cutwords/ti.png" alt="image.png"></p><p>T2ä¸ºåˆ°è¾¾è¯¥æ—¶é—´ç‚¹è¯¥labelæœ€å¤§æ¦‚ç‡çš„å‰é©±labelï¼ˆä¸Šä¸ªæ—¶é—´ç‚¹ä¸Šï¼‰</p><p><img src="/2019/10/22/cutwords/t2.png" alt="image.png"></p><p>åˆ°è¾¾æœ€åä¸€ä¸ªæ—¶é—´ç‚¹åï¼Œæ±‚è§£æœ€å¤§æ¦‚ç‡å¯¹åº”çš„labelï¼Œç„¶åé€šè¿‡T2å›æº¯ï¼Œå°†å¯¹åº”å‰é©±èŠ‚ç‚¹åŠ å…¥pathç›´åˆ°åˆ°è¾¾èµ·å§‹æ—¶é—´ç‚¹ï¼Œå¾—åˆ°çš„pathå³ä¸ºæœ€ä¼˜è§£çš„é€†åºï¼Œåè½¬å³å¯å¾—åˆ°æœ€ä¼˜è·¯å¾„ï¼ˆæœ€å¤§æ¦‚ç‡çš„è¾“å‡ºæ ‡ç­¾åºåˆ—ï¼‰ã€‚</p><h2><span id="crf">CRF</span><a href="#crf" class="header-anchor"></a></h2><p>CRFå¯ä»¥çœ‹ä½œä¸€ä¸ªæ— å‘å›¾æ¨¡å‹ï¼Œå¯¹äºç»™å®šçš„æ ‡æ³¨åºåˆ—Yå’Œè§‚æµ‹åºåˆ—Xï¼Œå¯¹æ¡ä»¶æ¦‚ç‡P(Y|X)è¿›è¡Œå»ºæ¨¡ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è®¨è®ºä¸€ä¸‹æœ‰å‘å›¾ä¸æ— å‘å›¾æ¦‚ç‡æ¨¡å‹ã€‚</p><p>æœ‰å‘å›¾<br><img src="/2019/10/22/cutwords/dg.png" alt="image.png"> </p><p>ä¸Šå›¾æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æœ‰å‘å›¾ï¼Œä»–ä»¬çš„è”åˆæ¦‚ç‡æ•°å­¦è¡¨ç¤ºä¸ºï¼š<br><img src="/2019/10/22/cutwords/px.png" alt="image.png"> </p><p>æ— å‘å›¾<br><img src="/2019/10/22/cutwords/ug.png" alt="image.png"> </p><p>ä¸Šå›¾æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„æ— å‘å›¾ï¼Œè€Œæ±‚è§£æ—¶ï¼Œéœ€è¦å°†å…¶åˆ†è§£ä¸ºè‹¥å¹²ä¸ªâ€œå°å›¢â€çš„è”åˆæ¦‚ç‡çš„ä¹˜ç§¯ï¼Œè€Œæ¯ä¸ªå°å›¢å¿…é¡»æ˜¯â€œæœ€å¤§å›¢â€ï¼ˆå­å›¾é‡Œä»»æ„ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯ç›¸è¿çš„ï¼Œä¸”æ²¡æœ‰å…¶ä»–èŠ‚ç‚¹èƒ½åŠ å…¥ä½¿ä»–æˆä¸ºè·Ÿå¤§çš„å›¢ï¼‰ï¼Œåˆ™æœ‰ï¼š</p><p><img src="/2019/10/22/cutwords/py.png" alt="image.png"> </p><p>å…¶ä¸­<br><img src="/2019/10/22/cutwords/zx.png" alt><br>ç”¨æ¥å½’ä¸€åŒ–ï¼Œå°†ç»“æœè½¬åŒ–ä¸ºæ¦‚ç‡ã€‚<br>ä¸Šå›¾çš„æ— å‘å›¾çš„è”åˆæ¦‚ç‡è¡¨ç¤ºä¸ºï¼š<br><img src="/2019/10/22/cutwords/pyu.png" alt="image.png"> </p><p>å…¶ä¸­<img src="/2019/10/22/cutwords/c.png" alt="image.png"></p><p>æ˜¯æœ€å¤§å›¢Cä¸Šéšæœºå˜é‡çš„è”åˆæ¦‚ç‡ï¼Œå½¢å¼ä¸€èˆ¬å–æŒ‡æ•°å‡½æ•°ï¼š<br><img src="/2019/10/22/cutwords/yc.png" alt="image.png"> </p><p>ä¸Šå¼ä¹Ÿå«åŠ¿å‡½æ•°ã€‚</p><p>æ— å‘å›¾çš„è”åˆæ¦‚ç‡åˆ†å¸ƒåœ¨å› å­åˆ†è§£ä¸‹è¡¨ç¤ºä¸ºï¼š<br><img src="/2019/10/22/cutwords/pyz.png" alt="image.png"> </p><p>ä¸Šå¼ä¸­åŒ–ç®€ä¸ºå„ä¸ªå›¢çš„è”åˆæ¦‚ç‡çš„ä¹˜ç§¯ç”± Hammersly-Clifford lawä¿è¯ã€‚</p><p>å¹¿ä¹‰çš„CRFçš„å®šä¹‰æ˜¯ï¼š æ»¡è¶³ <img src="/2019/10/22/cutwords/pyc.png" alt><br> çš„é©¬å°”ç§‘å¤«éšæœºåœºå«åšæ¡ä»¶éšæœºåœºï¼ˆCRFï¼‰ï¼Œä¸€èˆ¬æˆ‘ä»¬è¯´çš„æ˜¯çº¿æ€§é“¾æ¡ä»¶éšæœºåœºï¼Œå®šä¹‰ä¸ºï¼š<br>$P(Y|X) = P(Yv|X, Yv-1, Yv+1)$<br>ä¸‹é¢æ¥çœ‹çœ‹æˆ‘ä»¬åœ¨åšåºåˆ—å»ºæ¨¡æ—¶ï¼Œå¯¹åº”çš„å›¾ç»“æ„ã€‚<br><img src="/2019/10/22/cutwords/arc.png" alt="image.png"> </p><p>ä¸Šå›¾æ˜¯ä¸€ä¸ªåºåˆ—å»ºæ¨¡(çº¿æ€§é“¾CRF)æ—¶ï¼Œå¯¹åº”ç»“æ„ç¤ºæ„å›¾ï¼Œä¸ºäº†æ±‚è§£ä¸Šå›¾ä¸­çš„æ¦‚ç‡ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸Šå›¾è¿›è¡Œå› å­åˆ†è§£ï¼Œåˆ†è§£æˆè‹¥å¹²ä¸ªâ€œæœ€å¤§å›¢â€ï¼Œè€Œä¸Šå›¾ç»“æ„ä¸­ï¼Œæ¯ä¸ªâ€œæœ€å¤§å›¢â€éƒ½æ˜¯ç”±ä¸€å¯¹ï¼ˆIi~Oi)ç»„æˆï¼Œå³æ¯ä¸ªâ€œæœ€å¤§å›¢â€Cä¸ä½ç½®Iå¯¹åº”ï¼Œc=iï¼Œè€Œä¸”çº¿æ€§é“¾CRFæ»¡è¶³<br><img src="/2019/10/22/cutwords/pio.png" alt="image.png"><br>ï¼Œæˆ‘ä»¬å¸¦å…¥æ— å‘å›¾çš„è”åˆæ¦‚ç‡åˆ†å¸ƒçš„å› å­åˆ†è§£ï¼Œå¯¹åº”çš„CRFå»ºæ¨¡å…¬å¼ä¸ºï¼š<br><img src="/2019/10/22/cutwords/pioz.png" alt="image.png"> </p><p>å…¬å¼å†…iæ˜¯å¯¹åº”å½“å‰èŠ‚ç‚¹å¯¹åº”ä½ç½®ï¼›kè¡¨ç¤ºç¬¬å‡ ä¸ªç‰¹å¾å‡½æ•°ï¼Œæ¯ä¸ªç‰¹å¾å‡½æ•°å¯¹åº”ä¸€ä¸ªç‰¹å¾æƒé‡Î»k, Z(o)çš„ä½œç”¨æ˜¯å½’ä¸€åŒ–ä¸ºæ¦‚ç‡ã€‚</p><p>å¯¹äºç‰¹å¾å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸¤ç±»ç‰¹å¾å‡½æ•°ï¼šè½¬ç§»ç‰¹å¾å’ŒçŠ¶æ€ç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šå¼å±•å¼€ä¸ºï¼š<br><img src="/2019/10/22/cutwords/unroll.png" alt="image.png"> </p><p>å…¶ä¸­tjä¸ºè½¬ç§»ç‰¹å¾ï¼Œå¯¹åº”æƒé‡ä¸ºÎ»j, slä¸ºçŠ¶æ€ç‰¹å¾ï¼Œå¯¹åº”æƒé‡ä¸ºulã€‚ä¸€èˆ¬æˆ‘ä»¬ä¸åˆ†å¼€çœ‹ï¼Œå°†å¯¹åº”ç‰¹å¾å‡½æ•°ç»Ÿä¸€èµ·æ¥ã€‚</p><p>CRFå­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æå‰å®šä¹‰ç‰¹å¾å‡½æ•°ï¼Œç„¶åæ ¹æ®æ ·æœ¬æ¥å­¦ä¹ å¯¹åº”ç‰¹å¾çš„æƒé‡ï¼Œæ‰€ä»¥CRFä¸­æ¯”è¾ƒå›°éš¾çš„ç‚¹åœ¨äºéœ€è¦å®šä¹‰å¤§é‡çš„ç‰¹å¾å‡½æ•°ï¼Œç‰¹å¾å‡½æ•°çš„è´¨é‡ç›´æ¥å½±å“æœ€åçš„æ¨¡å‹è´¨é‡ã€‚<br>ä¸‹é¢å€Ÿä¸€ä¸ªåˆ—å­ï¼ˆCRF++ï¼‰æ¥è¯´æ˜ä¸€ä¸‹ï¼š<br>é¦–å…ˆï¼Œæˆ‘ä»¬ä¼šå®šä¹‰ç›¸åº”çš„æ ‡ç­¾æ•°æ®ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"tags"</span>: [</span><br><span class="line"><span class="string">"B"</span>,</span><br><span class="line"><span class="string">"E"</span>,</span><br><span class="line"><span class="string">"M"</span>,</span><br><span class="line"><span class="string">"O"</span>,</span><br><span class="line"><span class="string">"S"</span>]</span><br></pre></td></tr></table></figure></p><p>ç„¶åæˆ‘ä»¬ä¼šå®šä¹‰ç‰¹å¾æ¨¡ç‰ˆï¼Œé€šè¿‡ç‰¹å¾æ¨¡ç‰ˆï¼Œä¼šå¸®åŠ©æˆ‘ä»¬äº§ç”Ÿç›¸åº”çš„ç‰¹å¾å‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Unigram</span><br><span class="line">U00:%x[-2,0]</span><br><span class="line">U01:%x[-1,0]</span><br><span class="line">U02:%x[0,0]</span><br><span class="line">U03:%x[1,0]</span><br><span class="line">U04:%x[2,0]</span><br><span class="line">U05:%x[-1,0]/%x[0,0]</span><br><span class="line">U06:%x[0,0]/%x[1,0]</span><br><span class="line"># Bigram</span><br><span class="line">B</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†7ä¸ªUç³»åˆ—æ¨¡æ¿ï¼ˆUnigramï¼‰å’Œä¸€ä¸ªBç³»åˆ—ï¼ˆBigramï¼‰æ¨¡æ¿ï¼Œå…¶ä¸­U00:%x[-2,0]ä»£è¡¨Uç³»åˆ—ï¼Œç´¢å¼•ä¸º00ï¼Œå¯¹åº”ç‰¹å¾æ˜¯å½“å‰ä½ç½®çš„å·¦ä¾§ç¬¬äºŒä¸ªä½ç½®(-2)tokenå’Œå½“å‰ä½ç½®çš„tokenï¼Œæœ€åçš„Bä»£è¡¨åªæœ‰ä¸€ä¸ªBç³»åˆ—ç‰¹å¾ï¼Œå³åªæœ‰å½“å‰ä½ç½®çš„å‰ä¸€ä¸ªä½ç½®çš„è¾“å‡ºtoken(æ ‡ç­¾)ä¸å½“å‰ä½ç½®çš„tokenï¼ˆæ ‡ç­¾ï¼‰ç»„æˆçš„Bigramä¸€ä¸ªç‰¹å¾ï¼ˆè½¬ç§»æ¦‚ç‡ï¼‰ã€‚æ¥ä¸‹æ¥çœ‹çœ‹å¯¹åº”å­¦ä¹ åè¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&quot;feature_func_weight&quot;:&#123;</span><br><span class="line">&quot;U006: ç­‰&quot;:[</span><br><span class="line">0.901,</span><br><span class="line">-0.003,</span><br><span class="line">0.311,</span><br><span class="line">-0.01,</span><br><span class="line">-0.006</span><br><span class="line">],</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢è¿™ä¸ªä»£è¡¨çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯å¯¹åº”ç¬¬â€œ006â€çš„â€œUâ€ç³»åˆ—ç‰¹å¾æ˜¯â€œç­‰â€å­—æ—¶ï¼Œå¯¹åº”äº”ä¸ªï¼ˆBEMOS)å¯¹åº”å¾—åˆ†ï¼Œé€šè¿‡æ¨¡æ¿ï¼Œä¼šå¯¹æ¯ä¸ªå­—éƒ½ç”Ÿæˆå¯¹åº”çš„6ä¸ªç‰¹å¾ï¼Œæ¯ä¸ªç‰¹å¾éƒ½æœ‰å¯¹åº”çš„ç‰¹å¾å‡½æ•°æƒé‡ã€‚</p><h3><span id="hmm-yu-crf-de-guan-xi-shi-shi-me">HMMä¸CRFçš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</span><a href="#hmm-yu-crf-de-guan-xi-shi-shi-me" class="header-anchor"></a></h3><p>åœ¨ä»‹ç»ä¸¤è€…åŒºåˆ«ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥è®¨è®ºä¸€ä¸‹æœºå™¨å­¦ä¹ ä¸­çš„ä¸¤ç§ä¸åŒçš„æ¨¡å‹ï¼šç”Ÿæˆå¼æ¨¡å‹ä¸åˆ¤åˆ«å¼æ¨¡å‹ã€‚<br>åœ¨ç›‘ç£å­¦ä¹ ä¸‹ï¼Œæ¨¡å‹å¯ä»¥åˆ†ä¸ºåˆ¤åˆ«æ¨¡å‹å’Œç”Ÿæˆæ¨¡å‹ã€‚åˆ¤åˆ«æ¨¡å‹é€šè¿‡featureså¯¹labelsåˆ»ç”»è¾¹ç•Œï¼Œå³ä»–ç›´æ¥å¯¹P(X|Y)è¿›è¡Œå»ºæ¨¡ï¼›è€Œç”Ÿæˆæ¨¡å‹é€šè¿‡è®­ç»ƒæ ·æœ¬ï¼Œç¡®å®šæ•°æ®çš„æ•´ä½“åˆ†å¸ƒæƒ…å†µï¼Œå³ä»–ç›´æ¥å¯¹P(X,Y).</p><p><img src="/2019/10/22/cutwords/dis.png" alt="image.png"></p><p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯¹P(o|Î»)è¿›è¡Œæ±‚è§£ï¼Œåœ¨HMMä¸­ï¼Œæˆ‘ä»¬é€šè¿‡è´å¶æ–¯å…¬å¼ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºï¼š<br><img src="byshmm.png" alt="image.png"></p><p>åˆ†æ¯æ˜¯å¸¸æ•°ï¼Œè¢«æˆ‘ä»¬å¿½ç•¥äº†ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹åˆ†å­è¿›è¡Œå»ºæ¨¡ï¼Œå³å¯¹P(o,Î»)è¿›è¡Œå»ºæ¨¡ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ªç”Ÿæˆæ¨¡å‹ã€‚è€ŒCRFï¼Œç›´æ¥å¯¹P(o|Î»)è¿›è¡Œå»ºæ¨¡ï¼Œæ˜¯ä¸€ä¸ªåˆ¤åˆ«æ¨¡å‹ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼ŒCRFå¯ä»¥è§£å†³HMMèƒ½è§£å†³çš„ä¸€åˆ‡é—®é¢˜ï¼Œè¿˜èƒ½è§£å†³è®¸å¤šHMMè§£å†³ä¸äº†çš„é—®é¢˜ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä»–ä»¬çš„æ•°å­¦è¡¨è¾¾å½¢å¼ã€‚HMMæ¨¡å‹çš„æ•°å­¦è¡¨è¾¾ä¸ºï¼š<br><img src="/2019/10/22/cutwords/pls.png" alt="image.png"></p><p>å¦‚æœæˆ‘ä»¬å°†HMMæ¨¡å‹å–å¯¹æ•°ï¼Œå¯ä»¥å¾—åˆ°ï¼š<br><img src="/2019/10/22/cutwords/logp.png" alt="image.png"></p><p>è€ŒCRFçš„æœªå½’ä¸€åŒ–çš„logå½¢å¼ï¼ˆç‰¹å¾å‡½æ•°ï¼‰çš„æ•°å­¦è¡¨è¾¾ä¸ºï¼š<br><img src="/2019/10/22/cutwords/score.png" alt="image.png"><br>å¦‚æœå°†HMMä¸­çš„logå½¢å¼çœ‹ä½œæ˜¯CRFä¸­çš„ç‰¹å¾æƒé‡ï¼Œåˆ™ä¸¤è€…å…·æœ‰ç›¸åŒçš„å½¢å¼ï¼Œå³æ¯ä¸€ä¸ªHMMéƒ½å¯¹åº”æŸä¸€ä¸ªå½¢å¼çš„CRFã€‚</p><h3><span id="wei-te-bi-suan-fa-yu-liang-zhe-hmm-crf-de-guan-xi-shi-shi-me">ç»´ç‰¹æ¯”ç®—æ³•ä¸ä¸¤è€…ï¼ˆHMM/CRFï¼‰çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ</span><a href="#wei-te-bi-suan-fa-yu-liang-zhe-hmm-crf-de-guan-xi-shi-shi-me" class="header-anchor"></a></h3><p>ç»´ç‰¹æ¯”ç®—æ³•æ˜¯ä¸€ç±»é—®é¢˜çš„è§£æ³•ï¼Œè€Œä¸æ˜¯å›ºå®šåªä¸HMM\CRFæ­é…ã€‚CRFä¸HMMéƒ½æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œä¸€ä¸ªæ˜¯å­¦ä¹ é˜¶æ®µï¼Œä¸€ä¸ªæ˜¯è§£ç é˜¶æ®µã€‚å­¦ä¹ é˜¶æ®µç¡®å®šæ¨¡å‹å‚æ•°ï¼Œè§£ç é˜¶æ®µæ±‚è§£æœ€å¤§æ¦‚ç‡è·¯å¾„ã€‚è§£ç è¿‡ç¨‹ä¸­ï¼ŒHMMä¸CRFï¼ˆçº¿æ€§é“¾CRFï¼‰ä»æ¨¡å‹å®šä¹‰ä¸Šçœ‹ï¼Œæ¯ä¸ªä½ç½®çš„å¾—åˆ†éƒ½æ˜¯ä¾èµ–å‰ä¸€ä¸ªä½ç½®çš„ä¿¡æ¯ï¼ˆæ ‡ç­¾ä¿¡æ¯ï¼‰ï¼Œæ‰€ä»¥æ•´ä½“æ˜¯ä¸€ä¸ªé€’æ¨è¿‡ç¨‹ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹åœ¨æ±‚è§£æœ€å¤§æ¦‚ç‡è·¯å¾„æ—¶ï¼Œå¦‚æœæ˜¯ç©·ä¸¾ï¼Œåœ¨ä¸Šæ–‡ä¹Ÿè®¨è®ºäº†ï¼Œå¤æ‚åº¦ä¸ºO(L<em>n<strong>L)ï¼Œè€Œç»´ç‰¹æ¯”ç®—æ³•å°†å¤æ‚åº¦é™ä½ä¸ºO(L</strong>2</em>n)ã€‚æ‰€ä»¥ç»´ç‰¹æ¯”ç®—æ³•æ˜¯åˆšå¥½é€‚ç”¨äºHMM/CRFè§£ç è¿‡ç¨‹çš„ä¸€ç§ç®—æ³•ã€‚</p><h2><span id="shen-jing-wang-luo-fen-ci-suan-fa">ç¥ç»ç½‘ç»œåˆ†è¯ç®—æ³•</span><a href="#shen-jing-wang-luo-fen-ci-suan-fa" class="header-anchor"></a></h2><p>å¯¹äºåºåˆ—å»ºæ¨¡è¿™ç±»é—®é¢˜ï¼ŒRNNæœ‰ç€å¤©ç„¶çš„ä¼˜åŠ¿ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å¤„ç†å˜é•¿è¾“å…¥å’Œåºåˆ—è¾“å…¥ï¼Œç›®å‰å¯¹äºåºåˆ—æ ‡æ³¨é—®é¢˜ï¼Œå…¬è®¤æ•ˆæœæœ€å¥½çš„æ¨¡å‹æ˜¯BiLSTM+CRF,å¯¹åº”çš„æ¨¡å‹ç»“æ„ä¸ºï¼š<br><img src="/2019/10/22/cutwords/lstm.png" alt="image.png"></p><p>ç›¸æ¯”äºå…¶ä»–æ¨¡å‹ï¼ŒBiLSTMå¯ä»¥å­¦ä¹ åˆ°ä¸Šä¸‹æ–‡ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥å¾ˆå¥½çš„è§£å†³åºåˆ—è¾“å…¥é—®é¢˜ï¼Œä½†BiLSTMåªå­¦ä¹ åˆ°äº†è¾“å…¥çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯¹åº”æ ‡æ³¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯å´å®Œå…¨æ²¡æœ‰ç”¨åˆ°ï¼Œæ‰€ä»¥æ­£å¦‚HMMä¸­æˆ‘ä»¬è®¨è®ºçš„ä¸€æ ·ï¼Œä¼šå‡ºç°å¾ˆå¤šä¸åˆç†çš„æ ‡ç­¾åºåˆ—ï¼Œå¦‚b\b\bè¿™ç§ï¼Œæ‰€ä»¥ï¼Œåœ¨åé¢æ¥ä¸€ä¸ªCRFæ¥é¿å…è¿™ç§æƒ…å†µçš„å‡ºç°ã€‚</p><p><strong>å‚è€ƒ</strong><br><a href="https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html" target="_blank" rel="noopener">https://www.cnblogs.com/biyeymyhjob/archive/2012/07/31/2615833.html</a><br><a href="https://baike.baidu.com/item/%E8%BF%AA%E6%9D%B0%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95/4049057?fr=aladdin#reference-[1]-1712262-wrap" target="_blank" rel="noopener">https://baike.baidu.com/item/%E8%BF%AA%E6%9D%B0%E6%96%AF%E7%89%B9%E6%8B%89%E7%AE%97%E6%B3%95/4049057?fr=aladdin#reference-[1]-1712262-wrap</a><br><a href="https://wenku.baidu.com/view/da6e0921af45b307e8719702.html" target="_blank" rel="noopener">https://wenku.baidu.com/view/da6e0921af45b307e8719702.html</a><br><a href="https://zhuanlan.zhihu.com/p/63087935" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/63087935</a><br><a href="https://www.cnblogs.com/pinard/p/7048333.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinard/p/7048333.html</a><br><a href="https://www.zhihu.com/question/35866596/answer/236886066" target="_blank" rel="noopener">https://www.zhihu.com/question/35866596/answer/236886066</a><br><a href="https://www.cnblogs.com/pinard/p/7048333.html" target="_blank" rel="noopener">https://www.cnblogs.com/pinard/p/7048333.html</a><br><a href="https://blog.echen.me/2012/01/03/introduction-to-conditional-random-fields/" target="_blank" rel="noopener">https://blog.echen.me/2012/01/03/introduction-to-conditional-random-fields/</a><br><a href="https://www.zhihu.com/question/20279019" target="_blank" rel="noopener">https://www.zhihu.com/question/20279019</a><br><a href="http://taku910.github.io/crfpp/" target="_blank" rel="noopener">http://taku910.github.io/crfpp/</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºåŒ—äº¬æ¬¢ä¹è°·</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>è¯å‘é‡æ€»ç»“</title>
    <link href="https://xv44586.github.io/2019/10/22/w2v-summary/"/>
    <id>https://xv44586.github.io/2019/10/22/w2v-summary/</id>
    <published>2019-10-22T01:07:15.000Z</published>
    <updated>2019-11-27T01:44:41.318Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#yi-tong">å¼‚åŒ</a><ul><li><a href="#xiang-tong-dian">ç›¸åŒç‚¹</a></li><li><a href="#bu-tong-dian">ä¸åŒç‚¹</a></li></ul></li><li><a href="#xing-zhi">æ€§è´¨</a><ul><li><a href="#pmi-jiao-du">PMIè§’åº¦</a></li><li><a href="#ke-jia-xing">å¯åŠ æ€§</a></li><li><a href="#mo-chang">æ¨¡é•¿</a></li><li><a href="#xiang-guan-xing">ç›¸å…³æ€§</a></li></ul></li><li><a href="#ying-yong">åº”ç”¨</a><ul><li><a href="#liang-ge-ju-zi-de-xiang-guan-xing">ä¸¤ä¸ªå¥å­çš„ç›¸å…³æ€§</a></li><li><a href="#zhong-xin-ci-guan-jian-ci-ti-qu">ä¸­å¿ƒè¯ï¼ˆå…³é”®è¯ï¼‰æå–</a></li><li><a href="#ju-xiang-liang">å¥å‘é‡</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="yi-tong">å¼‚åŒ</span><a href="#yi-tong" class="header-anchor"></a></h1><p>æœ¬æ–‡ä¸»è¦è®¨è®ºGloveå’Œword2vecä¸¤ç§æ¨¡å‹å¯¹åº”è¯å‘é‡ã€‚</p><h2><span id="xiang-tong-dian">ç›¸åŒç‚¹</span><a href="#xiang-tong-dian" class="header-anchor"></a></h2><ul><li>ä¸¤ç§æ¨¡å‹éƒ½æ˜¯åœ¨å¯¹è¯å¯¹çš„PMIåšåˆ†è§£ï¼Œæ‰€ä»¥ä»–ä»¬å…·æœ‰ç›¸åŒçš„æ€§è´¨ï¼ˆå‘é‡å¯åŠ æ€§ï¼Œç‚¹ç§¯ï¼Œä½™å¼¦è·ç¦»ï¼Œæ¨¡é•¿ç­‰ï¼‰ã€‚</li><li>æ¨¡å‹çš„åŸºæœ¬å½¢å¼éƒ½æ˜¯å‘é‡çš„ç‚¹ç§¯ï¼Œä¸”éƒ½æœ‰ä¸¤å¥—è¯å‘é‡ç©ºé—´ï¼ˆå•è¯å‘é‡ç©ºé—´ä¸ä¸Šä¸‹æ–‡è¯å‘é‡ç©ºé—´ï¼‰ã€‚</li></ul><h2><span id="bu-tong-dian">ä¸åŒç‚¹</span><a href="#bu-tong-dian" class="header-anchor"></a></h2><ul><li>1.é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯æ ¹æ®æ¨¡å‹æ¥æ¨å¯¼å…¶å¯¹åº”æ€§è´¨ï¼Œè€ŒGloveæ˜¯é€šè¿‡å…¶æ€§è´¨æ¥åæ¨æ¨¡å‹ï¼Œè¿™ç§æ–¹å¼è¿˜æ˜¯ç»™äººçœ¼å‰ä¸€äº®çš„ã€‚</li><li>2.é™¤Gloveä»¥å¤–çš„è¯å‘é‡æ¨¡å‹éƒ½æ˜¯å¯¹æ¡ä»¶æ¦‚ç‡$P(w|context)$è¿›è¡Œå»ºæ¨¡ï¼Œå¦‚word2vecçš„SkipGramå¯¹$P(w2|w1)$è¿›è¡Œå»ºæ¨¡ï¼Œä½†æ˜¯è¿™ä¸ªä¿¡æ¯æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œé¦–å…ˆï¼Œä»–ä¸æ˜¯ä¸€ä¸ªä¸¥æ ¼å¯¹ç§°çš„æ¨¡å‹ï¼Œå³P(w2|w1)  ä¸ P(w1|w2) å¹¶ä¸ä¸€å®šç›¸ç­‰ï¼Œæ‰€ä»¥ï¼Œåœ¨å»ºæ¨¡æ—¶éœ€è¦æŠŠä¸Šä¸‹æ–‡ä¸ä¸­å¿ƒè¯å‘é‡åŒºåˆ†å¼€ï¼Œä¸èƒ½æ”¾åˆ°åŒä¸€ä¸ªå‘é‡ç©ºé—´ï¼›å…¶æ¬¡ï¼Œè¿™ä¸ªæ¦‚ç‡æ˜¯æœ‰ç•Œçš„ã€å½’ä¸€åŒ–çš„é‡ï¼Œæ‰€ä»¥åœ¨æ¨¡å‹é‡Œéœ€è¦ç”¨softmaxç­‰å¯¹ç»“æœè¿›è¡Œå½’ä¸€åŒ–ï¼Œè¿™ä¸ªä¹Ÿä¼šé€ æˆä¼˜åŒ–ä¸Šçš„å›°éš¾ã€‚è€ŒGloveå¯ä»¥çœ‹ä½œæ˜¯å¯¹PMIè¿›è¡Œå»ºæ¨¡ï¼Œè€ŒPMIæ˜¯æ¯”æ¦‚ç‡æ›´å¯¹ç§°ä¹Ÿæ›´é‡è¦çš„ä¸€ä¸ªé‡ã€‚</li><li>3.å¦‚Gloveè®ºæ–‡ä¸­æ‰€è¿°ï¼Œå°±æ•´ä½“ç›®æ ‡å‡½æ•°è€Œè¨€ï¼Œå¯ä»¥çœ‹ä½œæ˜¯ä¸¤ç§æ¨¡å‹é‡‡ç”¨äº†ä¸åŒçš„æŸå¤±å‡½æ•°ï¼Œå…¶åŸºæœ¬å½¢å¼æ˜¯ä¸€è‡´çš„ã€‚</li><li>4.ä¸¤ç§æ¨¡å‹éƒ½æ˜¯è¯è¢‹æ¨¡å‹ï¼ˆä¸€å…ƒæ¨¡å‹ï¼‰ã€‚</li><li>5.å¯¹åº”è¯å‘é‡å†…ç§¯å«ä¹‰ä¸åŒï¼š<br><img src="/2019/10/22/w2v-summary/dot.png" alt="å†…ç§¯å«ä¹‰"></li></ul><h1><span id="xing-zhi">æ€§è´¨</span><a href="#xing-zhi" class="header-anchor"></a></h1><h2><span id="pmi-jiao-du">PMIè§’åº¦</span><a href="#pmi-jiao-du" class="header-anchor"></a></h2><p>ä¸Šæ–‡è¯´äº†ä¸¤ç§æ¨¡å‹éƒ½æ˜¯å¯¹è¯å¯¹çš„PMIåšåˆ†è§£ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è§£é‡Šå…¶æ€§è´¨æ—¶ç›´æ¥ä»PMIçš„è§’åº¦æ¥è§£é‡Šã€‚<br>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹PMI<br><img src="/2019/10/22/w2v-summary/pmi.png" alt="PMI"><br>å¯¹äºä»»æ„ä¸¤ä¸ªè¯åºåˆ—Qå’ŒAï¼Œå…¶ä¸­$Q=(q1,q2â€¦qk)$, $A = (a1, a2â€¦al)$ï¼Œæˆ‘ä»¬æ¨¡å‹éƒ½æ˜¯é‡‡ç”¨çš„è¯è¢‹æ¨¡å‹ï¼Œå³æ»¡è¶³æœ´ç´ å‡è®¾ï¼šæ¯ä¸ªç‰¹å¾ä¹‹é—´ç›¸äº’ç‹¬ç«‹ã€‚<br><img src="/2019/10/22/w2v-summary/pqa.png" alt><br>å¸¦å…¥æœ´ç´ å‡è®¾<br><img src="/2019/10/22/w2v-summary/naive.png" alt><br>ç”¨è´å¶æ–¯å…¬å¼å˜æ¢<br><img src="/2019/10/22/w2v-summary/change.png" alt><br>å†ç”¨ä¸€æ¬¡æœ´ç´ å‡è®¾<br><img src="/2019/10/22/w2v-summary/naive-change.png" alt></p><p>æœ€åå¾—åˆ°ï¼š<br><img src="/2019/10/22/w2v-summary/pmiqa.png" alt><br>å³åœ¨æœ´ç´ å‡è®¾ä¸‹ï¼Œä¸¤ä¸ªåºåˆ—çš„äº’ä¿¡æ¯ç­‰äºä¸¤ä¸ªåºåˆ—ä¸­å„ä¸ªé¡¹çš„äº’ä¿¡æ¯çš„æ€»å’Œã€‚</p><h2><span id="ke-jia-xing">å¯åŠ æ€§</span><a href="#ke-jia-xing" class="header-anchor"></a></h2><p>åœ¨Gloveå’Œword2vecä¸­ï¼Œä¸¤ä¸ªè¯ä¹‹é—´çš„ç›¸å…³æ€§æ˜¯é€šè¿‡å¯¹åº”è¯å‘é‡çš„å†…ç§¯æ¥è¡¨è¾¾çš„ï¼Œå³å¯¹äºè¯Wi, Wj, å…¶ç›¸å…³æ€§ç­‰äº$<vi ,vj>$, å¸¦å…¥ä¸Šé¢ï¼Œå³ï¼š<br><img src="/2019/10/22/w2v-summary/pmiin.png" alt><br>å³ä¸¤ä¸ªè¯åºåˆ—çš„ç›¸å…³æ€§å¯ä»¥é€šè¿‡å°†ä¸¤ä¸ªåºåˆ—å†…çš„è¯å‘é‡æ±‚å’Œåå†è¿›è¡Œç‚¹ç§¯è®¡ç®—ã€‚<br>å¦‚æˆ‘ä»¬æ±‚ä¸¤ä¸ªå¥å­çš„ç›¸å…³åº¦æ—¶ï¼Œå¯ä»¥å…ˆå°†å¥å­å†…çš„è¯å¯¹åº”çš„è¯å‘é‡è¿›è¡Œæ±‚å’Œï¼Œç„¶åå†è¿›è¡Œç›¸ä¼¼æ€§è®¡ç®—ã€‚</vi></p><h2><span id="mo-chang">æ¨¡é•¿</span><a href="#mo-chang" class="header-anchor"></a></h2><p>è¯å‘é‡wçš„æ¨¡é•¿æ­£æ¯”ä¸å…¶å†…ç§¯&lt;w,w&gt;ï¼Œå³æ­£æ¯”PMI(w,w)ï¼Œè€Œåœ¨ä¸€ä¸ªæ»‘åŠ¨çª—å£å†…ï¼Œä¸Šä¸‹æ–‡ä¸­çš„è¯ä¸ä¸­å¿ƒè¯ç›¸ç­‰çš„æ¦‚ç‡æä½ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºP(w,w) ~ P(w),æ¨å‡º<br><img src="/2019/10/22/w2v-summary/pww.png" alt><br>å³ï¼Œæ¨¡é•¿æ­£æ¯”ä¸è¯é¢‘çš„å€’æ•°ï¼Œè¯é¢‘è¶Šé«˜ï¼ˆåœç”¨è¯ï¼Œè™šè¯ç­‰ï¼‰ï¼Œå…¶å¯¹åº”çš„æ¨¡é•¿è¶ŠçŸ­ï¼Œè¿™æ ·å°±è¡¨é¢æ¨¡é•¿èƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä»£è¡¨è¯æœ¬èº«çš„é‡è¦æ€§ã€‚<br>ä»æ¨¡å‹å­¦ä¹ çš„è§’åº¦æ¥çœ‹ï¼Œè¯å‘é‡çš„å†…ç§¯ç­‰äºå…¶æ¨¡é•¿çš„ä¹˜ç§¯ä¹˜ä»¥ä½™å¼¦å€¼ï¼Œå³<br><img src="/2019/10/22/w2v-summary/cos.png" alt><br>å¯¹äºé«˜é¢‘çš„å‡ ä¹æ²¡æœ‰ä»€ä¹ˆå›ºå®šæ­é…çš„è¯ï¼Œå…¶æ‰€å«è¯­ä¹‰ä¹Ÿç›¸å¯¹éå¸¸å°‘ï¼Œå³è¿™äº›è¯ä¸å…¶ä»–ä»»æ„è¯çš„äº’ä¿¡æ¯éƒ½éå¸¸ä½ï¼Œçº¦ç­‰äº0ï¼Œè€Œä¸ºäº†è®©ä¸Šå¼ç­‰äº0ï¼Œä¸å…¶ä¸åœçš„è°ƒèŠ‚ä¸¤ä¸ªå‘é‡çš„æ–¹å‘ï¼Œä¸å¦‚è®©å…¶ä¸­ä¸€ä¸ªçš„æ¨¡é•¿åƒ0é è¿‘ï¼Œè¿™æ ·ç»è¿‡å¤šæ¬¡è¿­ä»£åï¼Œé«˜é¢‘çš„è¯­ä¹‰å°‘çš„è¯çš„æ¨¡é•¿å°±è¶Šæ¥è¶ŠçŸ­ï¼Œé€æ¸æ¥è¿‘0.<br>å®éªŒç»“æœä¸­ï¼Œä¹Ÿèƒ½çœ‹åˆ°æŒ‰æ¨¡é•¿æ’åºåï¼Œå‰é¢çš„éƒ½æ˜¯é«˜é¢‘çš„è¯­ä¹‰å«é‡æä½çš„è¯ã€‚<br><img src="/2019/10/22/w2v-summary/sort.png" alt="æ¨¡é•¿æ’åºç»“æœ"><br>å¯ä»¥çœ‹åˆ°ï¼Œæ’åœ¨å‰é¢çš„éƒ½æ˜¯é«˜é¢‘çš„è¯­ä¹‰æå°‘çš„è¯ï¼ˆâ€™UNKâ€™ï¼Œâ€™ä»¥åŠâ€™,â€™ä¸‰â€™ï¼Œç¬¦å·ç­‰)</p><h2><span id="xiang-guan-xing">ç›¸å…³æ€§</span><a href="#xiang-guan-xing" class="header-anchor"></a></h2><p>ä¸¤ä¸ªè¯çš„äº’ä¿¡æ¯æ­£æ¯”äºè¯å¯¹åº”å‘é‡çš„å†…ç§¯ï¼Œå³ä¸¤ä¸ªè¯äº’ä¿¡æ¯è¶Šå¤§ï¼Œä¸¤ä¸ªè¯æˆå¯¹å‡ºç°çš„å‡ ç‡è¶Šé«˜ï¼Œå…¶å¯¹åº”è¯å‘é‡çš„å†…ç§¯ä¹Ÿå°±è¶Šå¤§ï¼Œå› æ­¤ï¼Œå¯ä»¥é€šè¿‡å†…ç§¯æ¥å¯¹è¯çš„ç›¸å…³æ€§è¿›è¡Œæ’åºã€‚è€Œä¸Šé¢ä¹Ÿè¯´äº†ï¼Œæ¨¡é•¿ä»£è¡¨äº†è¯çš„é‡è¦ç¨‹åº¦ï¼Œå¦‚æœæˆ‘ä»¬ä¸è€ƒè™‘è¯æœ¬èº«çš„é‡è¦ç¨‹åº¦ï¼Œåªè€ƒè™‘å…¶è¯ä¹‰ï¼Œå¯ä»¥ç”¨å‘é‡èŒƒæ•°å°†å…¶å½’ä¸€åŒ–ååœ¨è¿›è¡Œå†…ç§¯è®¡ç®—ï¼Œè¿™æ ·æ›´ç¨³å®š.<br><img src="/2019/10/22/w2v-summary/cosij.png" alt><br>å³è¯çš„ç›¸å…³æ€§å¯ä»¥ç”¨è¯å‘é‡ä¹‹é—´çš„ä½™å¼¦è·ç¦»æ¥è®¡ç®—ï¼Œè¿™æ ·æ¯”åªä½¿ç”¨å†…ç§¯æ›´ç¨³å®šã€‚<br>åœ¨ç»Ÿè®¡ä¸Šï¼Œäº’ä¿¡æ¯ä¸º0ï¼Œåˆ™è¡¨é¢è¿™ä¸¤ä¸ªè¯æ— å…³ï¼Œå¯¹åº”åˆ°æ¨¡å‹ï¼Œå³ä¸¤ä¸ªè¯çš„è¯å‘é‡çš„å†…ç§¯ä¸º0ï¼Œè€Œæ ¹æ®å‘é‡çš„çŸ¥è¯†ï¼Œä¸¤ä¸ªå‘é‡çš„å†…ç§¯ä¸º0ï¼Œåˆ™è¡¨æ˜ä¸¤ä¸ªå‘é‡ç›¸äº’å‚ç›´ï¼Œå³ä¸¤ä¸ªå‘é‡æ— å…³ã€‚ä¸¤ä¸ªè¯åœ¨ç»Ÿè®¡ä¸Šçš„æ— å…³æ­£å¥½å¯¹åº”å…¶åœ¨è¯å‘é‡ç©ºé—´ä¸Šçš„å‡ ä½•æ— å…³ï¼</p><h1><span id="ying-yong">åº”ç”¨</span><a href="#ying-yong" class="header-anchor"></a></h1><h2><span id="liang-ge-ju-zi-de-xiang-guan-xing">ä¸¤ä¸ªå¥å­çš„ç›¸å…³æ€§</span><a href="#liang-ge-ju-zi-de-xiang-guan-xing" class="header-anchor"></a></h2><p>è®¡ç®—ä¸¤ä¸ªå¥å­æˆ–çŸ­è¯­ä¹‹é—´çš„ç›¸å…³æ€§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´ä¸Šé¢PMIåœ¨æœ´ç´ å‡è®¾ä¸‹çš„æ€§è´¨ï¼Œå°†ä¸¤ä¸ªå¥å­ä¸­çš„è¯å‘é‡è¿›è¡Œæ±‚å’Œï¼Œå†è®¡ç®—ä¸¤ä¸ªç»“æœå‘é‡ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œå¦‚ç‚¹ç§¯æˆ–ä½™å¼¦ã€‚<br>è€Œå¦‚æœä¸€ä¸ªå¥å­å†…çš„è¯å‘é‡çš„å’Œä¸æŸä¸€ä¸ªè¯çš„è¯å‘é‡ç›¸å…³æ€§éå¸¸é«˜ï¼Œå¯ä»¥è®¤ä¸ºè¿™ä¸ªå¥å­ä¸è¿™ä¸ªè¯è¡¨è¾¾äº†ç›¸åŒçš„è¯­ä¹‰ï¼Œæˆ–è€…ï¼Œåœ¨è¯å‘é‡ç©ºé—´å†…ï¼Œè¯å¯¹åº”çš„å‘é‡åœ¨å¥å­çš„èšç±»ä¸­å¿ƒé™„è¿‘ã€‚</p><h2><span id="zhong-xin-ci-guan-jian-ci-ti-qu">ä¸­å¿ƒè¯ï¼ˆå…³é”®è¯ï¼‰æå–</span><a href="#zhong-xin-ci-guan-jian-ci-ti-qu" class="header-anchor"></a></h2><p>æ‰€è°“ä¸­å¿ƒè¯ï¼ˆå…³é”®è¯ï¼‰ï¼Œå³èƒ½æ¦‚å†µå¥å­çš„æ„æ€ï¼Œé€šè¿‡è¿™äº›è¯ï¼Œæˆ‘å°±èƒ½å¤§æ¦‚çŒœåˆ°æ•´ä¸ªå¥å­çš„æ•´ä½“å†…å®¹ã€‚å³è¿™äº›è¯ï¼ˆç›¸å¯¹å¥å­å†…å…¶ä»–è¯ï¼‰å¯¹æ•´ä¸ªå¥å­çš„ç›¸å…³æ€§æ›´é«˜ã€‚è¿™æ ·å°±èƒ½å°†é—®é¢˜è½¬åŒ–æˆè¯ä¸å¥å­ç›¸å…³æ€§æ’åºé—®é¢˜ã€‚<br>é€šè¿‡è¯­è¨€æ¨¡å‹çš„è§’åº¦æ¥çœ‹ï¼Œè¯­è¨€æ¨¡å‹æœ¬èº«å°±æ˜¯ä¸€ä¸ªé€šè¿‡ä¸Šï¼ˆä¸‹ï¼‰æ–‡æ¥é¢„æµ‹ä¸‹ä¸€ä¸ªè¯æ¦‚ç‡çš„æ¨¡å‹ï¼Œå³æœ€å¤§åŒ–$P(w1,w2,w3..|W)$.è€Œå…³é”®è¯çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç”¨æ•°å­¦çš„æ–¹å¼è¡¨è¾¾å°±æ˜¯ï¼š<br>å¯¹äº$S=(w1,w2, w3..wk)$,æ±‚è§£%P(S|wk)$å€¼æœ€é«˜çš„$wk$,å…¶ä¸­$wk$å±äº$S$ã€‚è¿™å…¶å®ä¸è¯­è¨€æ¨¡å‹çš„å«ä¹‰æ˜¯ä¸€è‡´çš„ã€‚<br>æœ€ç»ˆï¼Œå°†é—®é¢˜è½¬åŒ–æˆè¯ä¸å¥å­ä¹‹é—´çš„ç›¸å…³æ€§æ’åºé—®é¢˜ï¼Œè€Œä¸Šé¢æåˆ°æ±‚è§£ä¸¤ä¸ªå¥å­ç›¸å…³æ€§æ—¶ï¼Œå¯ä»¥å°†å¥å­å¯¹åº”è¯å‘é‡å…ˆæ±‚å’Œå†è®¡ç®—ç›¸å…³æ€§ï¼Œæœ€åå…³é”®è¯æå–å°±å˜æˆï¼š<br>å…ˆå°†å¥å­å¯¹åº”è¯å‘é‡æ±‚å’Œï¼Œå¾—åˆ°sen_vecï¼Œç„¶åè®¡ç®—å•ä¸ªè¯ä¸sen_vecçš„ç›¸å…³æ€§ï¼Œç„¶åæ’åºå³å¯ã€‚<br><img src="/2019/10/22/w2v-summary/keywords.png" alt><br>å¯ä»¥çœ‹åˆ°ç»“æœè¿˜æ˜¯ç›¸å½“ä¸é”™çš„ã€‚</p><h2><span id="ju-xiang-liang">å¥å‘é‡</span><a href="#ju-xiang-liang" class="header-anchor"></a></h2><p>ä¸Šé¢åœ¨åšå¥å­ç›¸å…³æ€§æ—¶ï¼Œéƒ½æ˜¯ä¸ºäº†å°†è®¡ç®—ä»$O(n^2)$é™ä½åˆ°O(n)è€Œå°†å¥å­å†…çš„è¯å‘é‡è¿›è¡Œæ±‚å’Œï¼Œç„¶åå†è®¡ç®—ã€‚å…¶å®ä¹Ÿå°±æ˜¯ç”¨è¯å‘é‡çš„æ±‚å’Œæ¥å¾—åˆ°å¥å‘é‡ï¼Œæ¥ä½œä¸ºå¥å­åœ¨ç›¸åŒè¯å‘é‡ç©ºé—´çš„è¯­ä¹‰ã€‚å…¶å®è¿™æ˜¯ä¸€ç§ç®€å•åˆå¿«æ·çš„å¾—åˆ°å¥å‘é‡çš„æ–¹å¼ï¼Œåœ¨å¾ˆå¤šä»»åŠ¡ä¸­éƒ½å¯ä»¥å°è¯•ä½¿ç”¨ã€‚</p><p><strong>refer</strong><br><a href="https://papers.nips.cc/paper/5477-neural-word-embedding-as-implicit-matrix-factorization.pdf" target="_blank" rel="noopener">neural-word-embedding-as-implicit-matrix-factorization</a><br><a href="https://aclweb.org/anthology/P17-1007" target="_blank" rel="noopener">https://aclweb.org/anthology/P17-1007</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºç§¦çš‡å²›</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
      <category term="Thinking" scheme="https://xv44586.github.io/tags/Thinking/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥è°ˆè°ˆword2vec</title>
    <link href="https://xv44586.github.io/2019/10/21/deep-w2v/"/>
    <id>https://xv44586.github.io/2019/10/21/deep-w2v/</id>
    <published>2019-10-21T01:02:56.000Z</published>
    <updated>2019-10-22T01:24:14.513Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#nnlm-fu-za-du">NNLMå¤æ‚åº¦</a></li><li><a href="#you-hua-fang-an">ä¼˜åŒ–æ–¹æ¡ˆ</a><ul><li><a href="#1-hierarchical-softmax">1.Hierarchical softmax</a></li><li><a href="#2-negative-sampling">2.negative sampling</a></li></ul></li><li><a href="#si-chong-xun-lian-fang-an">å››ç§è®­ç»ƒæ–¹æ¡ˆ</a></li><li><a href="#si-kao">æ€è€ƒ</a></li><li><a href="#hui-da">å›ç­”</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="nnlm-fu-za-du">NNLMå¤æ‚åº¦</span><a href="#nnlm-fu-za-du" class="header-anchor"></a></h1><p>åŸå§‹çš„NNLMåœ¨è®­ç»ƒè¯å‘é‡æ—¶éå¸¸è€—æ—¶ï¼Œå°¤å…¶æ˜¯å¤§è§„æ¨¡è¯­æ–™ä¸Šï¼Œä½œè€…åœ¨è®ºæ–‡åä¹Ÿæå‡ºäº†å¯èƒ½çš„ä¼˜åŒ–æ–¹æ¡ˆï¼Œæ‰€ä»¥word2vecçš„å…³æ³¨ç‚¹å°±æ˜¯å¦‚æœæ›´åŠ æœ‰æ•ˆçš„åœ¨å¤§è§„æ¨¡è¯­æ–™ä¸Šè®­ç»ƒè¯å‘é‡ã€‚<br>æ¯ä¸ªè®­ç»ƒæ ·æœ¬çš„è®¡ç®—å¤æ‚åº¦ï¼š<br>Q = N <em> D + N </em> D <em>H +H </em> V<br>å…¶ä¸­Væ˜¯è¯å…¸å¤§å°ï¼Œæ¯ä¸ªè¯ç¼–ç ä¸º1-of-Vï¼ŒNæ˜¯å½“å‰åºåˆ—ä¸­å½“å‰è¯çš„å‰Nä¸ªè¯ï¼ŒDæ˜¯è¯å‘é‡å¤§å°ï¼ŒHæ˜¯ç¥ç»ç½‘ç»œå±‚ä¸­éšå±‚ç¥ç»å…ƒä¸ªæ•°ã€‚<br>è¿™ä¸ªQä¸­çš„ä¸»è¦éƒ¨åˆ†æ˜¯æœ€åçš„H <em> V éƒ¨åˆ†ï¼Œä½†é€šè¿‡ä¸€äº›ä¼˜åŒ–æ–¹æ³•å¯ä»¥é™ä½ï¼ˆhs/ng), æ‰€ä»¥æ­¤æ—¶çš„ä¸»è¦çš„å¤æ‚åº¦æ¥ç€ N </em> D * H, æ‰€ä»¥ä½œè€…ç›´æ¥å°†ç¥ç»ç½‘ç»œå±‚å»æ‰ï¼Œæ¥æé«˜è®¡ç®—æ•ˆç‡ã€‚<br>ä½œè€…ä¹‹å‰çš„å·¥ä½œå‘ç°æˆåŠŸçš„è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹å¯ä»¥é€šè¿‡ä¸¤æ­¥è¿›è¡Œï¼š1ï¼Œé¦–å…ˆé€šè¿‡ä¸€ä¸ªç®€å•æ¨¡å‹è®­ç»ƒè¯å‘é‡ï¼Œ2ï¼Œç„¶ååœ¨è¿™ä¹‹ä¸Šè®­ç»ƒN-gram NNLMã€‚åŒæ—¶ï¼Œå¢åŠ å½“å‰è¯åç»­çš„è¯ï¼ˆä¸‹æ–‡ä¿¡æ¯ï¼‰å¯ä»¥å¾—åˆ°æ›´å¥½çš„ç»“æœã€‚åŸºäºæ­¤ï¼Œæå‡ºäº†ä¸¤ç§ç»“æ„çš„æ¨¡å‹ï¼š<br><img src="/2019/10/21/deep-w2v/model.png" alt="CBOW vs  Skip-gram"></p><p>1.CBOWï¼šä¸NNLMç±»ä¼¼ï¼Œä½†æ˜¯å°†ç½‘ç»œå±‚å»æ‰ï¼ŒåŒæ—¶ä½¿ç”¨å½“å‰è¯çš„ä¸‹æ–‡ï¼Œå³é€šè¿‡å°†ä¸Šä¸‹æ–‡çª—å£å†…çš„è¯æŠ•å½±å¾—åˆ°ç»Ÿä¸€å‘é‡ï¼Œç„¶åé¢„æµ‹å½“å‰è¯ã€‚æ­¤æ—¶æ¨¡å‹å†…è¯çš„é¡ºåºä¸å†å½±å“æŠ•å½±ç»“æœï¼Œè®¡ç®—å¤æ‚åº¦ä¸ºï¼šQ = N <em> D + D </em> log(V)<br>2.Skip-gram: ä¸CBOWç±»ä¼¼ï¼Œä¸è¿‡æ˜¯é€šè¿‡å½“å‰æ­¤æ¥é¢„æµ‹ä¸Šä¸‹æ–‡å†…çš„è¯ï¼Œä¸ºäº†æé«˜æ•ˆç‡ï¼Œåœ¨å®é™…å·¥ç¨‹ä¸Šå¯¹ä¸Šä¸‹æ–‡å†…çš„è¯è¿›è¡Œäº†é‡‡æ ·ï¼Œæ­¤æ—¶çš„è®¡ç®—å¤æ‚åº¦ä¸ºï¼šQ = C <em> (D + D </em> log(V))</p><h1><span id="you-hua-fang-an">ä¼˜åŒ–æ–¹æ¡ˆ</span><a href="#you-hua-fang-an" class="header-anchor"></a></h1><p>ä¹‹å‰æåˆ°åŸå§‹NNLMä¸­çš„ä¸»è¦è®¡ç®—å¤æ‚åº¦æ˜¯è¾“å‡ºå±‚ï¼Œå³ H * Vï¼Œä¸»è¦çš„ä¼˜åŒ–æ€è·¯æ˜¯é¿å…å…¨é‡è®¡ç®—Vçš„æ¦‚ç‡ï¼Œä½œè€…å®ç°äº†ä¸¤ç§æ–¹æ¡ˆï¼Œå³ Hierarchical Softmax å’Œnegative sampling</p><h2><span id="1-hierarchical-softmax">1.Hierarchical softmax</span><a href="#1-hierarchical-softmax" class="header-anchor"></a></h2><p>é€šè¿‡è¯é¢‘æ„å»ºéœå¤«æ›¼æ ‘ï¼Œç„¶åå°†è¾“å‡ºå±‚ç”¨éœå¤«æ›¼æ ‘æ›¿æ¢ï¼Œä¸Šä¸€å±‚ç»“æœä¸æ¯ä¸ªèŠ‚ç‚¹åšäºŒåˆ†ç±»ï¼Œåˆ¤æ–­å±äºè¯ç±»ï¼Œå¶å­èŠ‚ç‚¹ä¸ºå¯¹åº”çš„è¯ï¼Œåˆ¤æ–­å±äºè¯¥è¯çš„æ¦‚ç‡</p><p><img src="/2019/10/21/deep-w2v/hs.png" alt></p><p>ç‰¹ç‚¹ï¼šé«˜é¢‘è¯çš„ä½ç½®æ›´é è¿‘æ ¹èŠ‚ç‚¹ï¼Œæ‰€éœ€çš„è®¡ç®—è¿›ä¸€æ­¥é™ä½ã€‚ä½†å¯¹äºä½é¢‘è¯ï¼Œå…¶å¯¹åº”ä½ç½®è¿œç¦»æ ¹ï¼Œå¯¹åº”è·¯å¾„é•¿ï¼Œæ‰€éœ€è®¡ç®—é‡ä¾ç„¶å¾ˆå¤§ï¼Œæ•ˆç‡ä¸é«˜</p><h2><span id="2-negative-sampling">2.negative  sampling</span><a href="#2-negative-sampling" class="header-anchor"></a></h2><p>åœ¨è¾“å‡ºå±‚é¿å…å¯¹å…¨é‡å­—å…¸è¿›è¡Œåˆ¤æ–­ï¼Œè€Œé€šè¿‡å…ˆéªŒçŸ¥è¯†æ¥åœˆå‡ºæœ€å®¹æ˜“æ··æ·†çš„ä¸€éƒ¨åˆ†ï¼Œç„¶åç»„æˆè´Ÿæ ·æœ¬ï¼ˆç›¸å¯¹äºå½“å‰è¯ï¼‰ã€‚ä½œè€…æå‡ºé€šè¿‡è¯é¢‘æ¥å½’ä¸€åŒ–åçš„æ¯”ä¾‹æ¥ç»„æˆä¸€å®šæ¯”ä¾‹çš„å€™é€‰é›†ï¼Œéšæœºçš„åœ¨å€™é€‰é›†é€‰å–ä¸€å®šæ•°é‡çš„è´Ÿæ ·æœ¬(n &lt;&lt; V)æ¥ç»„æˆè´Ÿæ ·æœ¬é›†ï¼Œæœ€åçš„softmaxå¤šåˆ†ç±»å±‚å˜æˆå¤šä¸ªsigmodäºŒåˆ†ç±»å±‚ï¼Œæ¥æé«˜è®¡ç®—æ•ˆç‡åŠè¯å‘é‡çš„è´¨é‡ã€‚</p><h1><span id="si-chong-xun-lian-fang-an">å››ç§è®­ç»ƒæ–¹æ¡ˆ</span><a href="#si-chong-xun-lian-fang-an" class="header-anchor"></a></h1><ul><li>1.åŸºäºhsçš„CBOW</li></ul><p><img src="/2019/10/21/deep-w2v/hs-cbow.png" alt><br>å…¶ä¸­</p><p><img src="/2019/10/21/deep-w2v/xw.png" alt></p><p><img src="/2019/10/21/deep-w2v/pw.png" alt></p><p><img src="/2019/10/21/deep-w2v/gd.png" alt></p><p>å¯¹åº”çš„ä¼ªä»£ç ï¼š</p><p><img src="/2019/10/21/deep-w2v/code.png" alt></p><ul><li>2.åŸºäºhsçš„Skip-gram<br><img src="/2019/10/21/deep-w2v/sk.png" alt></li></ul><p>å¯¹åº”çš„ä¼ªä»£ç ï¼š<br><img src="/2019/10/21/deep-w2v/sk-code.png" alt></p><ul><li>3.åŸºäºngçš„CBOW</li></ul><p><img src="/2019/10/21/deep-w2v/ng-cbow.png" alt><br><img src="/2019/10/21/deep-w2v/G.png" alt="image.png"></p><p>å¯¹åº”ä¼ªä»£ç ï¼š</p><p><img src="/2019/10/21/deep-w2v/ng-code.png" alt></p><ul><li>4.åŸºäºhsçš„skip-gram<br><img src="/2019/10/21/deep-w2v/opt.png" alt></li></ul><p>Gä¸­è¡¨è¾¾å¼ä¸åŸºäºhsçš„CBOWä¸€æ ·ï¼Œåªæ˜¯åœ¨æœ€å¤–é¢å¤šäº†ä¸€å±‚æ±‚å’Œï¼Œåé¢çš„è¿‡ç¨‹ä¸CBOWä¸€æ ·ã€‚</p><h1><span id="si-kao">æ€è€ƒ</span><a href="#si-kao" class="header-anchor"></a></h1><ul><li>1.è¯å‘é‡çš„è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸€ä¸ªfake taskï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯æœ€åçš„è¯­è¨€æ¨¡å‹ï¼Œè€Œæ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­äº§ç”Ÿçš„feature vectorï¼Œç”¨ä¸€ä¸ªreal task æ¥è®­ç»ƒæ˜¯ä¸æ˜¯æ›´å¥½ï¼Ÿ</li><li>2.å› ä¸ºæ˜¯ä¸ªfake taskï¼Œé‚£æˆ‘ä»¬å¦‚ä½•è¯„ä¼°è¿™ä¸ªtaskï¼Œåˆå¦‚ä½•è¯„ä¼°å¾—åˆ°çš„è¯å‘é‡çš„è´¨é‡ï¼Ÿè®ºæ–‡ä¸­ä½¿ç”¨äº†è¿‘ä¼¼è¯å¯¹åŠçº¿æ€§å¹³ç§»çš„ç‰¹æ€§ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Ÿ</li><li>3.è¯å‘é‡çš„â€œsimilarityâ€å…·ä½“æ˜¯ä»€ä¹ˆå«ä¹‰ï¼Ÿ</li></ul><h1><span id="hui-da">å›ç­”</span><a href="#hui-da" class="header-anchor"></a></h1><ul><li>1.ç”¨real taskæ¥è®­ç»ƒä¸€èˆ¬ä¼šå¾—åˆ°æ›´å¥½çš„è¯å‘é‡ï¼Œä½†ä¸€èˆ¬ä¸‹æ¸¸ä»»åŠ¡éƒ½æ˜¯åœ¨è¯å‘é‡ä¹‹ä¸Šæ„å»ºï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µæ˜¯è®­ç»ƒä¸€ä¸ªè¯å‘é‡ï¼Œç„¶åä½œä¸ºembeddingå±‚çš„åˆå§‹å‚æ•°è¿›è¡Œä¸‹æ¸¸ä»»åŠ¡çš„è®­ç»ƒã€‚</li><li>2.é™¤äº†ç›¸ä¼¼è¯åŠçº¿æ€§å¹³ç§»æ€§ï¼Œå…¶ä»–æƒ…å†µä¸‹å¯ä»¥é€šè¿‡ä¸‹æ¸¸ä»»åŠ¡çš„æ•ˆç‡æ¥è¯„ä¼°ã€‚</li><li>3.è¯å‘é‡çš„â€œsimilarityâ€è·Ÿé€šå¸¸æ„ä¹‰çš„è¿‘ä¹‰è¯æˆ–ç›¸ä¼¼è¯æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ï¼Œè¯å‘é‡æ›´å¤šçš„å«ä¹‰æ˜¯â€œåŒä½è¯â€ï¼Œå³ä¸Šä¸‹æ–‡ç›¸è¿‘çš„è¯ã€‚æ¢ä¸ªè§’åº¦ï¼Œæˆ‘ä»¬å°†æ¨¡å‹çš„è¿æ¥å‡½æ•°å½¢å¼å†™å‡ºæ¥ï¼š</li></ul><p><img src="/2019/10/21/deep-w2v/pwk.png" alt></p><p>ä¸Šå¼ä¸­våˆ†åˆ«å¯¹åº”å·¦å³ä¸¤ä¸ªè¯å‘é‡ç©ºé—´çš„è¯å‘é‡ï¼Œç”±äºæ¨¡å‹æ˜¯å¯¹ç§°çš„ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨æ—¶å·¦å³ä¸¤ä¸ªè¯å‘é‡å¯ä»¥ä»»é€‰ä¸€ä¸ªã€‚</p><p>å…¶ä¸­<img src="/2019/10/21/deep-w2v/pwi.png" alt></p><p>åˆ†æ¯æ˜¯å½’ä¸€åŒ–é¡¹ï¼Œæš‚æ—¶å¿½ç•¥ï¼Œæœ€ç»ˆæœ€å¤§åŒ–P(wk|wi)çš„åŒæ—¶ï¼Œå³è®© Vwkä¸ Vwiçš„å†…ç§¯æ›´å¤§ã€‚å³æ¨¡å‹å†…éšå¼çš„ç”¨è¯å‘é‡çš„å†…ç§¯ï¼ˆæ–¹å‘ï¼‰æ¥è¡¨ç¤ºè¯å‘é‡ç›´æ¥çš„è·ç¦»è¿œè¿‘ï¼ˆè¯­ä¹‰è·ç¦»ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¯å‘é‡çš„cosineæ¥å¯»æ‰¾è¯­ä¹‰æ›´æ¥è¿‘çš„è¯ã€‚è¿›ä¸€æ­¥çš„ï¼Œå·¦å³ä¸¤ä¸ªè¯å‘é‡åˆ†å±ä¸åŒçš„å‘é‡ç©ºé—´ï¼Œæœ€å°åŒ–ä¸¤ä¸ªè¯çš„è¯­ä¹‰è·ç¦»è¢«è½¬åŒ–ä¸ºæœ€å°åŒ–ä¸¤ä¸ªè¯åœ¨ä¸åŒè¯­ä¹‰ç©ºé—´çš„è·ç¦»ï¼Œè€Œä¸æ˜¯åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´ï¼Œä¸ºä»€ä¹ˆè¿™ç§æ–¹æ¡ˆå¯è¡Œï¼ŸåŸæ–‡é‡Œæåˆ°æ˜¯å› ä¸ºæ”¾åœ¨åŒä¸€ä¸ªå‘é‡ç©ºé—´ï¼ˆåŒä¸€ä¸ªçŸ©é˜µï¼‰ï¼Œä¸¤ä¸ªè¯å‘é‡æ­£äº¤åœ¨ä¸€èµ·ï¼Œä¸å¥½ä¼˜åŒ–ï¼Œï¼Œåˆ†å¼€æ”¾åœ¨ä¸¤ä¸ªå‘é‡ç©ºé—´æ›´åˆ©äºä¼˜åŒ–ã€‚ä¸¤ä¸ªè¯å‘é‡ç©ºé—´ä¸ºä»€ä¹ˆå¯è¡Œï¼Ÿæˆ‘è®¤ä¸ºä¸»è¦æ˜¯å› ä¸ºæ¨¡å‹æ˜¯å¯¹ç§°çš„ï¼Œè™½ç„¶ä¸¤ä¸ªå‘é‡ç©ºé—´ä¸åŒï¼Œä½†æ˜¯å¯ä»¥è®¤ä¸ºæ˜¯åªæ˜¯ç»è¿‡äº†æ—‹è½¬ç¼©æ”¾ï¼Œè¯åœ¨å‘é‡ç©ºé—´çš„ç›¸å¯¹ä½ç½®æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼ˆè¯å‘é‡ä¹‹é—´çš„è§’åº¦ï¼‰ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><ul><li>1.æ²¡æœ‰ç¥ç»ç½‘ç»œå±‚ï¼Œæ‰€ä»¥æ²¡æœ‰è€—æ—¶çš„çŸ©é˜µç›¸ä¹˜ï¼Œåªä¿ç•™äº†ä¸€ä¸ªsoftmaxå±‚ï¼Œè®¡ç®—æ•ˆç‡é«˜ã€‚</li><li>2.ä¼˜åŒ–æ—¶ä½¿ç”¨çš„æ˜¯éšæœºæ¢¯åº¦ä¸‹é™ï¼Œç½•è§è¯ä¸ä¼šä¸»å¯¼ä¼˜åŒ–ç›®æ ‡<br>demoï¼š<a href="https://github.com/xv44586/Papers/blob/master/NLP/WordVector/word2vecDemo.ipynb" target="_blank" rel="noopener">https://github.com/xv44586/Papers/blob/master/NLP/WordVector/word2vecDemo.ipynb</a></li></ul><p><strong>è®ºæ–‡</strong><br><a href="https://arxiv.org/pdf/1301.3781.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1301.3781.pdf</a><br><a href="https://arxiv.org/abs/1310.4546" target="_blank" rel="noopener">https://arxiv.org/abs/1310.4546</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºè‹å·</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>Dropout--æ·±åº¦ç¥ç»ç½‘ç»œä¸­çš„Bagging</title>
    <link href="https://xv44586.github.io/2019/10/17/dropout/"/>
    <id>https://xv44586.github.io/2019/10/17/dropout/</id>
    <published>2019-10-17T14:28:12.000Z</published>
    <updated>2019-10-17T15:01:46.580Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#shen-du-shen-jing-wang-luo-guo-ni-he-wen-ti">æ·±åº¦ç¥ç»ç½‘ç»œè¿‡æ‹Ÿåˆé—®é¢˜</a></li><li><a href="#dropout">Dropout</a></li><li><a href="#bu-tong-dropout-fang-an-dui-bi-shi-yan">ä¸åŒdropoutæ–¹æ¡ˆå¯¹æ¯”å®éªŒ</a></li><li><a href="#updating">updatingâ€¦</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="shen-du-shen-jing-wang-luo-guo-ni-he-wen-ti">æ·±åº¦ç¥ç»ç½‘ç»œè¿‡æ‹Ÿåˆé—®é¢˜</span><a href="#shen-du-shen-jing-wang-luo-guo-ni-he-wen-ti" class="header-anchor"></a></h1><p>æ·±åº¦ç¥ç»ç½‘ç»œç”±äºå…¶å·¨å¤§çš„å‚æ•°é‡ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‹Ÿåˆéå¸¸å¤æ‚çš„éçº¿æ€§å…³ç³»ï¼ŒåŒæ—¶ï¼Œå·¨å¤§çš„å‚æ•°é‡ä¹Ÿç»™æ¨¡å‹å¸¦æ¥äº†è¿‡æ‹Ÿåˆçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¹Ÿæœ‰äººæå‡ºäº†æ—©åœå’ŒåŠ å…¥æ­£åˆ™é¡¹ç­‰æ‰‹æ®µã€‚è€Œåœ¨ä¼ ç»Ÿæœºå™¨å­¦ä¹ ä¸­ï¼Œé™¤äº†è¿™äº›æ‰‹æ®µï¼Œè¿˜æœ‰ä¸€ç§æ‰‹æ®µæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³baggingï¼ˆå‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« <a href="https://xv44586.github.io/2019/10/16/bagging/">Baggingä¸ºä»€ä¹ˆèƒ½é™ä½è¿‡æ‹Ÿåˆ</a>ï¼‰ï¼Œæœ€å…¸å‹çš„å°±æ˜¯éšæœºæ£®æ—ï¼šå¯¹æ ·æœ¬å’Œç‰¹å¾è¿›è¡ŒæŠ½æ ·ï¼Œè®­ç»ƒå¤šä¸ªæ¨¡å‹ï¼Œç„¶åè¿›è¡Œé›†æˆï¼ˆæŠ•ç¥¨/æ±‚å¹³å‡ï¼‰ã€‚é‚£å¦‚ä½•å°†è¿™ç§æ€è·¯å¼•å…¥åˆ°æ·±åº¦ç¥ç»ç½‘ç»œä¸­å‘¢ï¼Ÿ<br>é¦–å…ˆ,ç”±äºè®­ç»ƒå•ä¸ªæ·±åº¦ç¥ç»ç½‘ç»œå°±å·²ç»éå¸¸è€—æ—¶ï¼Œé€šå¸¸æ ·æœ¬é‡ä¹Ÿä¸å¤Ÿå¤šï¼Œä¸é€‚åˆé‡‡æ ·ï¼Œæ‰€ä»¥åƒéšæœºæ£®æ—ä¸€æ ·æŠ½æ ·è®­ç»ƒå¤šä¸ªæ¨¡å‹çš„æ–¹æ¡ˆä¸å¯å–ã€‚<br>å‰©ä¸‹çš„æ€è·¯å°±æ˜¯ç”¨â€œä¸€ä¸ªâ€æ¨¡å‹æ¥æ¨¡æ‹Ÿå¤šä¸ªsub-modelï¼Œé‚£å¦‚ä½•æ¥æ¨¡æ‹Ÿå‘¢ï¼Ÿ</p><h1><span id="dropout">Dropout</span><a href="#dropout" class="header-anchor"></a></h1><p>å¯¹äºæ·±åº¦ç¥ç»ç½‘ç»œï¼Œå…¶æœ€é‡è¦çš„éƒ¨åˆ†å°±æ˜¯å…¶éšè—å•å…ƒï¼ˆç¥ç»å…ƒï¼‰ï¼Œå¯¹äºä¸€ä¸ªæœ‰nä¸ªç¥ç»å…ƒçš„å±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®ç¥ç»å…ƒæ˜¯å¦æ¿€æ´»ï¼Œæ¥æ¨¡æ‹Ÿ$2^n$ ç§ç»“æ„ï¼Œå³sub-modelï¼Œè€Œåœ¨evaluateé˜¶æ®µï¼Œæˆ‘ä»¬å°†è¿™äº›æ‰€æœ‰çš„sub-mdoelçš„ç»“æœè¿›è¡Œæ±‚å¹³å‡ã€‚é‚£å¯¹äºç°åœ¨çš„ç»“æ„ï¼Œä¸å¯èƒ½å¯¹ $2^n$ä¸­ç»“æ„éƒ½å»åšè®¡ç®—ç„¶åå†æ±‚å¹³å‡ï¼Œä¸€ç§è¿‘ä¼¼çš„åšæ³•æ˜¯ç”¨å½“å‰è¿™â€œä¸€ä¸ªâ€æ¨¡å‹æ¥è¿‘ä¼¼æ¨¡æ‹Ÿï¼šè®¾ç½®æ‰€æœ‰ç¥ç»å…ƒéƒ½å¤„äºæ¿€æ´»çŠ¶æ€ï¼ŒåŒæ—¶ï¼Œå¯¹æ¯ä¸ªç¥ç»å…ƒçš„è¾“å‡ºä¹˜ä»¥å…¶æ¿€æ´»æ¦‚ç‡keep_prob.è¿™å°±æ˜¯Dropoutçš„èƒŒåæ€æƒ³ã€‚<br><img src="/2019/10/17/dropout/dropout.png" alt="Dropout"><br>ç®€å•æ€»ç»“Dropoutçš„å…·ä½“åšæ³•ï¼šè®­ç»ƒé˜¶æ®µï¼Œåœ¨å‰å‘ä¼ æ’­çš„æ—¶å€™ï¼Œè®©æŸä¸ªç¥ç»å…ƒçš„æ¿€æ´»å€¼ä»¥ä¸€å®šçš„æ¦‚ç‡påœæ­¢å·¥ä½œï¼›é¢„æµ‹é˜¶æ®µï¼Œå¯¹æ¯ä¸ªç¥ç»å…ƒçš„è¾“å‡ºä¹˜ä»¥1-p (keep_prob)ã€‚<br>æ¥ä¸‹æ¥æ€è€ƒä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆè¿™ä¹ˆåšwork:é¦–å…ˆï¼Œè®­ç»ƒé˜¶æ®µéƒ¨åˆ†ç¥ç»å…ƒå¤±æ´»ï¼Œå¯¹åº”çš„ç»“æœæ˜¯éƒ¨åˆ†featuresä¸å‚ä¸è®¡ç®—ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹featuresè¿›è¡Œé‡‡æ ·ï¼›å…¶æ¬¡ï¼Œä»æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­çœ‹ï¼Œæ¯æ¬¡è®­ç»ƒï¼ˆbatch-data),éƒ½å¯¹åº”ä¸åŒçš„å¤±æ´»ç¥ç»å…ƒï¼ˆsub-model)ï¼Œå¯¹åº”çš„æ¯ä¸ªsub-modelåœ¨å•ä¸ªepochå†…ï¼Œéƒ½æ˜¯åœ¨å¯¹æ ·æœ¬è¿›è¡Œæ— æ”¾å›çš„æŠ½æ ·ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨baggingã€‚æœ€åï¼Œåœ¨é¢„æµ‹é˜¶æ®µï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç”¨â€œä¸€ä¸ªâ€å®Œæ•´çš„æ¨¡å‹æ¥æ¨¡æ‹Ÿsub-modelçš„æ±‚å¹³å‡è¿‡ç¨‹å‘¢ï¼Ÿä»sub-modelçš„è§’åº¦çœ‹ï¼Œæ¯ä¸ªsub-modelè¢«trainingçš„æ¦‚ç‡ä¸º(1-p), è€Œç¥ç»å…ƒå¯¹æ‰€æœ‰sub-modelæ˜¯å…±äº«çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æ˜¯å¦æ¿€æ´»ï¼Œæ‰€ä»¥å½’ä¸€åˆ°æ¯ä¸ªç¥ç»å…ƒä¸Šï¼Œå•ä¸ªç¥ç»å…ƒè¢«trainingï¼ˆæ¿€æ´»ï¼‰çš„æ¦‚ç‡ä¸º(1-p),è€Œsub-modelçš„æ€»æ•°æ˜¯$2^n$ï¼Œæ¯ä¸ªç¥ç»å…ƒæ±‚å¹³å‡çš„è¿‡ç¨‹å³Out_i <em> (1-p) </em> $2^n$/ $2^n$ = Out_i * (1 -p).<br>å…·ä½“å®ç°æ—¶ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯åœ¨è®­ç»ƒé˜¶æ®µå¯¹ç¥ç»å…ƒè¿›è¡Œéšæœºï¼ˆæ¦‚ç‡p)å¤±æ´»,è€Œåœ¨testå’Œevaluateæ—¶ï¼Œå¯¹ç¥ç»å…ƒçš„è¾“å‡ºä¹˜ä»¥(1-p),æ‰€ä»¥åœ¨å®ç°æ—¶ï¼Œå¯ä»¥é‡‡ç”¨ä¸€ä¸ªtrickï¼šdropoutæ—¶ï¼Œå¯¹æ ·æœ¬è¿›è¡Œmaskçš„åŒæ—¶ï¼Œå°†å…¶é™¤ä»¥(1-p),è¿™æ ·å°±å¯ä»¥ä¸€æ¬¡è®¡ç®—å®Œæˆæ‰€æœ‰é€»è¾‘ï¼ŒåŒæ—¶ï¼ŒæŠŠæ‰€æœ‰é€»è¾‘ä¿ç•™åœ¨æ•´ä¸ªå±‚ä¸­ã€‚<br><strong>tfçš„å®ç°ï¼š</strong><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">dropout</span><span class="params">(x, keep_prob, noise_shape=None, seed=None, name=None)</span>:</span>  <span class="comment"># pylint: disable=invalid-name</span></span><br><span class="line">  <span class="string">"""Computes dropout.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  With probability `keep_prob`, outputs the input element scaled up by</span></span><br><span class="line"><span class="string">  `1 / keep_prob`, otherwise outputs `0`.  The scaling is so that the expected</span></span><br><span class="line"><span class="string">  sum is unchanged.</span></span><br><span class="line"><span class="string">    ...</span></span><br><span class="line"><span class="string"> """</span></span><br><span class="line">  <span class="keyword">with</span> ops.name_scope(name, <span class="string">"dropout"</span>, [x]) <span class="keyword">as</span> name:</span><br><span class="line">    ...</span><br><span class="line">    <span class="comment"># Do nothing if we know keep_prob == 1</span></span><br><span class="line">    <span class="keyword">if</span> tensor_util.constant_value(keep_prob) == <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">    noise_shape = noise_shape <span class="keyword">if</span> noise_shape <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span> <span class="keyword">else</span> array_ops.shape(x)</span><br><span class="line">    <span class="comment"># uniform [keep_prob, 1.0 + keep_prob)</span></span><br><span class="line">    random_tensor = keep_prob</span><br><span class="line">    random_tensor += random_ops.random_uniform(noise_shape,</span><br><span class="line">                                               seed=seed,</span><br><span class="line">                                               dtype=x.dtype)</span><br><span class="line">    <span class="comment"># 0. if [keep_prob, 1.0) and 1. if [1.0, 1.0 + keep_prob)</span></span><br><span class="line">    binary_tensor = math_ops.floor(random_tensor)</span><br><span class="line">    ret = math_ops.div(x, keep_prob) * binary_tensor</span><br><span class="line">    <span class="keyword">if</span> context.in_graph_mode():</span><br><span class="line">      ret.set_shape(x.get_shape())</span><br><span class="line">    <span class="keyword">return</span> ret</span><br></pre></td></tr></table></figure></p><h1><span id="bu-tong-dropout-fang-an-dui-bi-shi-yan">ä¸åŒdropoutæ–¹æ¡ˆå¯¹æ¯”å®éªŒ</span><a href="#bu-tong-dropout-fang-an-dui-bi-shi-yan" class="header-anchor"></a></h1><p>å¦‚æœåœ¨édropouté˜¶æ®µä¸è¿›è¡Œscaledä¼šå¦‚ä½•ï¼Ÿ<br>scaled<br><img src="/2019/10/17/dropout/scaled.png" alt="scaled.png"><br>without_scaled<br><img src="/2019/10/17/dropout/without-scaled.png" alt="without_scaled.png"><br>å®éªŒä¹Ÿè¯´æ˜édropouté˜¶æ®µå¦‚æœæ²¡æœ‰è¿›è¡Œscaledï¼ˆæ±‚å¹³å‡ï¼‰ï¼Œå¯¹åº”çš„lossä¼šæ¯”trainé˜¶æ®µé«˜ï¼ŒåŒæ—¶accä¹Ÿä¼šé™ä½ã€‚</p><p><strong>æ¡¥è±†éº»è¢‹ï¼Œåˆ°è¿™é‡Œå¥½åƒå‡ºç°äº†ä¸€ç‚¹é—®é¢˜ï¼š</strong><br>æŒ‰ç…§æˆ‘ä»¬ä¸Šé¢çš„æ€è·¯ï¼Œåœ¨testå’Œevaluateé˜¶æ®µï¼Œæˆ‘ä»¬ä»å¯¹sub-modelæ±‚å¹³å‡è½¬åŒ–ä¸ºå¯¹æ¯ä¸ªç¥ç»å…ƒçš„outputè¿›è¡Œscaled downï¼Œå³ activation(x <em> W ) </em> (1 - p)ï¼Œ è€Œæˆ‘ä»¬åœ¨å®ç°æ—¶ï¼Œåªæ˜¯å¯¹xè¿›è¡Œscaled upæ“ä½œï¼Œå¦‚æœåé¢æ¥çš„å±‚çš„æ¿€æ´»å‡½æ•°æ˜¯çº¿æ€§çš„ï¼Œè¿™æ ·å¤„ç†æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ï¼Œåé¢çš„å±‚ä¸æ€»æ˜¯çº¿æ€§æ¿€æ´»å‡½æ•°ï¼Œé‚£æ­¤æ—¶ï¼Œoutput = activation(x <em> (1-p) </em> W)  != activation(x<em>W) </em> (1 - p),å³æˆ‘ä»¬å¾—åˆ°çš„è¾“å‡ºä¸æˆ‘ä»¬æƒ³è¦çš„å¹¶ä¸ä¸€æ ·ï¼ŒæŒ‰ç…§ä»¥ä¸Šçš„ç†è§£ï¼Œæˆ‘ä»¬å¯¹outputè¿›è¡Œscaled-downï¼ŒéªŒè¯ä¸€ä¸‹ä¸¤è€…çš„åŒºåˆ«ã€‚<br>scaled_input<br><img src="/2019/10/17/dropout/scaled-input.png" alt="scaled_input.png"><br>scaled_output<br><img src="/2019/10/17/dropout/scaled-output.png" alt="scaled_output.png"></p><p>çœ‹ä¸Šå»å¯¹outputè¿›è¡Œscaled-downç»“æœç¨å¾®å¥½ä¸€ç‚¹ï¼Œä½†æ˜¯å¹¶ä¸æ˜¾è‘—ï¼Œæ­¤æ—¶çš„æ¿€æ´»å‡½æ•°æ˜¯reluï¼Œè€Œä¸”æ˜¯åœ¨å€’æ•°ç¬¬äºŒå±‚ï¼Œæ¢ä¸ªæ¿€æ´»å‡½æ•°è¯•è¯•ã€‚<br>scaled_input_tanh<br><img src="/2019/10/17/dropout/scaled_input_tanh.png" alt="scaled_input_tanh.png"><br>scaled_output_tanh<br><img src="/2019/10/17/dropout/scaled_output_tanh.png" alt="scaled_output_tanh.png"><br>ç»“æœçœ‹ä¸Šå»å¯¹outputè¿›è¡Œscaled-downæ•ˆæœç¨å¾®å·®ä¸€äº›ï¼Œä½†å·®è·ä¸å¤§ã€‚<br>ä»£ç åœ°å€<a href="https://github.com/xv44586/Papers/tree/master/DeepLearning/Dropout" target="_blank" rel="noopener">https://github.com/xv44586/Papers/tree/master/DeepLearning/Dropout</a>ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è¯•è¯•å…¶ä»–æ–¹å¼ã€‚<br>æ—¢ç„¶ä¸¤ç§æ–¹å¼åœ¨ç»“æœä¸Šçœ‹ï¼Œæ•ˆæœå·®ä¸å¤šï¼Œè€Œå¯¹outputè¿›è¡Œscaled-downéœ€è¦æ·»åŠ ä¸€ä¸ªAfterDropLayerï¼Œé€»è¾‘ä¼šåœ¨ä¸åŒçš„å±‚ä¸­ï¼Œè€Œå¯¹inputsç›´æ¥è¿›è¡Œscaled-upï¼Œæ‰€æœ‰é€»è¾‘éƒ½ä¿å­˜åœ¨ä¸€ä¸ªlayerä¸­ï¼Œæ›´æ¸…æ™°ã€‚<br><strong>Butï¼ŒWhyï¼Ÿ</strong>ä¸ºä»€ä¹ˆä¸¤ç§æ–¹å¼çš„ç»“æœæ•ˆæœå·®å¼‚ä¸å¤§ï¼ŸçœŸè®©äººå¤´ç§ƒå•Šï¼</p><p><strong>è®ºæ–‡åœ°å€</strong><br><a href="http://www.jmlr.org/papers/volume15/srivastava14a/srivastava14a.pdf" target="_blank" rel="noopener">http://www.jmlr.org/papers/volume15/srivastava14a/srivastava14a.pdf</a></p><p>================================</p><h1><span id="updating">updatingâ€¦</span><a href="#updating" class="header-anchor"></a></h1><p><img src="/2019/10/17/dropout/linear.png" alt="image.png"></p><p>ä¸Šå›¾æ˜¯sigmoidå‡½æ•°åœ¨[-8,8]åŒºé—´çš„å›¾åƒï¼Œå…¶ä¸­linearæ˜¯ç”±[-8,-4,-2,2,4,8]æˆªæ–­çš„ç›´çº¿ï¼Œçœ‹å›¾å¯ä»¥çœ‹å‡ºï¼Œsigmoidåœ¨åŒºé—´å†…éƒ½éå¸¸çš„æ¥è¿‘â€linearâ€ï¼Œæ¢¯åº¦å˜åŒ–è¾ƒå¤§çš„éƒ¨åˆ†åªåœ¨å‡ ä¸ªæ‹ç‚¹å‘¨å›´ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯è¿‘ä¼¼â€linearâ€,æ‰€ä»¥ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆä¸¤ç§æ–¹å¼æœ‰å·®å¼‚ï¼Œä½†æ˜¯å·®å¼‚å¹¶ä¸å¤§ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>å¤§å››ç«èµ›ä½œå“æˆªå›¾</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="DeepLearning" scheme="https://xv44586.github.io/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>Gloveæ¨¡å‹</title>
    <link href="https://xv44586.github.io/2019/10/17/glove/"/>
    <id>https://xv44586.github.io/2019/10/17/glove/</id>
    <published>2019-10-17T01:15:58.000Z</published>
    <updated>2019-10-17T13:58:39.300Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#yi-zheng-ti-si-lu">ä¸€ã€æ•´ä½“æ€è·¯</a></li><li><a href="#er-ji-ben-jia-she">äºŒã€åŸºæœ¬å‡è®¾</a></li><li><a href="#san-mo-xing">ä¸‰ã€æ¨¡å‹</a></li><li><a href="#si-dui-bi">å››ã€å¯¹æ¯”</a></li><li><a href="#wu-si-kao">äº”ã€æ€è€ƒ</a></li><li><a href="#zai-si-kao">å†æ€è€ƒï¼š</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="yi-zheng-ti-si-lu">ä¸€ã€æ•´ä½“æ€è·¯</span><a href="#yi-zheng-ti-si-lu" class="header-anchor"></a></h1><p>è·å–è¯å‘é‡åŸºæœ¬ä¸Šæœ‰ä¸¤ç§æ€è·¯ï¼š</p><ul><li>1.åˆ©ç”¨å…¨å±€ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿›è¡ŒçŸ©é˜µåˆ†è§£ï¼ˆå¦‚LSAï¼‰æ¥è·å–è¯å‘é‡ï¼Œè¿™æ ·è·å¾—çš„è¯å‘é‡å¾€å¾€åœ¨è¯ç›¸ä¼¼æ€§ä»»åŠ¡ä¸Šè¡¨ç°ä¸å¥½ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªæ¬¡ä¼˜çš„å‘é‡ç©ºé—´ç»“æ„ï¼›</li><li>2.åˆ©ç”¨å±€éƒ¨ä¸Šä¸‹æ–‡çª—å£å•ç‹¬è®­ç»ƒï¼Œä½†æ˜¯ç»Ÿè®¡ä¿¡æ¯ä½œä¸ºæœ‰ç”¨çš„å…ˆéªŒçŸ¥è¯†ï¼Œæ²¡æœ‰å¾ˆå¥½çš„åˆ©ç”¨åˆ°ã€‚<br>Gloveï¼šç»“åˆä¸¤ç§è®­ç»ƒæ–¹å¼ï¼Œè·å–æ›´å¥½çš„è¯å‘é‡</li></ul><h1><span id="er-ji-ben-jia-she">äºŒã€åŸºæœ¬å‡è®¾</span><a href="#er-ji-ben-jia-she" class="header-anchor"></a></h1><p>è¯çš„å…±ç°æ¬¡æ•°ä¸å…¶è¯­ä¹‰çš„ç›¸å…³æ€§å¾€å¾€ä¸æ˜¯ä¸¥æ ¼æˆæ¯”ä¾‹ï¼Œæ‰€ä»¥ç›´æ¥ç”¨å…±çº¿æ€§æ¥è¡¨å¾è¯ä¹‹é—´ç›¸å…³æ€§æ•ˆæœä¸å¥½ï¼Œå› æ­¤ï¼Œä½œè€…é€šè¿‡å¼•å…¥ç¬¬ä¸‰ä¸ªè¯ï¼Œé€šè¿‡è¯ä¹‹é—´çš„å·®å¼‚æ¥åˆ»ç”»ç›¸å…³æ€§ã€‚å·®å¼‚é€‰æ‹©ç”¨ä¸¤ä¸ªè¯ä¸åŒä¸€ä¸ªè¯çš„å…±ç°æ¦‚ç‡çš„æ¬¡æ•°æ¥æ›´å¥½çš„åˆ¤æ–­è¯ä¹‹é—´çš„ç›¸å…³æ€§ã€‚æ¯”ç‡ï¼š$ratio_{i,j,k}=\frac{Pi,k}{Pj,k} $<br>çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š<br><img src="/2019/10/17/glove/table1.png" alt="image.png"><br>ice ä¸solidç›¸å…³æ€§é«˜ï¼Œè€Œsteamä¸solidç›¸å…³æ€§å¼±ï¼Œå¯¹åº”æ¯”ä¾‹å¤§äº1ï¼›iceä¸gasç›¸å…³æ€§å¼±ï¼Œsteamä¸gasç›¸å…³æ€§é«˜ï¼Œå¯¹åº”æ¯”ä¾‹å°äº1ï¼Œiceä¸steaméƒ½ä¸waterç›¸å…³ï¼Œå¯¹åº”æ¯”ä¾‹çº¦ç­‰äº1ï¼Œiceä¸steamä¸fashionéƒ½ä¸ç›¸å…³ï¼Œå¯¹åº”æ¯”ä¾‹ä¹Ÿæ˜¯çº¦ç­‰äº1.<br>ç›¸å…³æ€§çš„è§„å¾‹ï¼š<br><img src="/2019/10/17/glove/ratio.png" alt="image.png"></p><h1><span id="san-mo-xing">ä¸‰ã€æ¨¡å‹</span><a href="#san-mo-xing" class="header-anchor"></a></h1><p>æ¨¡å‹çš„æ•°å­¦å½¢å¼ä¸ºï¼š<br><img src="/2019/10/17/glove/1.png" alt><br>å…¶ä¸­wi, wj ä¸wkåˆ†å±ä¸åŒçš„ä¸¤ä¸ªè¯å‘é‡ç©ºé—´ï¼ˆå‚è€ƒskipgramï¼‰ï¼Œå¯¹äºFå‡½æ•°ï¼Œæˆ‘ä»¬å¸Œæœ›ä»–èƒ½å¤Ÿåœ¨å‘é‡ç©ºé—´å†…é¢„æµ‹pPik/Pjkè¿™ä¸ªæ¯”ç‡ï¼Œç”±äºå‘é‡ç©ºé—´çš„çº¿æ€§ç»“æ„ï¼Œæœ€è‡ªç„¶çš„æ–¹å¼å°±æ˜¯ç”¨å‘é‡çš„å·®ï¼Œå³ï¼š<br><img src="/2019/10/17/glove/2.png" alt><br>ç­‰å¼çš„å³ä¾§æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œå·¦ä¾§Få‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå¤æ‚å‡½æ•°ï¼Œè€Œæˆ‘ä»¬ä¸Šé¢æåˆ°æˆ‘ä»¬å¸Œæœ›æ•æ‰å‘é‡çš„çº¿æ€§ç»“æ„ï¼Œæ‰€ä»¥é¿å…ä½¿ç”¨å¤æ‚å‡½æ•°ï¼Œé¦–å…ˆå°†å‚æ•°åšå†…ç§¯ï¼š<br><img src="/2019/10/17/glove/3.png" alt><br>åœ¨çª—å£æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸­å¿ƒè¯ä¸ä¸Šä¸‹æ–‡è¯çš„è§’è‰²ä¼šç›¸äº’è½¬åŒ–ï¼Œä½†æ˜¯å½“è¯çš„ä½ç½®äº’æ¢åï¼Œå…¶ç›¸å…³æ€§åº”è¯¥æ˜¯ä¿æŒä¸€è‡´çš„ï¼Œæ‰€ä»¥ï¼ŒFå‡½æ•°éœ€è¦å¯¹â€œå’Œâ€æ“ä½œä¸â€œå•†â€æ“ä½œä¸ŠåŒæ€ï¼ˆè¿™é‡ŒåŒæ€çš„æ„æ€æ˜¯Få‡½æ•°åœ¨å·¦å³ä¸¤ä¾§åº”è¯¥æ˜¯ä¸€è‡´çš„ï¼Œä¹Ÿå°±æ˜¯F((wi - wj)ï¼‰=F(wi) / F(wj)ï¼š<br><img src="/2019/10/17/glove/4.png" alt><br>å…¶ä¸­ï¼š<br><img src="/2019/10/17/glove/5.png" alt></p><p>ä¸ºäº†è§£å†³ ä¸Šå¼4ï¼ŒFå‡½æ•°çš„å½¢å¼å°±æ˜¯exp(æŒ‡æ•°å½¢å¼ï¼‰ï¼Œæœ€ç»ˆæ±‚è§£åï¼š<br><img src="/2019/10/17/glove/6.png" alt><br>ä¸Šå¼ä¸­ï¼Œç­‰å¼å·¦ä¾§æ˜¯å¯¹ç§°çš„ï¼Œå³WiT<em>Wj = WjT</em>Wi, è€Œå³ä¾§æ˜¯ä¸å¯¹ç§°çš„ï¼Œå³log(pij) != log(Pji). å¦‚æœä¸Šå¼çš„å³ä¾§æ²¡æœ‰log(xi)åˆ™ç­‰å¼çš„å·¦å³å°±å¯¹ç§°äº†ï¼Œè€ƒè™‘åˆ°ä¸kæ— å…³ï¼Œæ‰€ä»¥æŠŠè¿™ä¸€é¡¹å¹¶å…¥åˆ°içš„åå·®é¡¹ä¸­ï¼Œå³ï¼š<br><img src="/2019/10/17/glove/7.png" alt><br>ç”±äºä¸Šå¼ä¸­æœ‰logï¼Œæ‰€ä»¥éœ€è¦å¤„ç†0å€¼ï¼ŒåŒæ—¶ï¼Œå¯¹äºä½é¢‘ä¸é«˜é¢‘çš„å…±çº¿è¯éƒ½ä¸èƒ½è¿‡åº¦è®­ç»ƒï¼Œäºæ˜¯ï¼Œä¼˜åŒ–ç›®æ ‡å°±å˜æˆäº†ï¼š<br><img src="/2019/10/17/glove/8.png" alt><br>å…¶ä¸­ï¼Œæƒé‡å‡½æ•°f(x)éœ€è¦æ»¡è¶³ï¼š</p><ul><li>1ï¼Œ f(0)=0</li><li>2, éå‡ä»¥é¿å…ä½é¢‘å…±ç°è¿‡åº¦è®­ç»ƒ</li><li>3ï¼ŒæŠ‘åˆ¶é«˜é¢‘å…±ç°é¿å…è¿‡åº¦è®­ç»ƒ<br>æœ€åé‡‡ç”¨çš„f(x) å½¢å¼ä¸ºï¼š<br><img src="/2019/10/17/glove/9.png" alt><br>å®éªŒä¸­ä»–ä»¬é‡‡ç”¨çš„æ˜¯xmax=100, a=3/4<br><img src="/2019/10/17/glove/scratch.png" alt="å®Œæ•´è¿‡ç¨‹"></li></ul><h1><span id="si-dui-bi">å››ã€å¯¹æ¯”</span><a href="#si-dui-bi" class="header-anchor"></a></h1><p>ä¸å±€éƒ¨çª—å£æ–¹å¼å¯¹æ¯”ï¼š<br><img src="/2019/10/17/glove/comp.png" alt="ä¸local windowå¯¹æ¯”"><br>ä¼˜åŒ–ç›®æ ‡ä½¿ç”¨ä¸åŒçš„æŸå¤±å‡½æ•°ï¼Œå¹¶å¸¦æœ‰è°ƒå’Œå‡½æ•°æ¥é™ä½é«˜é¢‘è¯çš„å½±å“ã€‚<br>è¯­ä¹‰ç›¸ä¼¼æ€§ç»“æœå¯¹æ¯”ï¼š<br><img src="/2019/10/17/glove/result.png" alt="ä¸åŒæ¨¡å‹å¯¹æ¯”"></p><h1><span id="wu-si-kao">äº”ã€æ€è€ƒ</span><a href="#wu-si-kao" class="header-anchor"></a></h1><ul><li>1.ç›¸å¯¹ä¸word2vec, Gloveå¼•å…¥äº†è¯é¢‘ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„å…¨å±€ä¿¡æ¯ã€‚</li><li>2.word2vecçš„è®­ç»ƒæ¬¡æ•°ä¸è¯é¢‘ç›¸å…³ï¼ŒGloveçš„è®­ç»ƒä¸­è¯é¢‘æ˜¯lossçš„weightï¼Œé«˜é¢‘ä½é¢‘è¯çš„overweightçš„æƒ…å†µæ›´ä½ã€‚</li><li>3.å°†åŸºäºå±€éƒ¨çª—å£çš„æ¨¡å‹ä¸­ï¼Œç›¸åŒè¯è¿›è¡Œåˆå¹¶ï¼Œä¿®æ”¹å¯¹åº”objectï¼š<img src="/2019/10/17/glove/13.png" alt><br>å…¶ä¸­Hï¼ˆï¼‰ä¸ºäº¤å‰ç†µï¼Œç›¸å¯¹Gloveçš„objectï¼š<br><img src="/2019/10/17/glove/16.png" alt><br>lossç”±äº¤å‰ç†µæ”¹ä¸ºæœ€å°äºŒä¹˜ï¼ŒXiæ”¹ä¸ºf(Xi)å‡½æ•°è¿›è¡Œè°ƒå’Œã€‚</li><li>4.Gloveä¸­çš„å·¦å³è¯å‘é‡ä¹Ÿæ˜¯ä¸¤ä¸ªä¸åŒçš„è¯å‘é‡ç©ºé—´ï¼Œä¸word2vecä¸€æ ·ï¼Œè™½ç„¶Gloveæ¨¡å‹ä¸Šçœ‹ä¸Šå»å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªè¯å‘é‡ç©ºé—´åšï¼Œä½†æ˜¯ä½œè€…è¯´æ˜¯å› ä¸ºæ›´å¥½ä¼˜åŒ–ä¸”æ¨¡å‹æ›´ç¨³å®šï¼Œä¸åŒçš„æ—¶ï¼Œæœ€åçš„ç»“æœæ˜¯å·¦å³è¯å‘é‡æ±‚å’Œï¼ˆè™½ç„¶word2vecä¹Ÿå¯ä»¥è¿™ä¹ˆåšï¼‰</li></ul><p>Demo:<a href="https://github.com/xv44586/Papers/blob/master/NLP/WordVector/GloveDemo.ipynb" target="_blank" rel="noopener">https://github.com/xv44586/Papers/blob/master/NLP/WordVector/GloveDemo.ipynb</a></p><hr><h1><span id="zai-si-kao">å†æ€è€ƒï¼š</span><a href="#zai-si-kao" class="header-anchor"></a></h1><ul><li>1.é€šå¸¸æˆ‘ä»¬éƒ½æ˜¯æ ¹æ®æ¨¡å‹æ¥æ¨å¯¼å…¶å¯¹åº”çš„æ€§è´¨ï¼Œè€ŒGloveæ˜¯å› ä¸ºå…¶åº”è¯¥å…·æœ‰çš„æ€§è´¨ï¼Œæ¥åæ¨æ¨¡å‹ï¼Œè¿™ç§æ–¹å¼ä¹Ÿç»™äººæä¾›äº†ä¸€ç§æ–°æ€è·¯ã€‚</li><li>2.ä¸ºä»€ä¹ˆä¸¤ç§æ¨¡å‹éƒ½æœ‰ä¸¤å¥—è¯å‘é‡ç©ºé—´ï¼ˆä¸­å¿ƒè¯å‘é‡å’Œä¸Šä¸‹æ–‡è¯å‘é‡ï¼‰ï¼Ÿè™½ç„¶ä¸¤ä¸ªä½œè€…éƒ½è¯´æ˜¯å› ä¸ºæ›´å¥½ä¼˜åŒ–ä¸”æ¨¡å‹æ›´ç¨³å®šï¼Œé‚£æœ‰æ²¡æœ‰æ›´åˆç†çš„ç†è®ºä¸Šçš„è§£é‡Šå‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼šå¯¹äºword2vecï¼Œæ¨¡å‹ç›´æ¥å¯¹æ¦‚ç‡p(w|context),å¦‚skipgramä¸­ï¼Œç›´æ¥å¯¹P(w2|w1)è¿›è¡Œå»ºæ¨¡ï¼Œè€ŒP(w2|w1)ä¸P(w1|w2)å¹¶ä¸ä¸€å®šç›¸ç­‰ï¼Œæ‰€ä»¥éœ€è¦é’ˆå¯¹è¯çš„ä½ç½®åŒºåˆ†ï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä¸¤å¥—ä¸ä¸€æ ·çš„è¯å‘é‡ç©ºé—´ï¼›è€ŒGloveä¸­ï¼Œå¦‚ä¸Šæ–‡ä¸­å…¬å¼ï¼ˆ6ï¼‰æ‰€ç¤ºï¼Œæ¨¡å‹å³ä¾§æœ‰ä¸€ä¸ªä¸ä½ç½®æœ‰å…³çš„å‚æ•°ï¼Œè™½ç„¶é€šè¿‡å¼•å…¥ä¸¤ä¸ªbiaså¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šæ¶ˆé™¤è¿™ä¸ªä½ç½®ç›¸å…³çš„å‚æ•°ï¼Œä½†æ˜¯è¿™ä¸ªå‚æ•°å¹¶ä¸æ˜¯å‡åŒ€åˆ†å¸ƒï¼Œæ‰€ä»¥ä»…é€šè¿‡biasä¸èƒ½å®Œå…¨è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè€Œå¼•å…¥ä¸¤ä¸ªä¸åŒçš„è¯å‘é‡ç©ºé—´ï¼Œç›¸å½“äºæ˜¯å¼•å…¥äº†ä½ç½®ä¿¡æ¯ï¼Œè¿™æ ·èƒ½æ›´å¥½çš„è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…¶æœ€æœ¬è´¨çš„åŸå› æ˜¯åœ¨çª—å£æ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼Œè¯ä½ç½®å˜åŒ–çš„åŒæ—¶ä¿¡æ¯å¯èƒ½æ˜¯ä¸å¯¹ç§°çš„ï¼Œå³ä»¥aä¸ºä¸­å¿ƒè¯çš„çª—å£ä¸­çš„båœ¨ä»¥bä¸ºçª—å£æ—¶ï¼Œaå¯èƒ½ä¸¢å¤±ã€‚</li><li>3.å¯¹äºä¸Šå¼8ï¼Œå­˜åœ¨ä¸€ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œæ¨¡å‹ä¸ºäº†æ¶ˆå»ä½ç½®ç›¸å…³å‚æ•°ï¼Œå°†å…¶å¸æ”¶è¿›biaså†…ï¼Œè€Œè¿™ä¸ªbiasçš„å¼•å…¥ï¼Œå°±å¯¼è‡´äº†ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼Œå³æ¨¡å‹ä¸é€‚å®šã€‚<br><img src="/2019/10/17/glove/ret.png" alt><br>å³å½“ä½ æ±‚å¾—ä¸€ç»„è§£åï¼Œä½ å¯ä»¥ç»™è¿™ç»„è§£åŠ ä¸Šä¸€ä¸ªå¸¸æ•°å‘é‡ï¼Œå…¶è¿˜æ˜¯ä¸€ç»„è§£ã€‚é‚£è¿™ä¸ªé—®é¢˜å°±å¾ˆä¸¥é‡äº†ï¼Œä½ æ— æ³•è¯„ä¼°ä½ å¾—åˆ°çš„è§£æ˜¯å“ªç»„è§£ã€‚å¦‚æœåŠ ä¸Šçš„æ˜¯éå¸¸å¤§çš„å¸¸æ•°å‘é‡ï¼Œé‚£è¿™ç»„è¯å‘é‡åœ¨å¾ˆå¤šåº¦é‡ä¸Šå°±å¤±å»äº†æ„ä¹‰ï¼ˆå¦‚ä½™å¼¦è·ç¦»ï¼‰<h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1>æ‘„äºåŒ—äº¬æŸæ°´åº“</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>éšæœºæ£®æ—æ¨¡å‹ä¸­æ˜¯ä¸æ˜¯æ ‘è¶Šå¤šè¶Šå¥½</title>
    <link href="https://xv44586.github.io/2019/10/17/randomForest/"/>
    <id>https://xv44586.github.io/2019/10/17/randomForest/</id>
    <published>2019-10-17T01:10:50.000Z</published>
    <updated>2019-10-17T01:13:35.251Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#sui-ji-sen-lin-zhong-shu-yue-duo-yue-hao">éšæœºæ£®æ—ä¸­æ ‘è¶Šå¤šè¶Šå¥½ï¼Ÿ</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="sui-ji-sen-lin-zhong-shu-yue-duo-yue-hao">éšæœºæ£®æ—ä¸­æ ‘è¶Šå¤šè¶Šå¥½ï¼Ÿ</span><a href="#sui-ji-sen-lin-zhong-shu-yue-duo-yue-hao" class="header-anchor"></a></h1><p>é¢è¯•æ—¶è¢«é—®åˆ°åœ¨éšæœºæ£®æ—çš„æ ‘æ˜¯å¦æ•°é‡è¶Šå¤šè¶Šå¥½ï¼Ÿå¼€å§‹åªè€ƒè™‘æ„å»ºæ›´å¤šçš„æ ‘ä¸€æ¥æµªè´¹èµ„æºï¼ŒäºŒæ¥æ•°é‡ä¸€å®šåæ¨¡å‹çš„æ€§èƒ½åŸºæœ¬ä¿æŒç¨³å®šï¼Œéšç€æ ‘çš„å¢åŠ æå‡éå¸¸å°ã€‚<br>å›æ¥ååˆæƒ³äº†æƒ³ï¼Œéšæœºæ£®æ—ä¸­é€šè¿‡å¼•å…¥éšæœºæŠ½æ ·å’ŒéšæœºæŠ½åˆ—ï¼Œä½¿æ¨¡å‹å¯¹å¼‚å¸¸ç‚¹æœ‰æ›´å¥½çš„é²æ£’æ€§ï¼Œæ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›æ›´å¼ºã€‚å¦‚æœæ˜¯æ— é™é¢—æ ‘ï¼Œé‚£å…¶å®ä¼šæŠµæ¶ˆéšæœºæ€§çš„å¼•å…¥ï¼Œæœ€åçš„æ¨¡å‹ä¼šæ˜¯ä¸€ä¸ªè¿‡æ‹Ÿåˆçš„æ¨¡å‹ï¼Œå…¶æ³›åŒ–æ€§èƒ½ä¹Ÿä¼šé™ä½ã€‚æ­¤å¤–ï¼Œå™ªéŸ³è¾ƒå¤§æ—¶ï¼Œæ¨¡å‹ä¹Ÿä¼šå­¦ä¹ åˆ°æ›´å¤šå™ªéŸ³ç›¸å…³çš„ä¿¡æ¯ï¼Œå‘ç”Ÿè¿‡æ‹Ÿåˆï¼Œé™ä½æ³›åŒ–æ€§èƒ½ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºç‰æ¸Šæ½­å…¬å›­</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="MachineLearning" scheme="https://xv44586.github.io/tags/MachineLearning/"/>
    
  </entry>
  
  <entry>
    <title>Baggingä¸ºä»€ä¹ˆèƒ½é™ä½è¿‡æ‹Ÿåˆ</title>
    <link href="https://xv44586.github.io/2019/10/16/bagging/"/>
    <id>https://xv44586.github.io/2019/10/16/bagging/</id>
    <published>2019-10-16T02:05:45.000Z</published>
    <updated>2019-10-16T02:28:15.329Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#pian-chai-yu-fang-chai">åå·®ä¸æ–¹å·®</a></li><li><a href="#jiang-di-mo-xing-guo-ni-he">é™ä½æ¨¡å‹è¿‡æ‹Ÿåˆ</a><ul><li><a href="#ji-cheng-mo-xing">é›†æˆæ¨¡å‹</a></li><li><a href="#bagging">Bagging</a></li><li><a href="#sui-ji-sen-lin">éšæœºæ£®æ—</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="pian-chai-yu-fang-chai">åå·®ä¸æ–¹å·®</span><a href="#pian-chai-yu-fang-chai" class="header-anchor"></a></h1><p><strong>åå·® (bias)</strong><br><img src="/2019/10/16/bagging/fx.png" alt><br>å³æ¨¡å‹çš„æœŸæœ›é¢„æµ‹ä¸çœŸå®å€¼ä¹‹é—´çš„å·®å¼‚ã€‚</p><p><strong>æ–¹å·® (variance)</strong><br><img src="/2019/10/156/bagging/var.png" alt><br>æ–¹å·®é€šå¸¸è¡¡é‡æ¨¡å‹å¯¹<strong>ä¸åŒæ•°æ®é›†</strong>çš„æ•æ„Ÿç¨‹åº¦ï¼Œä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯è¡¡é‡æ¨¡å‹çš„ä¸ç¨³å®šæ€§ã€‚è‹¥æ–¹å·®å¤§ï¼Œåˆ™è¡¨ç¤ºæ•°æ®çš„å¾®å°å˜åŠ¨å°±èƒ½å¯¼è‡´å­¦ä¹ å‡ºçš„æ¨¡å‹äº§ç”Ÿè¾ƒå¤§å·®å¼‚ï¼Œå³å¯¹åº”çš„æ¨¡å‹ç»“æ„é£é™©æ›´é«˜ã€‚</p><p>æœ‰äº†åå·®å’Œæ–¹å·®çš„å®šä¹‰ï¼Œæˆ‘ä»¬å°±èƒ½æ¨å¯¼å‡ºæ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®ï¼š</p><p><img src="/2019/10/16/bagging/ed.png" alt><br>å¦‚æœæˆ‘ä»¬èƒ½åœ¨ä¿æŒbiasåŸºæœ¬ä¸å˜æ—¶ï¼Œé™ä½varianceï¼Œåˆ™æ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®é™ä½ï¼Œä»è€Œé™ä½æ¨¡å‹è¿‡æ‹Ÿåˆé£é™©ã€‚</p><h1><span id="jiang-di-mo-xing-guo-ni-he">é™ä½æ¨¡å‹è¿‡æ‹Ÿåˆ</span><a href="#jiang-di-mo-xing-guo-ni-he" class="header-anchor"></a></h1><h2><span id="ji-cheng-mo-xing">é›†æˆæ¨¡å‹</span><a href="#ji-cheng-mo-xing" class="header-anchor"></a></h2><p>å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªé›†æˆæ¨¡å‹ï¼Œå…¶è¿‡ç¨‹ä¸ºä»æ•´ä½“æ ·æœ¬ä¸­è¿›è¡Œé‡‡æ ·ï¼Œå¾—åˆ°nä»½ç‹¬ç«‹ä¸”ä¸æ•´ä½“åŒåˆ†å¸ƒçš„æ ·æœ¬é›†ï¼Œç„¶åé€‰æ‹©åŒæ ·çš„æ¨¡å‹è¿›è¡Œè®­ç»ƒï¼Œæœ€åå–å¹³å‡ã€‚ç”±äºå•ä¸ªæ¨¡å‹å¯¹åº”æ•°æ®åŒåˆ†å¸ƒï¼Œæ¨¡å‹ç›¸åŒï¼Œåˆ™å¯¹åº”çš„biaså’Œvarianceç›¸åŒï¼Œè€Œ</p><p><img src="/2019/10/16/bagging/exi.png" alt></p><p>æ‰€ä»¥æœ€ç»ˆæ¨¡å‹çš„biasä¸å•æ¨¡å‹çš„biasç›¸åŒï¼›å¦ä¸€æ–¹é¢ï¼Œç”±äºå„ä¸ªå­æ¨¡å‹ç‹¬ç«‹ï¼Œåˆ™</p><p><img src="/2019/10/16/bagging/varn.png" alt></p><p>æ­¤æ—¶å¯ä»¥æ˜¾è‘—é™ä½æ¨¡å‹çš„varianceï¼Œæ ¹æ®æ¨¡å‹æ³›åŒ–è¯¯å·®æœŸæœ›å…¬å¼ï¼Œæ­¤æ—¶çš„é›†æˆæ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®å°†å°äºå•æ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®ï¼Œä»è€Œé™ä½äº†æ¨¡å‹çš„è¿‡æ‹Ÿåˆã€‚</p><h2><span id="bagging">Bagging</span><a href="#bagging" class="header-anchor"></a></h2><p>é’ˆå¯¹ä¸Šè¿°é›†æˆæ¨¡å‹ï¼Œå½“å„ä¸ªå­æ¨¡å‹ç›¸åŒæ—¶ï¼Œ</p><p><img src="/2019/10/16/bagging/varxi.png" alt><br>æ­¤æ—¶ä¸ä¼šé™ä½varianceã€‚</p><p>å¯¹åº”å…¬å¼ï¼šè®¾æœ‰nä¸ªéšæœºå˜é‡ï¼Œä¸¤ä¸¤å˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ä¸ºğœŒï¼Œåˆ™æ–¹å·®ä¸º</p><p><img src="/2019/10/16/bagging/p.png" alt><br>Baggingå¯¹æ ·æœ¬é‡é‡‡æ ·ï¼Œå¯¹æ¯ä¸€é‡é‡‡æ ·å¾—åˆ°çš„å­æ ·æœ¬é›†è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œæœ€åå–å¹³å‡ã€‚ç”±äºå­æ ·æœ¬é›†æœ‰ç›¸ä¼¼æ€§ï¼ŒåŒæ—¶ä¹Ÿä½¿ç”¨åŒç§æ¨¡å‹ï¼Œåˆ™å„ä¸ªå­æ¨¡å‹æœ‰ç›¸ä¼¼çš„biaså’Œvarianceï¼Œç”±ä¸Šé¢ç»“è®ºå¯çŸ¥ï¼Œæ­¤æ—¶çš„biasä¸å•æ¨¡å‹è¿‘ä¼¼ç›¸åŒï¼Œæ‰€ä»¥baggingä¸èƒ½æ˜¾è‘—é™ä½biasã€‚ï¼ˆå› æ­¤åœ¨é€‰æ‹©æ¨¡å‹æ—¶ï¼Œéœ€è¦é€‰æ‹©biaså°çš„æ¨¡å‹ï¼‰å­æ¨¡å‹ä»‹äºç›¸åŒä¸ç‹¬ç«‹ä¸¤ä¸ªæç«¯æƒ…å†µä¹‹é—´ï¼Œæ‰€ä»¥å¯¹åº”varianceä¼šå¤„äºvar(x) ä¸ var(x)/nä¹‹é—´ï¼Œå³é€šè¿‡é™ä½ä¸Šè¿°å…¬å¼ä¸­çš„ç¬¬äºŒé¡¹é™ä½æ•´ä½“æ–¹å·®ã€‚<br>è€Œæ ¹æ®æ¨¡å‹æœŸæœ›æ³›åŒ–è¯¯å·®å…¬å¼ï¼Œç”±äºæ–¹å·®çš„é™ä½ï¼Œä¹Ÿèƒ½å¸¦æ¥æœ€ç»ˆæ¨¡å‹çš„æœŸæœ›æ³›åŒ–è¯¯å·®çš„é™ä½ï¼Œä»è€Œé™ä½è¿‡æ‹Ÿåˆã€‚</p><h2><span id="sui-ji-sen-lin">éšæœºæ£®æ—</span><a href="#sui-ji-sen-lin" class="header-anchor"></a></h2><p>éšæœºæ£®æ—æ˜¯ä¸€ç§å¸¸ç”¨çš„Baggingæ¨¡å‹ï¼Œå…¶é€šè¿‡å¯¹æ ·æœ¬è¿›è¡Œæœ‰æ”¾å›çš„é‡‡æ ·ï¼Œæ„é€ nä¸ªæ ·æœ¬é›†ï¼ŒåŒæ—¶å¯¹ç‰¹å¾åˆ—è¿›è¡Œé‡‡æ ·åè¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œå³åŒæ—¶é™ä½ä¸Šè¿°å…¬å¼ä¸­çš„ä¸¤é¡¹ï¼Œæ¥é™ä½æ–¹å·®ï¼Œä»è€Œé™ä½è¿‡æ‹Ÿåˆã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºæ­å·é’èŠå</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="MachineLearning" scheme="https://xv44586.github.io/tags/MachineLearning/"/>
    
  </entry>
  
  <entry>
    <title>XgbooståŸç†</title>
    <link href="https://xv44586.github.io/2019/10/14/xgb/"/>
    <id>https://xv44586.github.io/2019/10/14/xgb/</id>
    <published>2019-10-14T00:39:38.000Z</published>
    <updated>2019-10-14T01:10:47.152Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#xu-lun">ç»ªè®º</a></li><li><a href="#suan-fa-yuan-li">ç®—æ³•åŸç†</a><ul><li><a href="#xue-xi-mu-biao">å­¦ä¹ ç›®æ ‡</a><ul><li><a href="#jie-dian-hua-fen">èŠ‚ç‚¹åˆ’åˆ†</a></li><li><a href="#suo-jian-yu-lie-cai-yang">ç¼©å‡ä¸åˆ—é‡‡æ ·</a></li><li><a href="#xun-zhao-zui-jia-fen-ge-dian-suan-fa">å¯»æ‰¾æœ€ä½³åˆ†å‰²ç‚¹ç®—æ³•</a></li><li><a href="#dai-quan-chong-de-fen-wei-shu-lue-tu-weighted-quantile-sketch-suan-fa">å¸¦æƒé‡çš„åˆ†ä½æ•°ç•¥å›¾ï¼ˆweighted quantile sketchï¼‰ç®—æ³•</a></li><li><a href="#xi-shu-zi-gua-ying-fen-ge-ce-lue">ç¨€ç–è‡ªé€‚åº”åˆ†å‰²ç­–ç•¥</a></li><li><a href="#xgboost-de-you-que-dian">XGBoostçš„ä¼˜ç¼ºç‚¹</a></li></ul></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="xu-lun">ç»ªè®º</span><a href="#xu-lun" class="header-anchor"></a></h1><p>åœ¨å®é™…åº”ç”¨çš„æœºå™¨å­¦ä¹ æ–¹æ³•é‡Œï¼ŒGradientTree Boosting ï¼ˆGBDTï¼‰æ˜¯ä¸€ä¸ªåœ¨å¾ˆå¤šåº”ç”¨é‡Œéƒ½å¾ˆå‡ºå½©çš„æŠ€æœ¯ã€‚XGBoostæ˜¯ä¸€å¥—æå‡æ ‘å¯æ‰©å±•çš„æœºå™¨å­¦ä¹ ç³»ç»Ÿã€‚2015å¹´Kaggleå‘å¸ƒçš„29ä¸ªè·èƒœæ–¹æ³•é‡Œæœ‰17ä¸ªç”¨äº†XGBoostã€‚åœ¨è¿™äº›æ–¹æ¡ˆé‡Œï¼Œæœ‰8ä¸ªä»…ç”¨äº†XGBoostï¼Œå¦å¤–çš„å¤§å¤šæ•°ç”¨å®ƒç»“åˆäº†ç¥ç»ç½‘ç»œã€‚å¯¹æ¯”æ¥çœ‹ï¼Œç¬¬äºŒæµè¡Œçš„æ–¹æ³•ï¼Œæ·±åº¦ç¥ç»ç½‘ç»œï¼Œåªè¢«ç”¨äº†11æ¬¡ã€‚è¿™ä¸ªç³»ç»Ÿçš„æˆåŠŸæ€§ä¹Ÿè¢«KDDCup2015æ‰€è§è¯äº†ï¼Œå‰åçš„é˜Ÿä¼éƒ½ç”¨äº†XGBoostã€‚æ­¤å¤–ï¼Œæ®èƒœå‡ºçš„é˜Ÿä¼è¯´ï¼Œå¾ˆå°‘æœ‰åˆ«çš„é›†æˆå­¦ä¹ æ–¹æ³•æ•ˆæœèƒ½è¶…è¿‡è°ƒå¥½å‚çš„XGBoostã€‚<br>ä¸»è¦åˆ›æ–°ç‚¹ï¼š</p><ul><li>è®¾è®¡å’Œæ„å»ºé«˜åº¦å¯æ‰©å±•çš„ç«¯åˆ°ç«¯æå‡æ ‘ç³»ç»Ÿã€‚ </li><li>æå‡ºäº†ä¸€ä¸ªç†è®ºä¸Šåˆç†çš„åŠ æƒåˆ†ä½æ•°ç•¥å›¾ï¼ˆweighted  quantile sketch ï¼‰æ¥è®¡ç®—å€™é€‰é›†ã€‚ </li><li>å¼•å…¥äº†ä¸€ç§æ–°é¢–çš„ç¨€ç–æ„ŸçŸ¥ç®—æ³•ç”¨äºå¹¶è¡Œæ ‘å­¦ä¹ ã€‚ ä»¤ç¼ºå¤±å€¼æœ‰é»˜è®¤æ–¹å‘ã€‚</li><li>æå‡ºäº†ä¸€ä¸ªæœ‰æ•ˆçš„ç”¨äºæ ¸å¤–æ ‘å½¢å­¦ä¹ çš„ç¼“å­˜æ„ŸçŸ¥å—ç»“æ„ã€‚ ç”¨ç¼“å­˜åŠ é€Ÿå¯»æ‰¾æ’åºåè¢«æ‰“ä¹±çš„ç´¢å¼•çš„åˆ—æ•°æ®çš„è¿‡ç¨‹ã€‚</li></ul><h1><span id="suan-fa-yuan-li">ç®—æ³•åŸç†</span><a href="#suan-fa-yuan-li" class="header-anchor"></a></h1><h2><span id="xue-xi-mu-biao">å­¦ä¹ ç›®æ ‡</span><a href="#xue-xi-mu-biao" class="header-anchor"></a></h2><p>é¦–å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•é¢„æµ‹çš„ï¼š<br>XGBoostæ˜¯ä¸€ä¸ªæ ‘é›†æˆæ¨¡å‹ï¼Œä»–å°†Kï¼ˆæ ‘çš„ä¸ªæ•°ï¼‰ä¸ªæ ‘çš„ç»“æœè¿›è¡Œæ±‚å’Œï¼Œä½œä¸ºæœ€ç»ˆçš„é¢„æµ‹å€¼ã€‚å³ï¼š<br><img src="/2019/10/14/xgb/target.png" alt><br>å‡è®¾ç»™å®šçš„æ ·æœ¬é›†æœ‰nä¸ªæ ·æœ¬ï¼Œmä¸ªç‰¹å¾ï¼Œåˆ™<br><img src="/2019/10/14/xgb/feature.png" alt><br>å…¶ä¸­ xi è¡¨ç¤ºç¬¬iä¸ªæ ·æœ¬ï¼Œyi è¡¨ç¤ºç¬¬iä¸ªç±»åˆ«æ ‡ç­¾ï¼Œå›å½’æ ‘ï¼ˆCARTæ ‘ï¼‰çš„ç©ºé—´Fä¸º<br><img src="/2019/10/14/xgb/F.png" alt><br>å…¶ä¸­qä»£è¡¨æ¯æ£µæ ‘çš„ç»“æ„ï¼Œä»–å°†æ ·æœ¬æ˜ å°„åˆ°å¯¹åº”çš„å¶èŠ‚ç‚¹ï¼›Tæ˜¯å¯¹åº”æ ‘çš„å¶èŠ‚ç‚¹ä¸ªæ•°ï¼›f(x)å¯¹åº”æ ‘çš„ç»“æ„qå’Œå¶èŠ‚ç‚¹æƒé‡wã€‚æ‰€ä»¥XGBoostçš„é¢„æµ‹å€¼æ˜¯æ¯æ£µæ ‘å¯¹åº”çš„å¶èŠ‚ç‚¹çš„å€¼çš„å’Œã€‚<br>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å­¦ä¹ è¿™kä¸ªæ ‘ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å°åŒ–ä¸‹é¢è¿™ä¸ªå¸¦æ­£åˆ™é¡¹çš„ç›®æ ‡å‡½æ•°ï¼š<br><img src="/2019/10/14/xgb/target_n.png" alt><br><img src="/2019/10/14/xgb/text.png" alt><br>ä¸Šå¼çš„ç¬¬ä¸€é¡¹æ˜¯æŸå¤±è¯¯å·®ï¼Œå¦‚MSEå’Œlogisticç­‰ï¼Œç¬¬äºŒé¡¹æ˜¯æ­£åˆ™é¡¹ï¼Œæ§åˆ¶æ ‘çš„å¤æ‚åº¦ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚<br>å¼å­2ä¸­ç›®æ ‡å‡½æ•°çš„ä¼˜åŒ–å‚æ•°æ˜¯æ¨¡å‹ï¼ˆfunctionsï¼‰ï¼Œä¸èƒ½ä½¿ç”¨ä¼ ç»Ÿçš„ä¼˜åŒ–æ–¹æ³•åœ¨æ¬§æ°ç©ºé—´ä¼˜åŒ–ï¼Œä½†æ˜¯æ¨¡å‹åœ¨è®­ç»ƒæ—¶ï¼Œæ˜¯ä¸€ç§åŠ æ³•çš„æ–¹å¼ï¼ˆadditive mannerï¼‰ï¼Œæ‰€ä»¥åœ¨ç¬¬tè½®ï¼Œæˆ‘ä»¬å°†fï¼ˆtï¼‰åŠ å…¥æ¨¡å‹ï¼Œæœ€å°åŒ–ä¸‹é¢çš„ç›®æ ‡å‡½æ•°ï¼š<br><img src="/2019/10/14/xgb/min.png" alt><br>è®­ç»ƒæ—¶ï¼Œæ–°çš„ä¸€è½®åŠ å…¥ä¸€ä¸ªæ–°çš„få‡½æ•°ï¼Œæ¥æœ€å¤§åŒ–çš„é™ä½ç›®æ ‡å‡½æ•°ï¼Œåœ¨ç¬¬tè½®ï¼Œæˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°ä¸º ï¼š<br><img src="/2019/10/14/xgb/lt.png" alt><br>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç›®æ ‡å‡½æ•°è¿›è¡Œæ³°å‹’å±•å¼€ï¼Œå–å‰ä¸‰é¡¹ï¼Œç§»é™¤é«˜é˜¶å°æ— ç©·å°é¡¹ï¼Œæœ€åæˆ‘ä»¬çš„ç›®æ ‡å‡½æ•°è½¬åŒ–ä¸ºï¼š<br><img src="/2019/10/14/xgb/lt_merge.png" alt><br>å…¶ä¸­ï¼š<br><img src="/2019/10/14/xgb/gi.png" alt><br>æ¥ä¸‹æ¥æˆ‘ä»¬æ±‚è§£è¿™ä¸ªç›®æ ‡å‡½æ•°<br><img src="/2019/10/14/xgb/scratch.png" alt></p><p>æœ€ç»ˆæˆ‘ä»¬å°†å…³äºæ ‘æ¨¡å‹çš„è¿­ä»£è½¬åŒ–ä¸ºå…³äºæ ‘çš„å¶å­èŠ‚ç‚¹çš„è¿­ä»£ï¼Œå¹¶æ±‚å‡ºæœ€ä¼˜çš„å¶èŠ‚ç‚¹åˆ†æ•°ã€‚å°†å¶èŠ‚ç‚¹çš„æœ€ä¼˜å€¼å¸¦å…¥ç›®æ ‡å‡½æ•°ï¼Œæœ€ç»ˆç›®æ ‡å‡½æ•°çš„å½¢å¼ä¸ºï¼š<br><img src="/2019/10/14/xgb/ltq.png" alt><br>ä¸Šå¼å¯ä»¥ä½œä¸ºå¾—åˆ†å‡½æ•°ç”¨æ¥æµ‹é‡æ ‘ç»“æ„qçš„è´¨é‡ï¼Œä»–ç±»ä¼¼ä¸å†³ç­–æ ‘çš„ä¸çº¯åº¦å¾—åˆ†ï¼Œåªæ˜¯ä»–é€šè¿‡æ›´å¹¿æ³›çš„ç›®æ ‡å‡½æ•°å¾—åˆ°<br><img src="/2019/10/14/xgb/arc.png" alt><br>é€šè¿‡ä¸Šå¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æ ‘ç»“æ„ç¡®å®šæ—¶ï¼Œæ ‘çš„ç»“æ„å¾—åˆ†åªä¸å…¶ä¸€é˜¶å€’æ•°å’ŒäºŒé˜¶å€’æ•°æœ‰å…³ï¼Œå¾—åˆ†è¶Šå°ï¼Œè¯´æ˜ç»“æ„è¶Šå¥½ã€‚</p><h3><span id="jie-dian-hua-fen">èŠ‚ç‚¹åˆ’åˆ†</span><a href="#jie-dian-hua-fen" class="header-anchor"></a></h3><p>è€Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ— æ³•æšä¸¾æ‰€æœ‰å¯èƒ½çš„æ ‘ç»“æ„ç„¶åé€‰å–æœ€ä¼˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€‰æ‹©ç”¨ä¸€ç§è´ªå©ªç®—æ³•æ¥ä»£æ›¿ï¼šæˆ‘ä»¬ä»å•ä¸ªå¶èŠ‚ç‚¹å¼€å§‹ï¼Œè¿­ä»£åˆ†è£‚æ¥ç»™æ ‘æ·»åŠ èŠ‚ç‚¹ã€‚èŠ‚ç‚¹åˆ‡åˆ†åçš„æŸå¤±å‡½æ•°ï¼š<br><img src="/2019/10/14/xgb/split.png" alt><br>ä¸Šå¼ç”¨æ¥è¯„ä¼°åˆ‡åˆ†åçš„æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾ä¸€ä¸ªç‰¹å¾åŠå¯¹åº”çš„å€¼ï¼Œä½¿å¾—åˆ‡åˆ†åçš„loss reductionæœ€å¤§ã€‚Î³é™¤äº†æ§åˆ¶æ ‘çš„å¤æ‚åº¦ï¼Œå¦ä¸€ä¸ªä½œç”¨æ˜¯ä½œä¸ºé˜ˆå€¼ï¼Œåªæœ‰å½“åˆ†è£‚åçš„å¢ç›Šå¤§äºÎ³æ—¶ï¼Œæ‰é€‰æ‹©åˆ†è£‚ï¼Œèµ·åˆ°äº†é¢„å‰ªæçš„ä½œç”¨ã€‚</p><h3><span id="suo-jian-yu-lie-cai-yang">ç¼©å‡ä¸åˆ—é‡‡æ ·</span><a href="#suo-jian-yu-lie-cai-yang" class="header-anchor"></a></h3><p>é™¤äº†åœ¨ç›®æ ‡å‡½æ•°ä¸­å¼•å…¥æ­£åˆ™é¡¹ï¼Œä¸ºäº†é˜²æ­¢è¿‡æ‹Ÿåˆï¼ŒXGBoostè¿˜å¼•å…¥äº†ç¼©å‡(shrinkage)å’Œåˆ—æŠ½æ ·ï¼ˆcolumn subsamplingï¼‰ï¼Œé€šè¿‡åœ¨æ¯ä¸€æ­¥çš„boostingä¸­å¼•å…¥ç¼©å‡ç³»æ•°ï¼Œé™ä½æ¯ä¸ªæ ‘å’Œå¶å­å¯¹ç»“æœçš„å½±å“ï¼›åˆ—é‡‡æ ·æ˜¯å€Ÿé‰´éšæœºæ£®æ—ä¸­çš„æ€æƒ³ï¼Œæ ¹æ®åé¦ˆï¼Œåˆ—é‡‡æ ·æœ‰æ—¶ç”šè‡³æ¯”è¡ŒæŠ½æ ·æ•ˆæœæ›´å¥½ï¼ŒåŒæ—¶ï¼Œé€šè¿‡åˆ—é‡‡æ ·èƒ½åŠ é€Ÿè®¡ç®—ã€‚</p><h3><span id="xun-zhao-zui-jia-fen-ge-dian-suan-fa">å¯»æ‰¾æœ€ä½³åˆ†å‰²ç‚¹ç®—æ³•</span><a href="#xun-zhao-zui-jia-fen-ge-dian-suan-fa" class="header-anchor"></a></h3><p>æ ‘æ¨¡å‹å­¦ä¹ çš„ä¸€ä¸ªå…³é”®é—®é¢˜æ˜¯å¦‚ä½•å¯»æ‰¾æœ€ä¼˜åˆ†å‰²ç‚¹ã€‚ç¬¬ä¸€ç§æ–¹æ³•ç§°ä¸ºåŸºæœ¬ç²¾ç¡®è´ªå¿ƒç®—æ³•ï¼ˆexact greedy algorithmï¼‰ï¼šæšä¸¾æ‰€æœ‰ç‰¹å¾çš„æ‰€æœ‰å¯èƒ½åˆ’åˆ†ï¼Œå¯»æ‰¾æœ€ä¼˜åˆ†å‰²ç‚¹ã€‚è¯¥ç®—æ³•è¦æ±‚ä¸ºè¿ç»­ç‰¹å¾æšä¸¾æ‰€æœ‰å¯èƒ½çš„åˆ‡åˆ†ï¼Œè¿™ä¸ªå¯¹è®¡ç®—æœºè¦æ±‚å¾ˆé«˜ï¼Œä¸ºäº†æœ‰æ•ˆåšåˆ°è¿™ä¸€ç‚¹ï¼ŒXGBoosté¦–å…ˆå¯¹ç‰¹å¾è¿›è¡Œæ’åºï¼Œç„¶åé¡ºåºè®¿é—®æ•°æ®ï¼Œç´¯è®¡loss reductionä¸­çš„æ¢¯åº¦ç»Ÿè®¡é‡ï¼ˆå¼6ï¼‰ã€‚<br><img src="/2019/10/14/xgb/max.png" alt><br>ä¸Šè¿°æ–¹æ³•æ˜¯ä¸€ä¸ªéå¸¸ç²¾ç¡®çš„åˆ†å‰²ç‚¹ç®—æ³•ï¼Œä½†æ˜¯å½“æ•°æ®æ— æ³•å®Œå…¨åŠ è½½è¿›å†…å­˜æˆ–åˆ†å¸ƒå¼çš„æƒ…å†µä¸‹ï¼Œè¯¥ç®—æ³•å°±ä¸æ˜¯ç‰¹åˆ«æœ‰æ•ˆäº†ã€‚ä¸ºäº†æ”¯æŒè¿™ä¸¤ç§åœºæ™¯ï¼Œæå‡ºäº†ä¸€ç§è¿‘ä¼¼ç®—æ³•ï¼šæ ¹æ®ç‰¹å¾åˆ†å¸ƒçš„ç™¾åˆ†ä½æ•°ï¼Œæå‡ºnä¸ªå€™é€‰åˆ‡åˆ†ç‚¹ï¼Œç„¶åå°†æ ·æœ¬æ˜ å°„åˆ°å¯¹åº”çš„ä¸¤ä¸ªç›¸é‚»çš„åˆ‡åˆ†ç‚¹ç»„æˆçš„æ¡¶ä¸­ï¼Œèšä¼šç»Ÿè®¡å€¼ï¼Œé€šè¿‡èšä¼šåçš„ç»Ÿè®¡å€¼åŠæ¨èåˆ†å‰²ç‚¹ï¼Œè®¡ç®—æœ€ä½³åˆ†å‰²ç‚¹ã€‚è¯¥ç®—æ³•æœ‰ä¸¤ç§å½¢å¼ï¼šå…¨å±€è¿‘ä¼¼å’Œå±€éƒ¨è¿‘ä¼¼ï¼Œå…¶å·®åˆ«æ˜¯å…¨å±€è¿‘ä¼¼æ˜¯åœ¨ç”Ÿæˆä¸€æ£µæ ‘ä¹‹å‰ï¼Œå¯¹å„ä¸ªç‰¹å¾è®¡ç®—å…¶åˆ†ä½ç‚¹å¹¶åˆ’åˆ†æ ·æœ¬ï¼›å±€éƒ¨è¿‘ä¼¼æ˜¯åœ¨æ¯ä¸ªèŠ‚ç‚¹è¿›è¡Œåˆ†è£‚æ—¶é‡‡ç”¨è¿‘ä¼¼ç®—æ³•ã€‚è¿‘ä¼¼ç®—æ³•çš„æµç¨‹ï¼š<br><img src="/2019/10/14/xgb/appr.png" alt></p><h3><span id="dai-quan-chong-de-fen-wei-shu-lue-tu-weighted-quantile-sketch-suan-fa">å¸¦æƒé‡çš„åˆ†ä½æ•°ç•¥å›¾ï¼ˆweighted quantile sketchï¼‰ç®—æ³•</span><a href="#dai-quan-chong-de-fen-wei-shu-lue-tu-weighted-quantile-sketch-suan-fa" class="header-anchor"></a></h3><p>åœ¨è¿‘ä¼¼ç®—æ³•ä¸­é‡è¦çš„ä¸€æ­¥æ˜¯å¯»æ‰¾å€™é€‰åˆ†å‰²ç‚¹ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œç‰¹å¾çš„ç™¾åˆ†ä½æ•°ä½¿æ•°æ®å‡åŒ€çš„åˆ†å¸ƒåœ¨æ•°æ®ä¸Šã€‚ç°åœ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ•°æ®é›†Dk = {(x1k, h1), (x2k, h2) â€¦ }ä»£è¡¨æ ·æœ¬çš„ç¬¬kä¸ªç‰¹å¾åŠå…¶å¯¹åº”çš„äºŒé˜¶æ¢¯åº¦ï¼Œç°åœ¨æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°rkï¼š<br><img src="/2019/10/14/xgb/rk.png" alt><br>ä¸Šå¼ä»£è¡¨ç‰¹å¾kå°äºç‰¹å¾zçš„æ ·æœ¬æ¯”ä¾‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯å¯»æ‰¾å€™é€‰åˆ†å‰²ç‚¹{sk1, sk2,â€¦}ï¼Œä½¿å®ƒæ»¡è¶³ï¼š<br><img src="/2019/10/14/xgb/rksk.png" alt><br>å…¶ä¸­eæ˜¯å€™é€‰å› å­ï¼Œå³åˆ‡åˆ†çš„ç™¾åˆ†ä½æ•°ï¼Œæ‰€ä»¥æœ€åæœ‰å¤§çº¦1/eä¸ªå€™é€‰åˆ†å‰²ç‚¹ã€‚é‚£ä¸ºä»€ä¹ˆå¯ä»¥ç”¨äºŒé˜¶å€’æ•°hæ¥ä»£æ›¿æƒé‡å‘¢ï¼Ÿæˆ‘ä»¬å°†ç›®æ ‡å‡½æ•°å˜å½¢ä¸º<br><img src="/2019/10/14/xgb/new_target.png" alt><br>ä¸Šå¼å¯ä»¥çœ‹æˆæ˜¯labelæ˜¯gi/hiï¼Œæƒé‡æ˜¯hiçš„å¹³æ–¹æŸå¤±ï¼Œè¿™å¯¹äºå¤§æ•°æ®ä¸‹å¯»æ‰¾åˆ’åˆ†ç‚¹éå¸¸é‡è¦ã€‚åœ¨ä»¥å¾€çš„åˆ†ä½æ³•ä¸­ï¼Œæ²¡æœ‰è€ƒè™‘æƒå€¼ï¼Œè®¸å¤šå­˜åœ¨çš„è¿‘ä¼¼æ–¹æ³•ä¸­ï¼Œæˆ–è€…é€šè¿‡æ’åºæˆ–è€…é€šè¿‡å¯å‘å¼æ–¹æ³•ï¼ˆæ²¡æœ‰ç†è®ºä¿è¯ï¼‰åˆ’åˆ†ã€‚æ–‡ç« çš„è´¡çŒ®æ˜¯æä¾›äº†ç†è®ºä¿è¯çš„åˆ†å¸ƒå¼åŠ æƒåˆ†ä½æ³•ã€‚<br>ä¸ºä»€ä¹ˆè¦å¯¹ç›®æ ‡å‡½æ•°è¿›è¡Œç±»ä¼¼çš„å˜å½¢ï¼Ÿæ€è€ƒä¸€ä¸‹æˆ‘ä»¬åˆ’åˆ†åˆ†å‰²ç‚¹çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å¸Œæœ›å‡åŒ€çš„åˆ’åˆ†lossï¼Œè€Œä¸åŒæ ·æœ¬å¯¹lossçš„æƒé‡ä¸åŒï¼Œä¸è€ƒè™‘æƒé‡ç›´æ¥æŒ‰æ ·æœ¬åˆ’åˆ†æ—¶ï¼Œlossçš„åˆ†å¸ƒæ˜¯ä¸å‡åŒ€çš„ï¼Œå¯¹åº”çš„åˆ†ä½ç‚¹å°±ä¼šæœ‰åå·®ã€‚<br>PSï¼šæ–‡ç« ä¸­çš„è¿‘ä¼¼å˜å½¢æ„Ÿè§‰ä¸å¤ªè¿‘ä¼¼ï¼Œæ›´è¿‘ä¼¼çš„å˜å½¢å¯èƒ½æ˜¯<img src="/2019/10/14/xgb/trans.png" alt><br>å³labelæ˜¯-gi/hiçš„å¸¦æƒé‡å¹³æ–¹æŸå¤±ã€‚ä¸çŸ¥é“æ–‡ç« å†…ä¸ºå•¥æ˜¯å¦ä¸€ç§å½¢å¼</p><h3><span id="xi-shu-zi-gua-ying-fen-ge-ce-lue">ç¨€ç–è‡ªé€‚åº”åˆ†å‰²ç­–ç•¥</span><a href="#xi-shu-zi-gua-ying-fen-ge-ce-lue" class="header-anchor"></a></h3><p>å®é™…æƒ…å†µä¸‹é¿å…ä¸äº†æ•°æ®ç¨€ç–ï¼Œäº§ç”Ÿæ•°æ®ç¨€ç–çš„åŸå› ä¸»è¦æœ‰ä¸‰ä¸ªï¼š1ï¼Œæ•°æ®ç¼ºå¤±ï¼Œ2ï¼Œç»Ÿè®¡ä¸Šä¸º0ï¼Œ3ï¼Œone-hotç¼–ç ã€‚è€Œé€‚åº”ç¨€ç–æ•°æ®éå¸¸é‡è¦ã€‚XGBoostæå‡ºçš„æ˜¯åœ¨è®¡ç®—åˆ†å‰²åçš„åˆ†æ•°æ—¶ï¼Œé‡åˆ°ç¼ºå¤±å€¼ï¼Œåˆ†åˆ«å°†ç¼ºå¤±å€¼å¸¦å…¥å·¦å³ä¸¤ä¸ªåˆ†å‰²èŠ‚ç‚¹ï¼Œç„¶åå–æœ€å¤§å€¼çš„æ–¹å‘ä¸ºå…¶é»˜è®¤æ–¹å‘ã€‚<br><img src="/2019/10/14/xgb/gain.png" alt><br>ä»¥ä¸Šå°±æ˜¯XGBoostæ‰€æ¶‰åŠçš„ç®—æ³•åŸç†ã€‚</p><h3><span id="xgboost-de-you-que-dian">XGBoostçš„ä¼˜ç¼ºç‚¹</span><a href="#xgboost-de-you-que-dian" class="header-anchor"></a></h3><p><strong>ä¸GBDTå¯¹æ¯”</strong></p><ul><li>1.GBDTçš„åŸºåˆ†ç±»å™¨åªæ”¯æŒCARTæ ‘ï¼Œè€ŒXGBoostæ”¯æŒçº¿æ€§åˆ†ç±»å™¨ï¼Œæ­¤æ—¶ç›¸å½“äºå¸¦æœ‰L1å’ŒL2æ­£åˆ™é¡¹çš„é€»è¾‘å›å½’ï¼ˆåˆ†ç±»é—®é¢˜ï¼‰å’Œçº¿æ€§å›å½’ï¼ˆå›å½’é—®é¢˜ï¼‰ã€‚</li><li>2.GBDTåœ¨ä¼˜åŒ–æ—¶åªä½¿ç”¨äº†ä¸€é˜¶å€’æ•°ï¼Œè€ŒXGBoostå¯¹ç›®æ ‡å‡½æ•°è¿›è¡ŒäºŒé˜¶æ³°å‹’å±•å¼€ï¼Œæ­¤å¤–ï¼ŒXGBoostæ”¯æŒè‡ªå®šä¹‰æŸå¤±å‡½æ•°ï¼Œåªè¦æŸå¤±å‡½æ•°äºŒé˜¶å¯å¯¼</li><li>3.XGBoostå€Ÿé‰´éšæœºæ£®æ—ç®—æ³•ï¼Œæ”¯æŒåˆ—æŠ½æ ·å’Œè¡ŒæŠ½æ ·ï¼Œè¿™æ ·å³èƒ½é™ä½è¿‡æ‹Ÿåˆé£é™©ï¼Œåˆèƒ½é™ä½è®¡ç®—ã€‚</li><li>4.XGBooståœ¨ç›®æ ‡å‡½æ•°ä¸­å¼•å…¥äº†æ­£åˆ™é¡¹ï¼Œæ­£åˆ™é¡¹åŒ…æ‹¬å¶èŠ‚ç‚¹çš„ä¸ªæ•°åŠå¶èŠ‚ç‚¹çš„è¾“å‡ºå€¼çš„L2èŒƒæ•°ã€‚é€šè¿‡çº¦æŸæ ‘ç»“æ„ï¼Œé™ä½æ¨¡å‹æ–¹å·®ï¼Œé˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li><li>5.XGBoostå¯¹ç¼ºå¤±å€¼ä¸æ•æ„Ÿï¼Œèƒ½è‡ªåŠ¨å­¦ä¹ å…¶åˆ†è£‚æ–¹å‘</li><li>6.XGBooståœ¨æ¯ä¸€æ­¥ä¸­å¼•å…¥ç¼©å‡å› å­ï¼Œé™ä½å•é¢—æ ‘å¯¹ç»“æœçš„å½±å“ï¼Œè®©åç»­æ¨¡å‹æœ‰æ›´å¤§çš„ä¼˜åŒ–ç©ºé—´ï¼Œè¿›ä¸€æ­¥é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li><li>7.XGBooståœ¨è®­ç»ƒä¹‹å‰ï¼Œå¯¹æ•°æ®é¢„å…ˆè¿›è¡Œæ’åºå¹¶ä¿å­˜ä¸ºblockï¼Œåç»­è¿­ä»£ä¸­é‡å¤ä½¿ç”¨ï¼Œå‡å°‘è®¡ç®—ï¼ŒåŒæ—¶åœ¨è®¡ç®—åˆ†å‰²ç‚¹æ—¶ï¼Œå¯ä»¥å¹¶è¡Œè®¡ç®—</li><li>8.å¯å¹¶è¡Œçš„è¿‘ä¼¼ç›´æ–¹å›¾ç®—æ³•ï¼Œæ ‘ç»“ç‚¹åœ¨è¿›è¡Œåˆ†è£‚æ—¶ï¼Œéœ€è¦è®¡ç®—æ¯ä¸ªèŠ‚ç‚¹çš„å¢ç›Šï¼Œè‹¥æ•°æ®é‡è¾ƒå¤§ï¼Œå¯¹æ‰€æœ‰èŠ‚ç‚¹çš„ç‰¹å¾è¿›è¡Œæ’åºï¼Œéå†çš„å¾—åˆ°æœ€ä¼˜åˆ†å‰²ç‚¹ï¼Œè¿™ç§è´ªå¿ƒæ³•å¼‚å¸¸è€—æ—¶ï¼Œè¿™æ—¶å¼•è¿›è¿‘ä¼¼ç›´æ–¹å›¾ç®—æ³•ï¼Œç”¨äºç”Ÿæˆé«˜æ•ˆçš„åˆ†å‰²ç‚¹ï¼Œå³ç”¨åˆ†è£‚åçš„æŸç§å€¼å‡å»åˆ†è£‚å‰çš„æŸç§å€¼ï¼Œè·å¾—å¢ç›Šï¼Œä¸ºäº†é™åˆ¶æ ‘çš„å¢é•¿ï¼Œå¼•å…¥é˜ˆå€¼ï¼Œå½“å¢ç›Šå¤§äºé˜ˆå€¼æ—¶ï¼Œè¿›è¡Œåˆ†è£‚ï¼›</li></ul><p><strong>ä¸LightGBMå¯¹æ¯”</strong></p><ul><li>1.XGBoosté‡‡ç”¨é¢„æ’åºï¼Œåœ¨è¿­ä»£ä¹‹å‰ï¼Œå¯¹ç»“ç‚¹çš„ç‰¹å¾åšé¢„æ’åºï¼Œéå†é€‰æ‹©æœ€ä¼˜åˆ†å‰²ç‚¹ï¼Œæ•°æ®é‡å¤§æ—¶ï¼Œè´ªå¿ƒæ³•è€—æ—¶ï¼ŒLightGBMæ–¹æ³•é‡‡ç”¨histogramç®—æ³•ï¼Œå ç”¨çš„å†…å­˜ä½ï¼Œæ•°æ®åˆ†å‰²çš„å¤æ‚åº¦æ›´ä½ï¼Œä½†æ˜¯ä¸èƒ½æ‰¾åˆ°æœ€ç²¾ç¡®çš„æ•°æ®åˆ†å‰²ç‚¹ã€‚åŒæ—¶ï¼Œä¸ç²¾ç¡®çš„åˆ†å‰²ç‚¹å¯ä»¥è®¤ä¸ºæ˜¯é™ä½è¿‡æ‹Ÿåˆçš„ä¸€ç§æ‰‹æ®µã€‚</li><li>2.LightGBMå€Ÿé‰´Adaboostçš„æ€æƒ³ï¼Œå¯¹æ ·æœ¬åŸºäºæ¢¯åº¦é‡‡æ ·ï¼Œç„¶åè®¡ç®—å¢ç›Šï¼Œé™ä½äº†è®¡ç®—</li><li>3.LightGBMå¯¹åˆ—è¿›è¡Œåˆå¹¶ï¼Œé™ä½äº†è®¡ç®—</li><li>4.XGBoosté‡‡æ ·level-wiseç­–ç•¥è¿›è¡Œå†³ç­–æ ‘çš„ç”Ÿæˆï¼ŒåŒæ—¶åˆ†è£‚åŒä¸€å±‚çš„èŠ‚ç‚¹ï¼Œé‡‡ç”¨å¤šçº¿ç¨‹ä¼˜åŒ–ï¼Œä¸å®¹æ˜“è¿‡æ‹Ÿåˆï¼Œä½†æœ‰äº›èŠ‚ç‚¹åˆ†è£‚å¢ç›Šéå¸¸å°ï¼Œæ²¡å¿…è¦è¿›è¡Œåˆ†å‰²ï¼Œè¿™å°±å¸¦æ¥äº†ä¸€äº›ä¸å¿…è¦çš„è®¡ç®—ï¼›LightGBMé‡‡æ ·leaf-wiseç­–ç•¥è¿›è¡Œæ ‘çš„ç”Ÿæˆï¼Œæ¯æ¬¡éƒ½é€‰æ‹©åœ¨å½“å‰å¶å­èŠ‚ç‚¹ä¸­å¢ç›Šæœ€å¤§çš„èŠ‚ç‚¹è¿›è¡Œåˆ†è£‚ï¼Œå¦‚æ­¤è¿­ä»£ï¼Œä½†æ˜¯è¿™æ ·å®¹æ˜“äº§ç”Ÿæ·±åº¦å¾ˆæ·±çš„æ ‘ï¼Œäº§ç”Ÿè¿‡æ‹Ÿåˆï¼Œæ‰€ä»¥å¢åŠ äº†æœ€å¤§æ·±åº¦çš„é™åˆ¶ï¼Œæ¥ä¿è¯é«˜æ•ˆçš„åŒæ—¶é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</li></ul><hr><p>å‚è€ƒï¼š<a href="https://arxiv.org/pdf/1603.02754.pdf" target="_blank" rel="noopener">https://arxiv.org/pdf/1603.02754.pdf</a><br><a href="https://www.zhihu.com/question/41354392/answer/98658997" target="_blank" rel="noopener">https://www.zhihu.com/question/41354392/answer/98658997</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>é£æ ¼è¿ç§»æ¨¡å‹æ•ˆæœå›¾</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="MachineLearning" scheme="https://xv44586.github.io/tags/MachineLearning/"/>
    
  </entry>
  
  <entry>
    <title>ç¥ç»ç½‘ç»œè¯­è¨€æ¨¡å‹(NNLM)</title>
    <link href="https://xv44586.github.io/2019/10/13/nnlm/"/>
    <id>https://xv44586.github.io/2019/10/13/nnlm/</id>
    <published>2019-10-13T09:43:00.000Z</published>
    <updated>2019-10-17T14:32:35.272Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#tong-ji-yu-yan-mo-xing">ç»Ÿè®¡è¯­è¨€æ¨¡å‹</a></li><li><a href="#nnlm">NNLM</a><ul><li><a href="#why-it-works">why it works?</a></li><li><a href="#bing-xing">å¹¶è¡Œ</a></li><li><a href="#out-of-vocabulary-word">out-of-vocabulary word</a></li><li><a href="#hou-xu-gong-zuo">åç»­å·¥ä½œ</a></li></ul></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="tong-ji-yu-yan-mo-xing">ç»Ÿè®¡è¯­è¨€æ¨¡å‹</span><a href="#tong-ji-yu-yan-mo-xing" class="header-anchor"></a></h1><p>é¦–å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š<br><strong>ztc/ ä¸Šä¸‹/ é½/ æ‹¼æ/ ï¼Œèª“ä¸º/ æ˜¥æˆ˜/ åš/ è´¡çŒ®</strong><br>è¿™å¥è¯å‘¢é€šé¡ºï¼Œæ„æ€æ˜ç™½ï¼Œé‚£å¦‚æœæ¢ä¸€ä¸‹è¯çš„ä½ç½®ï¼š<br><strong>ä¸Šä¸‹/ é½/ æ‹¼æ/ ztc/ ï¼Œæ˜¥ç«™/ åš/ è´¡çŒ®/ èª“ä¸º</strong><br>æ„æ€å«ç³Šäº†ï¼Œä½†æ˜¯å¤§æ¦‚æ„æ€è¿˜æ˜¯èƒ½çŒœåˆ°ï¼Œé‚£å¦‚æœåœ¨å˜æ¢ä¸€ä¸‹ï¼š<br><strong>æ‹¼æ/ é½/ ztc/ ä¸Šä¸‹/ ï¼Œè´¡çŒ®/ èª“ä¸º/ åš/ æ˜¥æˆ˜</strong><br>ç°åœ¨è¿™å¥è¯å·²ç»ä¸çŸ¥æ‰€äº‘äº†ï¼Œå¦‚ä½•åˆ¤æ–­è¿™ä¸ªç”±è¯åºç»„æˆçš„åºåˆ—æ˜¯å¦ç¬¦åˆæ–‡æ³•ã€å«ä¹‰æ˜¯å¦æ­£ç¡®ï¼Ÿ</p><p><strong>ç»Ÿè®¡è¯­è¨€æ¨¡å‹ï¼šä¸€ä¸ªå¥å­æ˜¯å¦åˆç†ï¼Œå°±çœ‹ä»–çš„å¯èƒ½æ€§çš„å¤§å°ï¼Œå³ä»–çš„æ¦‚ç‡å¤§å°ã€‚</strong></p><p>å‡è®¾ä¸€ä¸ªå¥å­Sï¼Œç”±ä¸€è¿ä¸²ç‰¹å®šé¡ºåºçš„è¯W1, W2,â€¦WT ç»„æˆï¼ŒTæ˜¯å¥å­ä¸­è¯çš„ä¸ªæ•°ï¼Œåˆ™Så‡ºç°çš„æ¦‚ç‡P(S) = P(w1, w2,â€¦wT)<br>åˆ©ç”¨æ¡ä»¶æ¦‚ç‡å…¬å¼å±•å¼€ï¼š<br>$P(w1,w2,..wT) = P(w1)<em>P(w2|w1)</em>P(w3|w1,w2)<em>â€¦</em>P(wT|w1,w2,..wT-1)$<br>å³ï¼š<br><img src="/2019/10/13/nnlm/p.png" alt><br>å½“è¯­æ–™ä¸­è¯å…¸å¤§å°ä¸º100,000ï¼Œå¥å­å¹³å‡é•¿åº¦ä¸º5æ—¶ï¼Œéœ€è¦å­¦ä¹ çš„å‚æ•°å¤§æ¦‚100000 * 5 -1 ä¸ªï¼Œä¸ºäº†é™ä½è®¡ç®—å¤æ‚åº¦ï¼Œå¹¶è€ƒè™‘åˆ°è¯åºåˆ—ä¸­ç¦»çš„æ›´è¿‘çš„è¯é€šå¸¸åœ¨è¯­ä¹‰ä¸Šä¹Ÿæ›´ç›¸å…³ï¼Œæ‰€ä»¥åœ¨è®¡ç®—æ—¶å¯ä»¥é€šè¿‡åªä½¿ç”¨å‰é¢n-1ä¸ªè¯æ¥è¿‘ä¼¼è®¡ç®—ï¼Œå³n-gramsï¼š<br><img src="/2019/10/13/nnlm/ngram.png" alt></p><p>n-gramså­˜åœ¨çš„é—®é¢˜ï¼š1.æ³›åŒ–æ—¶å¸¸å¸¸æœ‰è®­ç»ƒè¯­æ–™ä¸­æ²¡æœ‰å‡ºç°è¿‡çš„è¯åºåˆ—ï¼›2.æ²¡æœ‰è€ƒè™‘è¯ä¹‹é—´çš„ç›¸ä¼¼æ€§ã€‚</p><h1><span id="nnlm">NNLM</span><a href="#nnlm" class="header-anchor"></a></h1><p><img src="/2019/10/13/nnlm/arc.png" alt="Neural architecture"></p><ul><li>1.å¯¹è¯åº“é‡Œçš„æ¯ä¸ªè¯æŒ‡å®šä¸€ä¸ªåˆ†å¸ƒçš„è¯å‘é‡</li><li>2.å®šä¹‰è”åˆæ¦‚ç‡ï¼ˆé€šè¿‡åºåˆ—ä¸­è¯å¯¹åº”çš„è¯å‘é‡</li><li>3.å­¦ä¹ è¯å‘é‡å’Œæ¦‚ç‡å‡½æ•°çš„å‚æ•°</li></ul><h2><span id="why-it-works">why it works?</span><a href="#why-it-works" class="header-anchor"></a></h2><p>å¦‚æœæˆ‘ä»¬å·²çŸ¥ â€œèµ°â€ å’Œ â€œè·‘â€ æ˜¯ç›¸ä¼¼è¯ï¼Œé‚£å¾ˆå®¹æ˜“é€šè¿‡ â€çŒ«åœ¨å±‹é‡Œè·‘â€œ æ¨å‡º â€œçŒ«åœ¨å±‹é‡Œèµ°â€œï¼Œå› ä¸ºç›¸ä¼¼çš„è¯ä¼šæœ‰ç›¸ä¼¼çš„è¯å‘é‡ï¼Œè€Œä¸”æ¦‚ç‡å‡½æ•°æ˜¯ç‰¹å¾çš„å¹³æ»‘å‡½æ•°ï¼Œæ‰€ä»¥ç‰¹å¾çš„å¾®å°å˜åŒ–ï¼Œåªä¼šå¯¹æ¦‚ç‡å€¼äº§ç”Ÿä¸€ä¸ªå¾ˆå°çš„å½±å“ã€‚å³ï¼š1.ç›¸ä¼¼è¯åœ¨ç‰¹å¾ç©ºé—´è·ç¦»æ›´æ¥è¿‘ï¼›2.æ¦‚ç‡å‡½æ•°æ˜¯ä¸€ä¸ªç›¸å¯¹å¹³æ»‘çš„å‡½æ•°ï¼Œå¯¹ç‰¹å¾å€¼çš„å˜åŒ–ä¸æ˜¯éå¸¸æ•æ„Ÿã€‚<br>æ‰€ä»¥è®­ç»ƒè¯­æ–™ä¸­å¥å­çš„å‡ºç°ä¸å…‰å¢åŠ äº†è‡ªèº«çš„æ¦‚ç‡ï¼Œä¹Ÿå¢åŠ äº†ä»–ä¸å‘¨å›´å¥å­çš„æ¦‚ç‡ï¼ˆå¥å­å‘é‡ç©ºé—´ï¼‰<br>ç›®æ ‡ï¼šf(wt ,Â·Â·Â· ,wtâˆ’n+1) = PË†(wt |w1,w2,..wt-1 )<br>çº¦æŸï¼š</p><ul><li><ol><li>$âˆ‘ |V| i=1 f(i,wtâˆ’1,Â·Â·Â· ,wtâˆ’n+1) = 1$  </li></ol></li><li>2.$f&gt;0$</li></ul><p>é€šè¿‡å¾—åˆ°çš„æ¡ä»¶æ¦‚ç‡è¿›è¡Œç›¸ä¹˜ï¼Œå¾—åˆ°è¯åºåˆ—çš„è”åˆæ¦‚ç‡.<br>æ¨¡å‹è¢«åˆ†æˆäºŒéƒ¨åˆ†ï¼š<br>1.<strong>ç‰¹å¾æ˜ å°„ï¼šé€šè¿‡æ˜ å°„çŸ©é˜µ CâˆˆR âˆ£Vâˆ£Ã—m</strong><br>å°†è¾“å…¥çš„æ¯ä¸ªè¯æ˜ å°„ä¸ºä¸€ä¸ªç‰¹å¾å‘é‡ï¼ŒC(i)âˆˆRm è¡¨ç¤ºè¯å…¸ä¸­ç¬¬ i ä¸ªè¯å¯¹åº”çš„ç‰¹å¾å‘é‡ï¼Œå…¶ä¸­ m è¡¨ç¤ºç‰¹å¾å‘é‡çš„ç»´åº¦ã€‚<br>2.<strong>æ¦‚ç‡å‡½æ•°g</strong><br>é€šè¿‡contextä¸­è¯çš„è¯å‘é‡æ¥æ˜ å°„ä¸‹ä¸€ä¸ªè¯çš„æ¡ä»¶æ¦‚ç‡ã€‚gçš„è¾“å‡ºæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…¶ä¸­ç¬¬iä¸ªå…ƒç´ è¡¨ç¤ºäº†å­—å…¸ä¸­ç¬¬iä¸ªè¯çš„æ¦‚ç‡ã€‚å®Œæ•´çš„æ¨¡å‹è¡¨è¾¾å¦‚ä¸‹ï¼š<br>       $f(i,wtâˆ’1,Â·Â·Â· ,wtâˆ’n+1) = g(i,C(wtâˆ’1),Â·Â·Â· ,C(wtâˆ’n+1))$<br>å‡½æ•°fç”±ä¸¤ä¸ªæ˜ å°„ï¼ˆg and c)ç»„æˆï¼Œå…¶ä¸­cç”±æ‰€æœ‰çš„ä¸Šä¸‹æ–‡å…±äº«ã€‚<br>è®­ç»ƒè¿‡ç¨‹ä¸­çš„å‚æ•°å°±ç”±ä¸¤ä¸ªæ˜ å°„ç»„æˆï¼Œè®¾ g å¯¹åº”å‚æ•°ä¸ºwï¼Œcæ˜ å°„çš„å‚æ•°å°±æ˜¯è‡ªèº«ï¼Œåˆ™ Î¸=ï¼ˆc, w)<br>è®­ç»ƒè¿‡ç¨‹å°±æ˜¯å­¦ä¹ Î¸çš„æœ€å¤§ä¼¼ç„¶ï¼š<br><img src="/2019/10/13/nnlm/l.ong" alt><br>å…¶ä¸­R(Î¸) æ˜¯æ­£åˆ™é¡¹ã€‚<br>æ¨¡å‹ä¸­å‚æ•°ä¸å­—å…¸å¤§å°Væˆçº¿æ€§å…³ç³»ï¼Œä¸”ä¸nï¼ˆn-grams)æˆçº¿æ€§å…³ç³»ï¼Œä¸è¿‡å¯ä»¥é€šè¿‡å…±äº«ç»“æ„é™ä½å‚æ•°æ•°é‡ï¼Œå¦‚å»¶æ—¶ç¥ç»ç½‘ç»œæˆ–å¾ªç¯ç¥ç»ç½‘ç»œã€‚<br>å®éªŒä¸­ï¼Œç¥ç»ç½‘ç»œå±‚åªæœ‰ä¸€ä¸ªéšå±‚ï¼Œæœ‰ä¸€ä¸ªå¯é€‰çš„è¯å‘é‡åˆ°è¾“å‡ºçš„ç›´è¿å±‚ï¼Œå®é™…ä¸Šå°±æœ‰ä¸¤ä¸ªéšå±‚ï¼Œä¸€ä¸ªå…±äº«çš„è¯å‘é‡C å±‚ï¼Œè¯¥å±‚æ²¡æœ‰æ¿€æ´»å‡½æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ªtanhæ¿€æ´»å‡½æ•°çš„éšå±‚ï¼›æœ€åçš„è¾“å‡ºå±‚æ˜¯ä¸€ä¸ªsoftmaxå±‚ï¼Œæ¥ä¿è¯æ‰€æœ‰ç»“æœçš„å’Œä¸º1ï¼š<br><img src="/2019/10/13/nnlm/pnew.png" alt></p><p>æ³¨æ„ï¼šç¬¬ä¸€å±‚æ˜¯æ²¡æœ‰éçº¿æ€§æ¿€æ´»å‡½æ•°çš„ï¼Œå› ä¸ºéçº¿æ€§æ¿€æ´»å‡½æ•°ä¼šå¸¦æ¥å…¶ä»–ä¿¡æ¯ï¼ˆè”æƒ³ç¥ç»ç½‘ç»œä¸­éçº¿æ€§æ¿€æ´»å‡½æ•°ï¼‰ï¼Œè€Œæ­£æ˜¯è¿™ç§ç›´æ¥çš„çº¿æ€§å˜æ¢ï¼Œæ‰èƒ½è®©ç¬¬ä¸€å±‚çš„å‚æ•°æ¥ä½œä¸ºè¯å‘é‡<br>ç”¨yiè¡¨ç¤ºæ¯ä¸ªè¾“å‡ºè¯çš„å¯¹æ•°æ¦‚ç‡ï¼Œåˆ™<br>$y = b+Wx+U tanh(d +Hx)$<br>å…¶ä¸­xæ˜¯è¯å‘é‡çš„æ‹¼æ¥ï¼Œx = (c(wt-1),c(wt-2),c(wt-n+1))</p><h2><span id="bing-xing">å¹¶è¡Œ</span><a href="#bing-xing" class="header-anchor"></a></h2><p>å‚æ•°ä¸è¾“å…¥çš„çª—å£å¤§å°å’Œå­—å…¸çš„å¤§å°æˆçº¿æ€§ï¼Œä½†æ˜¯è®¡ç®—é‡å´æ¯”n-grams è¦å¤§å¾ˆå¤šï¼Œé¦–å…ˆn-gramsä¸­ä¸éœ€è¦æ¯æ¬¡éƒ½è®¡ç®—æ‰€æœ‰è¯çš„æ¦‚ç‡ï¼Œåªéœ€è¦ç›¸å…³è¯é¢‘çš„çº¿æ€§ç»„åˆï¼Œå¦å¤–ç¥ç»ç½‘ç»œä¸­ä¸»è¦ç“¶é¢ˆæ˜¯è¾“å‡ºå±‚çš„æ¿€æ´»è®¡ç®—ã€‚</p><h2><span id="out-of-vocabulary-word">out-of-vocabulary word</span><a href="#out-of-vocabulary-word" class="header-anchor"></a></h2><p>é¦–å…ˆæ ¹æ®çª—å£ä¸Šä¸‹æ–‡å¯èƒ½å‡ºç°çš„è¯ï¼Œè¿›è¡ŒåŠ æƒæ±‚å’Œåˆå§‹åŒ–æ–°è¯çš„è¯å‘é‡ï¼Œç„¶åå°†æ–°è¯ j åŠ å…¥å­—å…¸ï¼Œç„¶ååˆ©ç”¨è¿™éƒ¨åˆ†æ•°æ®é›†é‡æ–°è®­ç»ƒï¼Œè¿›è¡Œretune.</p><h2><span id="hou-xu-gong-zuo">åç»­å·¥ä½œ</span><a href="#hou-xu-gong-zuo" class="header-anchor"></a></h2><ul><li>1ï¼Œåˆ†è§£ç½‘ç»œåˆ°å­ç½‘ç»œï¼Œå¦‚ä½¿ç”¨è¯èšç±»ï¼Œæ„å»ºè®¸å¤šå°çš„å­ç½‘ç»œå¯èƒ½æ›´å¿«æ›´ç®€å•</li><li>2ï¼Œç”¨æ ‘ç»“æ„æ¥è¡¨è¾¾æ¡ä»¶æ¦‚ç‡ï¼šç¥ç»ç½‘ç»œä½œç”¨åœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨æ ¹æ®ä¸Šä¸‹é—®å¾—åˆ°è¯¥è¯ç±»çš„å¯èƒ½æ€§ï¼Œå¶å­èŠ‚ç‚¹ä»£è¡¨è¯çš„å¯èƒ½æ€§ï¼Œè¿™ç§ç»“æ„å¯ä»¥å°†è®¡ç®—å¤æ‚åº¦ä»|v| é™ä½åˆ° log|v|</li><li>3ï¼Œæ¢¯åº¦ä¼ æ’­æ—¶å¯ä»¥åªåœ¨éƒ¨åˆ†è¾“å‡ºè¯ä¸Šè¿›è¡Œï¼Œå¦‚æŸäº›æ¡ä»¶ä¸‹æœ€ç›¸ä¼¼çš„ï¼ˆå¦‚ä¸‰å…ƒæ¨¡å‹ï¼‰ã€‚å¦‚æœç”¨åœ¨è¯­éŸ³è¯†åˆ«ï¼Œå¯ä»¥åªè®¡ç®—å¬è§‰ä¸Šç›¸ä¼¼çš„è¯ã€‚</li><li>4ï¼Œå¼•å…¥å…ˆéªŒçŸ¥è¯†ï¼Œå¦‚è¯­ä¹‰ä¿¡æ¯å’Œè¯­æ³•ä¿¡æ¯ã€‚é€šè¿‡åœ¨ç¥ç»ç½‘ç»œç»“æ„ä¸­å…±äº«æ›´å¤šçš„ç»“æ„ä¸å‚æ•°ï¼Œå¯ä»¥æ•è·é•¿æœŸçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œ</li><li>5ï¼Œå¦‚ä½•è§£é‡Šç¥ç»ç½‘ç»œå¾—åˆ°çš„è¯å‘é‡</li><li>6ï¼Œä¸Šè¿°æ¨¡å‹å¯¹æ¯ä¸ªå•è¯åˆ†é…ä¸€ä¸ªåœ¨è¯­ä¹‰ç©ºé—´çš„ç‚¹ï¼Œæ‰€ä»¥æ— æ³•è§£å†³ä¸€è¯å¤šä¹‰é—®é¢˜ã€‚å¦‚ä½•æ‰©å±•å½“å‰æ¨¡å‹ï¼Œåœ¨è¯­ä¹‰ç©ºé—´ä¸­ä¸ºè¯åˆ†é…å¤šä¸ªç‚¹æ¥ä»£è¡¨è¯çš„ä¸åŒè¯­ä¹‰ã€‚</li></ul><p>ä½œè€…æå‡ºçš„åç»­å·¥ä½œä¸­ï¼Œç›®å‰æ˜¯å¾ˆå¤šäººçš„ç ”ç©¶æ–¹å‘ï¼Œä¸€äº›å·²ç»è¢«è¯æ˜æœ‰æ•ˆã€‚</p><ul><li>ç¬¬ä¸€ä¸ªï¼Œä¼˜åŒ–ç½‘ç»œç»“æ„ï¼Œæåˆ°äº†ä»æ•°æ®æ–¹å‘ï¼Œæ„å»ºæ›´å¤šçš„å­ç½‘ç»œï¼Œè¿˜å¯ä»¥ç›´æ¥å¯¹ç½‘ç»œç»“æ„æœ¬èº«è¿›è¡Œä¼˜åŒ–ï¼Œå¦‚word2vecï¼Œå°†ç¥ç»ç½‘ç»œå±‚å»æ‰ï¼›</li><li>ç¬¬äºŒä¸ªï¼Œç”±äºè®¡ç®—ç“¶é¢ˆåœ¨è®¡ç®—outputçš„æ¦‚ç‡ï¼ˆå¯¹æ¯ä¸ªè¯è®¡ç®—æ¦‚ç‡ï¼Œéœ€è¦softmaxå½’ä¸€åŒ–ï¼‰,æ‰€ä»¥æå‡ºå¯ä»¥é€šè¿‡æ ‘ç»“æ„ï¼Œæ¥é¿å…ç›´æ¥å¯¹æ‰€æœ‰è¯è¿›è¡Œè®¡ç®—ï¼Œå¦‚ Hierarchical Softmax</li><li>ç¬¬ä¸‰ä¸ªä¹Ÿæ˜¯åœ¨è®¡ç®—è¾“å‡ºæ—¶ï¼Œåªé€šè¿‡ä¸€éƒ¨åˆ†è¯æ¥è¿›è¡Œæ¢¯åº¦ä¼ æ’­ï¼Œå¦‚è´Ÿé‡‡æ ·</li><li>ç¬¬å››ä¸ªæ˜¯é€šè¿‡å…±äº«ç»“æ„ï¼Œæ¥æ•è·æ›´å¤šä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¦‚GPTï¼ŒBert</li><li>ç¬¬äº”ä¸ªæ˜¯å¦‚ä½•è§£é‡Šï¼Œä¹Ÿæ˜¯ç›®å‰å¾ˆå¤šäººçš„ç ”ç©¶æ–¹å‘</li><li>ç¬¬å…­ä¸ªæ˜¯ä¸€æ¬¡å¤šä¹‰çš„è§£å†³æ–¹æ³•ï¼Œå¦‚ELMO</li></ul><hr><p>å‚è€ƒï¼š<br><a href="http://www.iro.umontreal.ca/~vincentp/Publications/lm_jmlr.pdf" target="_blank" rel="noopener">http://www.iro.umontreal.ca/~vincentp/Publications/lm_jmlr.pdf</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºæœ›äº¬soho</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
      <category term="DeepLearning" scheme="https://xv44586.github.io/tags/DeepLearning/"/>
    
  </entry>
  
  <entry>
    <title>Word2Vecä¹‹skip-gram</title>
    <link href="https://xv44586.github.io/2019/10/13/skipgram/"/>
    <id>https://xv44586.github.io/2019/10/13/skipgram/</id>
    <published>2019-10-13T09:12:24.000Z</published>
    <updated>2019-10-13T09:41:54.733Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#word2vec">Word2Vec</a></li><li><a href="#fake-task">Fake Task</a></li><li><a href="#train">Train</a></li><li><a href="#shu-ru">è¾“å…¥</a></li><li><a href="#yin-ceng">éšå±‚</a></li><li><a href="#shu-chu-ceng">è¾“å‡ºå±‚</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="word2vec">Word2Vec</span><a href="#word2vec" class="header-anchor"></a></h1><p><img src="/2019/10/13/skipgram/w2v.jpeg" alt="Word2Vec"><br>Word2vec ä¸»è¦æœ‰ä¸¤ç§å½¢å¼ï¼ŒCBOW å’ŒSkip-gramï¼Œå…¶ä¸­CBOWæ˜¯é€šè¿‡ä¸Šä¸‹æ–‡contextæ¥é¢„æµ‹å½“å‰ä½ç½®è¯ï¼ŒSKip-gramåˆ™æ˜¯é€šè¿‡å½“å‰è¯æ¥é¢„æµ‹ä¸Šä¸‹æ–‡</p><h1><span id="fake-task">Fake Task</span><a href="#fake-task" class="header-anchor"></a></h1><p>word2vec å®é™…ä¸Šåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ1ï¼Œå»ºç«‹æ¨¡å‹ï¼Œ2ï¼Œé€šè¿‡æ¨¡å‹è·å–è¯çš„åµŒå…¥å‘é‡ï¼ˆéšå±‚å‚æ•°ï¼‰ã€‚æ•´ä¸ªè¿‡ç¨‹ä¸è‡ªç¼–ç å™¨çš„æ€æƒ³ç±»ä¼¼ï¼Œå³åŸºäºè®­ç»ƒæ•°æ®è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œï¼Œæ¨¡å‹è®­ç»ƒå¥½åï¼Œå¹¶ä¸ä¼šç”¨è¿™ä¸ªæ¨¡å‹å¤„ç†åç»­çš„ä»»åŠ¡ï¼ŒçœŸæ­£éœ€è¦çš„æ˜¯è¿™ä¸ªæ¨¡å‹å­¦åˆ°çš„å‚æ•°ï¼Œå¦‚éšå±‚çš„æƒé‡çŸ©é˜µï¼ŒåŸºäºè®­ç»ƒæ•°æ®å»ºæ¨¡çš„è¿‡ç¨‹å«â€œFake Taskâ€ï¼Œæ„å‘³ç€å»ºæ¨¡å¹¶ä¸æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ç›®çš„ã€‚</p><h1><span id="train">Train</span><a href="#train" class="header-anchor"></a></h1><p>å¦‚ä½•è®­ç»ƒæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œæ¨¡å‹ï¼Ÿå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªå¥å­â€œ The dog barked at the mailmanâ€:</p><ul><li>é¦–å…ˆï¼Œæˆ‘ä»¬é€‰æ‹©å¥å­ä¸­ä¸€ä¸ªè¯ä½œä¸ºæˆ‘ä»¬çš„input wordï¼Œ å¦‚ dog</li><li>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªskip_windowå‚æ•°ï¼Œæ¥æŒ‡å®šä¸Šä¸‹æ–‡çš„å¤§å°ï¼Œå³input word ä¸€ä¾§é€‰å–è¯çš„æ•°é‡ï¼Œå‡å¦‚skip_window=2,é‚£å°†ä»dogå‡ºå‘å‘å·¦å³ä¸¤ä¸ªæ–¹å‘å–æœ€è¿‘çš„ä¸¤ä¸ªwordï¼Œå³ï¼ˆthe, dog,barked,at)ï¼Œæ­¤æ—¶çš„span = skip_window <em> 2 + 1 = 5<br>å¦ä¸€ä¸ªéœ€è¦å®šä¹‰çš„å‚æ•°æ˜¯num_skipsï¼Œå³ä»ä¸Šä¸‹æ–‡ä¸­é€‰å–å¤šå°‘ä¸ªwordæ¥ä½œä¸ºoutput wordï¼Œè¿™ä¸ªå‚æ•°åº”è¯¥å°äºç­‰äº2 </em> skip_windowï¼Œå³æœ€å¤šå°†æ‰€æœ‰ä¸Šä¸‹æ–‡éƒ½ä½œä¸ºoutputï¼Œä½†æ˜¯ä¸èƒ½é‡å¤ã€‚å¦‚è®¾ç½®num_skips = 2,æ­¤æ—¶ä»ä¸Šä¸‹æ–‡é€‰å–2ä¸ªè¯ä½œä¸ºoutputï¼Œå¦‚ï¼ˆtheï¼Œ barkedï¼‰ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†å¾—åˆ°ä¸¤ç»„è®­ç»ƒæ•°æ®ï¼ˆdog, the) (dog, barked)</li></ul><p>ç¥ç»ç½‘ç»œå°†åŸºäºè¿™äº›è®­ç»ƒæ•°æ®è¾“å‡ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œè¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒä»£è¡¨ç€åœ¨è¾“å…¥æ•°æ®ä¸‹ï¼Œè¯å…¸ä¸­æ¯ä¸ªè¯æ˜¯outputçš„æ¦‚ç‡ã€‚å¦‚æ‹¿æ•°æ®ï¼ˆdogï¼Œ barkedï¼‰æ¥è®­ç»ƒï¼Œåˆ™æ¨¡å‹å°†ä¼šå‘Šè¯‰æˆ‘ä»¬æ¯ä¸ªå•è¯æ˜¯â€™barkedâ€™çš„æ¦‚ç‡å¤§å°ã€‚<br>æ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡ä»£è¡¨ç€è¯å…¸ä¸­æ¯ä¸ªå•è¯æœ‰å¤šå¤§å¯èƒ½æ€§è·Ÿinput wordåŒæ—¶å‡ºç°ã€‚ä¸¾ä¸ªæ —å­ï¼Œå¦‚æœæˆ‘ä»¬å‘ç¥ç»ç½‘ç»œæ¨¡å‹ä¸­è¾“å…¥ä¸€ä¸ªå•è¯â€œSovietâ€œï¼Œé‚£ä¹ˆæœ€ç»ˆæ¨¡å‹çš„è¾“å‡ºæ¦‚ç‡ä¸­ï¼Œåƒâ€œUnionâ€ï¼Œ â€Russiaâ€œè¿™ç§ç›¸å…³è¯çš„æ¦‚ç‡å°†è¿œé«˜äºåƒâ€watermelonâ€œï¼Œâ€kangarooâ€œéç›¸å…³è¯çš„æ¦‚ç‡ã€‚å› ä¸ºâ€Unionâ€œï¼Œâ€Russiaâ€œåœ¨æ–‡æœ¬ä¸­æ›´å¤§å¯èƒ½åœ¨â€Sovietâ€œçš„çª—å£ä¸­å‡ºç°ã€‚<br>æˆ‘ä»¬å°†é€šè¿‡ç»™ç¥ç»ç½‘ç»œè¾“å…¥æ–‡æœ¬ä¸­æˆå¯¹çš„å•è¯æ¥è®­ç»ƒå®ƒå®Œæˆä¸Šé¢æ‰€è¯´çš„æ¦‚ç‡è®¡ç®—ã€‚ä¸‹é¢çš„å›¾ä¸­ç»™å‡ºäº†ä¸€äº›æˆ‘ä»¬çš„è®­ç»ƒæ ·æœ¬çš„ä¾‹å­ã€‚æˆ‘ä»¬é€‰å®šå¥å­â€œThe quick brown fox jumps over lazy dogâ€ï¼Œè®¾å®šæˆ‘ä»¬çš„çª—å£å¤§å°ä¸º2ï¼ˆwindow_size = 2ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä»…é€‰è¾“å…¥è¯å‰åå„ä¸¤ä¸ªè¯å’Œè¾“å…¥è¯è¿›è¡Œç»„åˆã€‚ä¸‹å›¾ä¸­ï¼Œè“è‰²ä»£è¡¨input wordï¼Œæ–¹æ¡†å†…ä»£è¡¨ä½äºçª—å£å†…çš„å•è¯ã€‚</p><p><img src="/2019/10/13/skipgram/train.png" alt><br>æ¨¡å‹å°†ä¼šä»æ¯é˜Ÿå•è¯å‡ºç°çš„æ¬¡æ•°ä¸­ä¹ å¾—ç»Ÿè®¡ç»“æœï¼Œæ¨¡å‹å¯èƒ½ä¼šå¾—åˆ°æ›´å¤šçš„ï¼ˆâ€™sovietâ€™ï¼Œ â€˜unionâ€™ï¼‰æ ·æœ¬å¯¹ï¼Œè€Œï¼ˆsovietï¼Œ dogï¼‰è¿™æ ·çš„ç»„åˆçœ‹åˆ°çš„å¾ˆå°‘ã€‚å› æ­¤ï¼Œå½“æ¨¡å‹è®­ç»ƒå®Œæˆåï¼Œç»™å®šä¸€ä¸ªå•è¯ sovietï¼Œè¾“å‡ºç»“æœä¸­union æˆ–è€…russiaä¼šæ¯”dogæœ‰æ›´é«˜çš„æ¦‚ç‡ã€‚</p><h1><span id="shu-ru">è¾“å…¥</span><a href="#shu-ru" class="header-anchor"></a></h1><p>å¸¸ç”¨åšæ³•æ˜¯ç”¨è®­ç»ƒæ–‡æ¡£æ„å»ºè¯æ±‡è¡¨ï¼Œç„¶åå†å¯¹å•è¯è¿›è¡Œ0ne-hotç¼–ç ã€‚ç¼–ç åçš„å‘é‡ï¼Œå½¢å¦‚dog = [0, 0, 1, 0, â€¦0], å¦‚æœè¯æ±‡è¡¨å¤§å°ä¸º10000ï¼Œ é‚£è¿™ä¸ªå‘é‡åŒ…å«äº†10000çš„æ¦‚ç‡ï¼Œå³ä¸ºå½“å‰è¯ä¸ºè¾“å…¥çš„æ¦‚ç‡<br>ä¸‹å›¾æ˜¯ç¥ç»ç½‘ç»œç»“æ„ï¼š</p><p><img src="/2019/10/13/skipgram/arc.png" alt><br>æˆ‘ä»¬åŸºäºæˆå¯¹çš„å•è¯æ¥å¯¹ç¥ç»ç½‘ç»œè¿›è¡Œè®­ç»ƒï¼Œ è®­ç»ƒæ ·æœ¬æ˜¯ï¼ˆinput wordï¼Œ output wordï¼‰è¿™æ ·çš„å•è¯å¯¹ï¼Œinput word å’Œ output wordéƒ½æ˜¯one-hotç¼–ç çš„å‘é‡ï¼Œæœ€ç»ˆçš„æ¨¡å‹è¾“å‡ºæ˜¯ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒã€‚</p><h1><span id="yin-ceng">éšå±‚</span><a href="#yin-ceng" class="header-anchor"></a></h1><p>å¦‚æœæˆ‘ä»¬æƒ³è¦ç”¨300ä¸ªç‰¹å¾æ¥è¡¨ç¤ºä¸€ä¸ªè¯ï¼ˆå³æ¯ä¸ªè¯æ˜¯300ç»´çš„å‘é‡ï¼‰ï¼Œå³éšå±‚æœ‰300ä¸ªç¥ç»å…ƒï¼Œéšå±‚çš„æƒé‡ä¸º10000 <em> 300çš„çŸ©é˜µï¼Œä¸‹å›¾ä¸­çš„å·¦å³ä¸¤ä¸ªå›¾ä»£è¡¨äº†ä¸åŒè§’åº¦çœ‹éšå±‚æƒé‡ï¼Œå·¦å›¾ä¸­æ¯åˆ—ä»£è¡¨ä¸€ä¸ª10000ç»´çš„è¯å‘é‡ä¸éšå±‚å•ä¸ªç¥ç»å…ƒçš„è¿æ¥æƒé‡ï¼Œå³å›¾æ¯è¡Œä»£è¡¨äº†ä¸€ä¸ªå•è¯çš„è¯å‘é‡ã€‚<br><img src="/2019/10/13/skipgram/weights.png" alt><br>æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡å°±æ˜¯å­¦ä¹ è¿™ä¸ªéšå±‚æƒé‡çŸ©é˜µã€‚<br>è¾“å…¥è¢«one-hotç¼–ç åï¼Œå®é™…ä¸Šåªæœ‰ä¸€ä¸ªä½ç½®ä¸ä¸º0ï¼Œæ‰€ä»¥è¿™ä¸ªå‘é‡ç›¸å½“ç¨€ç–ï¼Œé‚£å¦‚æœæˆ‘ä»¬å°†1</em>10000çš„å‘é‡ä¸10000*300çš„çŸ©é˜µç›¸ä¹˜ï¼Œç›¸å½“æ¶ˆè€—è®¡ç®—èµ„æºï¼Œä¸ºäº†é«˜æ•ˆè®¡ç®—ï¼Œä»…ä»…ä¼šé€‰æ‹©çŸ©é˜µä¸­å¯¹åº”çš„å‘é‡ä¸­çº¬åº¦ä¸º1çš„ç´¢å¼•è¡Œ<br><img src="/2019/10/13/skipgram/lookup.png" alt="lookup table"><br>å³å®é™…ä¸ä¼šè¿›è¡ŒçŸ©é˜µä¹˜æ³•è®¡ç®—ï¼Œè€Œæ˜¯æ ¹æ®è¾“å…¥å‘é‡ä¸­ä¸ä¸º0 çš„ç»´åº¦å»ç´¢å¼•ã€‚è¿™æ ·æ¨¡å‹ä¸­çš„éšå±‚æƒé‡çŸ©é˜µä¾¿æˆäº†ä¸€ä¸ªæŸ¥æ‰¾è¡¨ï¼ˆlookup tableï¼‰ï¼Œè¾“å‡ºå°±æ˜¯è¾“å…¥å•è¯çš„åµŒå…¥è¯å‘é‡</p><h1><span id="shu-chu-ceng">è¾“å‡ºå±‚</span><a href="#shu-chu-ceng" class="header-anchor"></a></h1><p>éšå±‚çš„è¾“å‡ºæ˜¯ä¸€ä¸ª1*300çš„å‘é‡ï¼Œè€Œè¾“å‡ºå±‚æ˜¯ä¸€ä¸ªsoftmaxå›å½’åˆ†ç±»å™¨ï¼Œä»–çš„æ¯ä¸ªç»“ç‚¹å°†ä¼šè¾“å‡ºä¸€ä¸ª0-1ä¹‹é—´çš„å€¼ï¼ˆæ¦‚ç‡ï¼‰ï¼Œè€Œç»“ç‚¹çš„æ¦‚ç‡ä¹‹å’Œä¸º1.<br><img src="/2019/10/13/skipgram/softmax.png" alt><br>æˆ‘ä»¬ä¼šå‘ç°Word2Vecæ¨¡å‹æ˜¯ä¸€ä¸ªè¶…çº§å¤§çš„ç¥ç»ç½‘ç»œï¼ˆæƒé‡çŸ©é˜µè§„æ¨¡éå¸¸å¤§ï¼‰ã€‚<br>ä¸¾ä¸ªæ —å­ï¼Œæˆ‘ä»¬æ‹¥æœ‰10000ä¸ªå•è¯çš„è¯æ±‡è¡¨ï¼Œæˆ‘ä»¬å¦‚æœæƒ³åµŒå…¥300ç»´çš„è¯å‘é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è¾“å…¥-éšå±‚æƒé‡çŸ©é˜µå’Œéšå±‚-è¾“å‡ºå±‚çš„æƒé‡çŸ©é˜µéƒ½ä¼šæœ‰ 10000 x 300 = 300ä¸‡ä¸ªæƒé‡ï¼Œåœ¨å¦‚æ­¤åºå¤§çš„ç¥ç»ç½‘ç»œä¸­è¿›è¡Œæ¢¯åº¦ä¸‹é™æ˜¯ç›¸å½“æ…¢çš„ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œä½ éœ€è¦å¤§é‡çš„è®­ç»ƒæ•°æ®æ¥è°ƒæ•´è¿™äº›æƒé‡å¹¶ä¸”é¿å…è¿‡æ‹Ÿåˆã€‚ç™¾ä¸‡æ•°é‡çº§çš„æƒé‡çŸ©é˜µå’Œäº¿ä¸‡æ•°é‡çº§çš„è®­ç»ƒæ ·æœ¬æ„å‘³ç€è®­ç»ƒè¿™ä¸ªæ¨¡å‹å°†ä¼šæ˜¯ä¸ªç¾éš¾ï¼ˆå¤ªå‡¶æ®‹äº†ï¼‰ã€‚<br>Word2Vecçš„ä½œè€…åœ¨å®ƒçš„ç¬¬äºŒç¯‡è®ºæ–‡ä¸­å¼ºè°ƒäº†è¿™äº›é—®é¢˜ï¼Œä¸‹é¢æ˜¯ä½œè€…åœ¨ç¬¬äºŒç¯‡è®ºæ–‡ä¸­çš„ä¸‰ä¸ªåˆ›æ–°ï¼š</p><ul><li><ol><li>å°†å¸¸è§çš„å•è¯ç»„åˆï¼ˆword pairsï¼‰æˆ–è€…è¯ç»„ä½œä¸ºå•ä¸ªâ€œwordsâ€æ¥å¤„ç†ã€‚</li></ol></li><li><ol start="2"><li>å¯¹é«˜é¢‘æ¬¡å•è¯è¿›è¡ŒæŠ½æ ·æ¥å‡å°‘è®­ç»ƒæ ·æœ¬çš„ä¸ªæ•°ã€‚</li></ol></li><li><ol start="3"><li>å¯¹ä¼˜åŒ–ç›®æ ‡é‡‡ç”¨â€œnegative samplingâ€æ–¹æ³•ï¼Œè¿™æ ·æ¯ä¸ªè®­ç»ƒæ ·æœ¬çš„è®­ç»ƒåªä¼šæ›´æ–°ä¸€å°éƒ¨åˆ†çš„æ¨¡å‹æƒé‡ï¼Œä»è€Œé™ä½è®¡ç®—è´Ÿæ‹…ã€‚<br>äº‹å®è¯æ˜ï¼Œå¯¹å¸¸ç”¨è¯æŠ½æ ·å¹¶ä¸”å¯¹ä¼˜åŒ–ç›®æ ‡é‡‡ç”¨â€œnegative samplingâ€ä¸ä»…é™ä½äº†è®­ç»ƒè¿‡ç¨‹ä¸­çš„è®¡ç®—è´Ÿæ‹…ï¼Œè¿˜æé«˜äº†è®­ç»ƒçš„è¯å‘é‡çš„è´¨é‡ã€‚</li></ol></li></ul><p><strong>word pairs and phases</strong><br>ä¸€äº›å•è¯ç»„åˆçš„å«ä¹‰å’Œæ‹†å¼€ä»¥åå…·æœ‰å®Œå…¨ä¸åŒçš„æ„ä¹‰ï¼Œæ¯”å¦‚ New Yorkï¼Œå•ç‹¬çš„New å’ŒYorkæ— æ³•è¡¨è¾¾è¿™ä¸ªè¯ç»„çš„å«ä¹‰ã€‚å› æ­¤ï¼Œåº”è¯¥æŠŠNew Yorkä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è¯ç»„æ¥ç”Ÿæˆå…¶è¯å‘é‡ã€‚<br><strong>å¯¹é«˜é¢‘è¯æŠ½æ ·</strong><br>å¯¹äºé«˜é¢‘è¯ï¼Œå¦‚ the ï¼ŒæŒ‰ä¸Šé¢çš„å¤„ç†æ–¹å¼ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ï¼š</p><ul><li><ol><li>å½“æˆ‘ä»¬å¾—åˆ°æˆå¯¹çš„å•è¯è®­ç»ƒæ ·æœ¬æ—¶ï¼Œï¼ˆdogï¼Œ theï¼‰è¿™æ ·çš„æ ·æœ¬å¹¶ä¸ä¼šæä¾›æ›´å¤šå…³äºdogçš„è¯­ä¹‰ä¿¡æ¯ï¼Œå› ä¸ºthe åœ¨æ¯ä¸ªå•è¯çš„ä¸Šä¸‹æ–‡å‡ ä¹éƒ½ä¼šå‡ºç°</li></ol></li><li><ol start="2"><li>ç”±äºthe è¿™æ ·çš„é«˜é¢‘è¯å‡ºç°çš„æ¦‚ç‡å¾ˆå¤§ï¼Œå› æ­¤ä¸ºä»¬å°†ä¼šæœ‰å¤§é‡çš„ï¼ˆthe ï¼Œ ã€‚ã€‚ã€‚ï¼‰è¿™æ ·çš„è®­ç»ƒæ ·æœ¬ï¼Œè€Œè¿™äº›æ ·æœ¬çš„æ•°é‡è¿œè¿œè¶…è¿‡æˆ‘ä»¬å­¦ä¹ theè¿™ä¸ªå•è¯æ‰€éœ€çš„è®­ç»ƒæ ·æœ¬æ•°ã€‚</li></ol></li></ul><p>å¦‚æœç›´æ¥åˆ é™¤æ‰è¿™äº›é«˜é¢‘è¯ï¼Œä¼šæœ‰ä¸¤ä¸ªé—®é¢˜:</p><ul><li>1.åˆ é™¤åï¼Œtheè¿™ä¸ªå•è¯æ°¸è¿œä¹Ÿä¸ä¼šå‡ºç°åœ¨æˆ‘ä»¬çš„ä¸Šä¸‹æ–‡çª—å£</li><li>2.è®­ç»ƒæ ·æœ¬ä¼šå‡å°‘</li></ul><p>æ‰€ä»¥word2vec é‡‡ç”¨æŠ½æ ·çš„æ–¹å¼æ¥è§£å†³è¿™ç§é«˜é¢‘è¯é—®é¢˜ã€‚ä»–çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå¯¹äºæˆ‘ä»¬åœ¨è®­ç»ƒåŸå§‹æ–‡æœ¬ä¸­é‡åˆ°çš„æ¯ä¸€ä¸ªå•è¯ï¼Œä»–ä»¬éƒ½æœ‰ä¸€å®šæ¦‚ç‡è¢«æˆ‘ä»¬ä»æ–‡æœ¬ä¸­åˆ é™¤æ‰ï¼Œè€Œè¿™ä¸ªè¢«åˆ é™¤çš„æ¦‚ç‡ä¸å•è¯çš„é¢‘ç‡æœ‰å…³ã€‚<br><img src="/2019/10/13/skipgram/del.png" alt><br>wi æ˜¯ä¸€ä¸ªå•è¯ï¼ŒZ(wi)æ˜¯è¿™ä¸ªå•è¯åœ¨æ‰€æœ‰é¢„æ–™ä¸­å‡ºç°çš„é¢‘æ¬¡ã€‚P(wi)æ˜¯è¢«ä¿ç•™çš„æ¦‚ç‡ã€‚</p><ul><li>å½“Z(wi) &lt;= 0.0026æ—¶,P(wi) = 1.0ã€‚å½“å•è¯åœ¨è¯­æ–™ä¸­å‡ºç°çš„é¢‘ç‡å°äº0.0026æ—¶ï¼Œå®ƒæ˜¯100%è¢«ä¿ç•™çš„ï¼Œè¿™æ„å‘³ç€åªæœ‰é‚£äº›åœ¨è¯­æ–™ä¸­å‡ºç°é¢‘ç‡è¶…è¿‡0.26%çš„å•è¯æ‰ä¼šè¢«é‡‡æ ·ã€‚</li><li>å½“Z(wi) = 0.00746 æ—¶ï¼ŒP(wi) = 0.5ï¼Œæ„å‘³ç€è¿™ä¸€éƒ¨åˆ†çš„å•è¯æœ‰50%çš„æ¦‚ç‡è¢«ä¿ç•™ã€‚</li><li>å½“Z(wi) = 1.0 æ—¶ï¼ŒP(wi) = 0.033ï¼Œæ„å‘³ç€è¿™éƒ¨åˆ†å•è¯ä»¥3.3%çš„æ¦‚ç‡è¢«ä¿ç•™</li></ul><p><strong>è´Ÿé‡‡æ ·</strong><br>è®­ç»ƒä¸€ä¸ªç¥ç»ç½‘ç»œæ„å‘³ç€è¦è¾“å…¥è®­ç»ƒæ ·æœ¬å¹¶ä¸”ä¸æ–­çš„è°ƒæ•´ç¥ç»å…ƒçš„æƒé‡ï¼Œä¸æ–­æé«˜å¯¹ç›®æ ‡çš„å‡†ç¡®é¢„æµ‹ã€‚è€Œvocabularyçš„å¤§å°å†³å®šäº†skip-gramç¥ç»ç½‘ç»œå°†æ‹¥æœ‰å¤§è§„æ¨¡çš„æƒé‡çŸ©é˜µï¼Œæ‰€æœ‰çš„è¿™äº›æƒé‡éœ€è¦é€šè¿‡æˆ‘ä»¬æ•°ä»¥äº¿è®¡çš„æ ·æœ¬æ¥è®­ç»ƒè°ƒæ•´ï¼Œéå¸¸æ¶ˆè€—è®¡ç®—èµ„æºï¼Œå¹¶ä¸”å®é™…ä¸­ä¼šéå¸¸æ…¢ã€‚<br>è´Ÿé‡‡æ ·è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä¸åŒäºåŸæœ¬æ¯ä¸ªè®­ç»ƒæ ·æœ¬æ›´æ–°æ‰€æœ‰æƒé‡ï¼Œè´Ÿé‡‡æ ·æ¯æ¬¡è®©ä¸€ä¸ªè®­ç»ƒæ ·æœ¬ä»…ä»…æ›´æ–°ä¸€éƒ¨åˆ†æƒé‡ï¼Œå‡å°è®¡ç®—é‡ã€‚<br>å¯¹äºè®­ç»ƒæ ·æœ¬ï¼ˆfoxï¼Œquickï¼‰ï¼Œéƒ½æ˜¯ç»è¿‡one-hotç¼–ç çš„ï¼Œå½“vocabularyçš„å¤§å°ä¸º10000æ—¶ï¼Œæˆ‘ä»¬æœŸæœ›è¾“å‡ºå¯¹åº”çš„quickå•è¯çš„é‚£ä¸ªç¥ç»å…ƒçš„è¾“å‡ºæ˜¯1ï¼Œå…¶ä½™9999ä¸ªéƒ½æ˜¯0ï¼Œè¿™9999ä¸ªè¾“å‡ºä¸º0çš„ç¥ç»å…ƒæ‰€å¯¹åº”çš„å•è¯ç§°ä¸ºnegative word<br>éšå±‚-è¾“å‡ºå±‚æ‹¥æœ‰300<em>10000çš„æƒé‡ï¼Œè€Œè´Ÿé‡‡æ ·æ—¶ï¼Œæˆ‘ä»¬ä»…ä»…æ›´æ–°quick å’Œæˆ‘ä»¬é€‰æ‹©çš„å…¶ä»–5ä¸ªnegative wordçš„ç»“ç‚¹å¯¹åº”çš„æƒé‡ï¼Œå…±6ä¸ªç¥ç»å…ƒï¼Œ300</em> 6 = 1800 ä¸ªæƒé‡ï¼Œç›¸å½“äºåªè®¡ç®—äº†0.06%çš„æƒé‡ï¼Œè®¡ç®—æ•ˆç‡å¤§å¤§æé«˜ã€‚<br><img src="/2019/10/13/skipgram/sample.png" alt><br>å…¶ä¸­f(wi)ä»£è¡¨æ¯ä¸ªå•è¯å‡ºç°çš„é¢‘æ¬¡ï¼Œp(wi)ä»£è¡¨è¢«é€‰ä¸­çš„æ¦‚ç‡ã€‚<br>è´Ÿé‡‡æ ·çš„Cè¯­è¨€å®ç°éå¸¸çš„æœ‰è¶£ã€‚unigram tableæœ‰ä¸€ä¸ªåŒ…å«äº†ä¸€äº¿ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æ˜¯ç”±è¯æ±‡è¡¨ä¸­æ¯ä¸ªå•è¯çš„ç´¢å¼•å·å¡«å……çš„ï¼Œå¹¶ä¸”è¿™ä¸ªæ•°ç»„ä¸­æœ‰é‡å¤ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº›å•è¯ä¼šå‡ºç°å¤šæ¬¡ã€‚é‚£ä¹ˆæ¯ä¸ªå•è¯çš„ç´¢å¼•åœ¨è¿™ä¸ªæ•°ç»„ä¸­å‡ºç°çš„æ¬¡æ•°è¯¥å¦‚ä½•å†³å®šå‘¢ï¼Œç”±å…¬å¼P(wi) <em> table_sizeï¼Œä¹Ÿå°±æ˜¯è¯´è®¡ç®—å‡ºçš„è´Ÿé‡‡æ ·æ¦‚ç‡</em>1äº¿=å•è¯åœ¨è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°ã€‚<br>æœ‰äº†è¿™å¼ è¡¨ä»¥åï¼Œæ¯æ¬¡å»æˆ‘ä»¬è¿›è¡Œè´Ÿé‡‡æ ·æ—¶ï¼Œåªéœ€è¦åœ¨0-1äº¿èŒƒå›´å†…ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç„¶åé€‰æ‹©è¡¨ä¸­ç´¢å¼•å·ä¸ºè¿™ä¸ªéšæœºæ•°çš„é‚£ä¸ªå•è¯ä½œä¸ºæˆ‘ä»¬çš„negative wordå³å¯ã€‚ä¸€ä¸ªå•è¯çš„è´Ÿé‡‡æ ·æ¦‚ç‡è¶Šå¤§ï¼Œé‚£ä¹ˆå®ƒåœ¨è¿™ä¸ªè¡¨ä¸­å‡ºç°çš„æ¬¡æ•°å°±è¶Šå¤šï¼Œå®ƒè¢«é€‰ä¸­çš„æ¦‚ç‡å°±è¶Šå¤§ã€‚</p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºå†…è’™å¤ä¹Œå…°å¸ƒç»Ÿ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Reading" scheme="https://xv44586.github.io/categories/Reading/"/>
    
    
      <category term="NLP" scheme="https://xv44586.github.io/tags/NLP/"/>
    
  </entry>
  
  <entry>
    <title>Pythonä¸­çš„GIL</title>
    <link href="https://xv44586.github.io/2019/10/13/gil/"/>
    <id>https://xv44586.github.io/2019/10/13/gil/</id>
    <published>2019-10-13T09:01:37.000Z</published>
    <updated>2019-10-17T14:08:09.874Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><ul><li><a href="#gil-shi-shi-me">GILæ˜¯ä»€ä¹ˆ</a></li><li><a href="#gil-ji-zhi">GILæœºåˆ¶</a></li><li><a href="#dai-lai-de-wen-ti">å¸¦æ¥çš„é—®é¢˜</a></li><li><a href="#guan-yu-tou-tu">å…³äºå¤´å›¾</a></li></ul><!-- tocstop --></div><h1><span id="gil-shi-shi-me">GILæ˜¯ä»€ä¹ˆ</span><a href="#gil-shi-shi-me" class="header-anchor"></a></h1><p>ç†Ÿæ‚‰Pythonçš„äººå¯¹GILè‚¯å®šéƒ½ä¸é™Œç”Ÿ, å…¶å…¨ç§°æ˜¯å…¨å±€è§£é‡Šå™¨é”(Global Interpreter Lock)ã€‚ä½†æ˜¯ï¼Œå¾ˆå¤šäººéƒ½è¯¯ä»¥ä¸ºGILæ˜¯pythonçš„ç‰¹æ€§ï¼Œæ‰€ä»¥ï¼Œé¦–å…ˆéœ€è¦æ˜ç¡®çš„ä¸€ç‚¹æ˜¯GILå¹¶ä¸æ˜¯Pythonçš„ç‰¹æ€§ï¼Œå®ƒæ˜¯åœ¨å®ç°Pythonè§£æå™¨(CPython)æ—¶æ‰€å¼•å…¥çš„ä¸€ä¸ªæ¦‚å¿µã€‚è€Œå…¶ä»–çš„å®ç°ç‰ˆæœ¬å¦‚JPythonå°±æ²¡æœ‰GILã€‚ç„¶è€Œå› ä¸ºCPythonæ˜¯å¤§éƒ¨åˆ†ç¯å¢ƒä¸‹é»˜è®¤çš„Pythonæ‰§è¡Œç¯å¢ƒã€‚æ‰€ä»¥åœ¨å¾ˆå¤šäººçš„æ¦‚å¿µé‡ŒCPythonå°±æ˜¯Pythonï¼Œä¹Ÿå°±æƒ³å½“ç„¶çš„æŠŠGILå½’ç»“ä¸ºPythonè¯­è¨€çš„ç¼ºé™·ã€‚æ‰€ä»¥è¿™é‡Œè¦å…ˆæ˜ç¡®ä¸€ç‚¹ï¼šGILå¹¶ä¸æ˜¯Pythonçš„ç‰¹æ€§ï¼ŒPythonå®Œå…¨å¯ä»¥ä¸ä¾èµ–äºGIL<br>é‚£ä¹ˆCPythonå®ç°ä¸­çš„GILåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®˜æ–¹ç»™å‡ºçš„è§£é‡Šï¼š</p><blockquote><p>In CPython, the global interpreter lock, or GIL, is a mutex that protects access to Python objects, preventing multiple threads from executing Python bytecodes at once. This lock is necessary mainly because CPythonâ€™s memory management is not thread-safe. (However, since the GIL exists, other features have grown to depend on the guarantees that it enforces.)</p><p><a href="https://wiki.python.org/moin/GlobalInterpreterLock" target="_blank" rel="noopener">https://wiki.python.org/moin/GlobalInterpreterLock</a></p></blockquote><p>å³åŸå› æ˜¯åœ¨CPythonä¸­çš„çº¿ç¨‹å®é™…æ˜¯æ“ä½œç³»ç»Ÿçš„åŸç”Ÿçº¿ç¨‹,è€ŒCPythonçš„å†…å­˜ç®¡ç†ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œäºæ˜¯ä½¿ç”¨GILè¿™æŠŠå¤§é”é”ä½å…¶ä»–çº¿ç¨‹,ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è§£é‡Šæ‰§è¡Œå­—èŠ‚ç ã€‚</p><h1><span id="gil-ji-zhi">GILæœºåˆ¶</span><a href="#gil-ji-zhi" class="header-anchor"></a></h1><p>æŒ‰ç…§Pythonç¤¾åŒºçš„æƒ³æ³•ï¼Œæ“ä½œç³»ç»Ÿæœ¬èº«çš„çº¿ç¨‹è°ƒåº¦å·²ç»éå¸¸æˆç†Ÿç¨³å®šäº†ï¼Œæ²¡æœ‰å¿…è¦è‡ªå·±æä¸€å¥—ã€‚æ‰€ä»¥Pythonçš„çº¿ç¨‹å°±æ˜¯Cè¯­è¨€çš„ä¸€ä¸ªpthreadï¼Œå¹¶é€šè¿‡æ“ä½œç³»ç»Ÿè°ƒåº¦ç®—æ³•è¿›è¡Œè°ƒåº¦ï¼ˆä¾‹å¦‚linuxæ˜¯CFSï¼‰ã€‚ä¸ºäº†è®©å„ä¸ªçº¿ç¨‹èƒ½å¤Ÿå¹³å‡åˆ©ç”¨CPUæ—¶é—´ï¼Œpythonä¼šè®¡ç®—å½“å‰å·²æ‰§è¡Œçš„å¾®ä»£ç æ•°é‡ticksï¼Œè¾¾åˆ°ä¸€å®šé˜ˆå€¼åå°±å¼ºåˆ¶é‡Šæ”¾ã€‚è€Œè¿™æ—¶ä¹Ÿä¼šè§¦å‘ä¸€æ¬¡æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹è°ƒåº¦ï¼ˆå½“ç„¶æ˜¯å¦çœŸæ­£è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ç”±æ“ä½œç³»ç»Ÿè‡ªä¸»å†³å®šï¼‰ã€‚<br>Pythoné‡Šæ”¾GILçš„æ—¶æœºä¹‹ä¸€:<br>æœ‰ä¸€ä¸ªå‘¨æœŸæ€§è®¡æ•°çš„è®¡æ•°å™¨,ä¸æ–­é€’å‡,ä¿è¯Pythonçº¿ç¨‹å¯ä»¥åœ¨æ‰§è¡Œä¸€æ®µæ—¶é—´ä¹‹åé‡Šæ”¾GIL<br>ä»”ç»†åˆ†æå°±ä¼šå‘ç°é—®é¢˜,å‡å¦‚åœ¨è§£ææ‰§è¡Œå­—èŠ‚ç çš„è¿‡ç¨‹ä¸­å½“å‰çº¿ç¨‹é‡åˆ°äº†ä¸€ä¸ªIOæ“ä½œ,å´ç”±äºç­‰å¾…æ•°æ®è€Œè¢«é˜»å¡åœ¨è¯¥IOæ“ä½œä¸Š,è€Œä»GILçš„è®¾è®¡æ¥çœ‹ï¼ŒGILåªèƒ½é€šè¿‡å½“å‰çº¿ç¨‹ä¸»åŠ¨é‡Šæ”¾,å…¶ä»–çº¿ç¨‹æ‰æœ‰å¯èƒ½è·å–ã€‚è€Œå½“å‰<br>çº¿ç¨‹é˜»å¡åœ¨IOæ“ä½œä¸Šæ—¶,æ­¤æ—¶ç»™å…¶ä»–çº¿ç¨‹è¿è¡Œçš„æœºä¼šå¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜,å› ä¸ºGILåªæ˜¯ç”¨æ¥åŒæ­¥çº¿ç¨‹æ‰§è¡Œå­—èŠ‚ç çš„,å¹¶éä¸€èˆ¬çš„äº’æ–¥å…±äº«èµ„æºçš„äº’æ–¥é”ã€‚åœ¨é˜»å¡æ“ä½œä¹‹å‰è®©å‡ºGIL,å…¶ä»–çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œ,è€Œå½“å‰çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œé˜»å¡å‹çš„æ“ä½œ,å½“è¯¥é˜»å¡å‹çš„æ“ä½œå®Œæˆä¹‹å,å†æ¬¡è¯•å›¾è·å–GIL,ç»§ç»­æ‰§è¡Œä½™ä¸‹çš„å­—èŠ‚ç ã€‚<br>ç”±æ­¤å¯ä»¥çœ‹å‡º,Pythoné‡Šæ”¾GILçš„ç¬¬äºŒä¸ªæ—¶æœº:<br>åœ¨IOæ“ä½œç­‰å¯èƒ½ä¼šå¼•èµ·é˜»å¡çš„system callä¹‹å‰,å¯ä»¥æš‚æ—¶é‡Šæ”¾GIL,ä½†åœ¨æ‰§è¡Œå®Œæ¯•å,å¿…é¡»é‡æ–°è·å–GIL</p><h1><span id="dai-lai-de-wen-ti">å¸¦æ¥çš„é—®é¢˜</span><a href="#dai-lai-de-wen-ti" class="header-anchor"></a></h1><p>1.CPUå¯†é›†å‹ä»£ç (å„ç§å¾ªç¯å¤„ç†ã€è®¡æ•°ç­‰ç­‰)ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œticksè®¡æ•°å¾ˆå¿«å°±ä¼šè¾¾åˆ°é˜ˆå€¼ï¼Œç„¶åè§¦å‘GILçš„é‡Šæ”¾ä¸å†ç«äº‰ï¼ˆå¤šä¸ªçº¿ç¨‹æ¥å›åˆ‡æ¢å½“ç„¶æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼‰<br>2.çº¿ç¨‹çš„é‡Šæ”¾ä¸è·å–æ˜¯æ²¡æœ‰é—´éš™çš„ï¼Œå•æ ¸ä¸‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¤šæ ¸æƒ…å†µä¸‹ï¼Œå½“å½“å‰masterçº¿ç¨‹é‡Šæ”¾GILåï¼Œå…¶ä»–æ ¸å¿ƒä¸Šçš„çº¿ç¨‹è¢«å”¤é†’ï¼Œè€Œæ­¤æ—¶å¤§éƒ¨åˆ†æƒ…å†µä¸‹å½“å‰çº¿ç¨‹åˆè·å–äº†GILï¼Œè€Œè¢«å”¤é†’çš„çº¿ç¨‹åªèƒ½æµªè´¹cpuæ—¶é—´è€Œæ— æ³•è¿è¡Œï¼Œç›´åˆ°è¾¾åˆ°åˆ‡æ¢æ—¶é—´ï¼Œåˆ‡æ¢ä¸ºå¾…è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·ä¼šé€ æˆçº¿ç¨‹é¢ ç°¸(thrashing)ï¼Œå¯¼è‡´æ•ˆç‡æ›´ä½ã€‚<br><img src="/2019/10/13/gil/gil_war.png" alt="Multi GIL War"><br>å› æ­¤ï¼Œ3å¼€å§‹åšäº†ä¸€äº›ä¼˜åŒ–ï¼Œå¦‚å°†åŸºäºpcodeè°ƒåº¦æ”¹ä¸ºåˆ†æ—¶è°ƒåº¦ï¼›é¿å…é‡Šæ”¾GILçš„çº¿ç¨‹å†æ¬¡ç«‹å³è¢«è°ƒåº¦ç­‰ã€‚</p><hr><p><a href="http://www.dabeaz.com/GIL/" target="_blank" rel="noopener">http://www.dabeaz.com/GIL/</a><br><a href="http://cyrusin.github.io/2016/04/27/python-gil-implementaion/" target="_blank" rel="noopener">http://cyrusin.github.io/2016/04/27/python-gil-implementaion/</a><br><a href="https://zhuanlan.zhihu.com/p/20953544" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/20953544</a><br><a href="http://cenalulu.github.io/python/gil-in-python/" target="_blank" rel="noopener">http://cenalulu.github.io/python/gil-in-python/</a></p><h1><span id="guan-yu-tou-tu">å…³äºå¤´å›¾</span><a href="#guan-yu-tou-tu" class="header-anchor"></a></h1><p>æ‘„äºä¸–å›­ä¼š</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Programming" scheme="https://xv44586.github.io/categories/Programming/"/>
    
    
      <category term="Python" scheme="https://xv44586.github.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>pythonä¸­çš„å¤šçº¿ç¨‹</title>
    <link href="https://xv44586.github.io/2019/10/13/multiThreads/"/>
    <id>https://xv44586.github.io/2019/10/13/multiThreads/</id>
    <published>2019-10-13T08:48:15.000Z</published>
    <updated>2019-10-17T14:08:09.866Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="toc"><!-- toc --><!-- tocstop --></div><p>  æœ€è¿‘åœ¨çœ‹Pythonçš„å¤šçº¿ç¨‹ï¼Œç»å¸¸æˆ‘ä»¬ä¼šå¬åˆ°è€æ‰‹è¯´ï¼šâ€œPythonä¸‹å¤šçº¿ç¨‹æ˜¯é¸¡è‚‹ï¼Œæ¨èä½¿ç”¨å¤šè¿›ç¨‹ï¼â€ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ<br>è¦çŸ¥å…¶ç„¶ï¼Œæ›´è¦çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚æ‰€ä»¥æœ‰äº†ä¸‹é¢çš„æ·±å…¥ç ”ç©¶ï¼š<br>é¦–å…ˆå¼ºè°ƒèƒŒæ™¯ï¼š<br><strong>1. GILæ˜¯ä»€ä¹ˆï¼Ÿ</strong><br>â€ƒâ€ƒGILçš„å…¨ç§°æ˜¯Global Interpreter Lock(å…¨å±€è§£é‡Šå™¨é”)ï¼Œæ¥æºæ˜¯pythonè®¾è®¡ä¹‹åˆçš„è€ƒè™‘ï¼Œä¸ºäº†æ•°æ®å®‰å…¨æ‰€åšçš„å†³å®šã€‚</p><p><strong>2. æ¯ä¸ªCPUåœ¨åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹</strong><br>â€ƒâ€ƒåœ¨å•æ ¸CPUä¸‹çš„å¤šçº¿ç¨‹å…¶å®éƒ½åªæ˜¯å¹¶å‘ï¼Œä¸æ˜¯å¹¶è¡Œï¼Œå¹¶å‘å’Œå¹¶è¡Œä»å®è§‚ä¸Šæ¥è®²éƒ½æ˜¯åŒæ—¶å¤„ç†å¤šè·¯è¯·æ±‚çš„æ¦‚å¿µã€‚ä½†å¹¶å‘å’Œå¹¶è¡Œåˆæœ‰åŒºåˆ«ï¼Œå¹¶è¡Œæ˜¯æŒ‡ä¸¤ä¸ªæˆ–è€…å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶åˆ»å‘ç”Ÿï¼›è€Œå¹¶å‘æ˜¯æŒ‡ä¸¤ä¸ªæˆ–å¤šä¸ªäº‹ä»¶åœ¨åŒä¸€æ—¶é—´é—´éš”å†…å‘ç”Ÿã€‚<br>åœ¨Pythonå¤šçº¿ç¨‹ä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæ–¹å¼ï¼š<br>    <strong><strong>è·å–GIL</strong></strong><br>    <strong><strong>æ‰§è¡Œä»£ç ç›´åˆ°sleepæˆ–è€…æ˜¯pythonè™šæ‹Ÿæœºå°†å…¶æŒ‚èµ·ã€‚</strong></strong><br>    <strong><strong>é‡Šæ”¾GIL</strong></strong></p><p>  å¯è§ï¼ŒæŸä¸ªçº¿ç¨‹æƒ³è¦æ‰§è¡Œï¼Œå¿…é¡»å…ˆæ‹¿åˆ°GILï¼Œæˆ‘ä»¬å¯ä»¥æŠŠGILçœ‹ä½œæ˜¯â€œé€šè¡Œè¯â€ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªpythonè¿›ç¨‹ä¸­ï¼ŒGILåªæœ‰ä¸€ä¸ªã€‚æ‹¿ä¸åˆ°é€šè¡Œè¯çš„çº¿ç¨‹ï¼Œå°±ä¸å…è®¸è¿›å…¥CPUæ‰§è¡Œã€‚<br>åœ¨Python2.xé‡Œï¼ŒGILçš„é‡Šæ”¾é€»è¾‘æ˜¯å½“å‰çº¿ç¨‹é‡è§IOæ“ä½œæˆ–è€…ticksè®¡æ•°è¾¾åˆ°100ï¼ˆtickså¯ä»¥çœ‹ä½œæ˜¯Pythonè‡ªèº«çš„ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¸“é—¨ä½œç”¨äºGILï¼Œæ¯æ¬¡é‡Šæ”¾åå½’é›¶ï¼Œè¿™ä¸ªè®¡æ•°å¯ä»¥é€šè¿‡ sys.setcheckinterval æ¥è°ƒæ•´ï¼‰ï¼Œè¿›è¡Œé‡Šæ”¾ã€‚è€Œæ¯æ¬¡é‡Šæ”¾GILé”ï¼Œçº¿ç¨‹è¿›è¡Œé”ç«äº‰ã€åˆ‡æ¢çº¿ç¨‹ï¼Œä¼šæ¶ˆè€—èµ„æºã€‚å¹¶ä¸”ç”±äºGILé”å­˜åœ¨ï¼Œpythoné‡Œä¸€ä¸ªè¿›ç¨‹æ°¸è¿œåªèƒ½åŒæ—¶æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹(æ‹¿åˆ°GILçš„çº¿ç¨‹æ‰èƒ½æ‰§è¡Œ)ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨å¤šæ ¸CPUä¸Šï¼Œpythonçš„å¤šçº¿ç¨‹æ•ˆç‡å¹¶ä¸é«˜ã€‚é‚£ä¹ˆæ˜¯ä¸æ˜¯pythonçš„å¤šçº¿ç¨‹å°±å®Œå…¨æ²¡ç”¨äº†å‘¢ï¼Ÿåœ¨è¿™é‡Œæˆ‘ä»¬è¿›è¡Œåˆ†ç±»è®¨è®ºï¼š</p><p>  <strong>CPUå¯†é›†å‹</strong><br>  CPUå¯†é›†å‹ä»£ç åŒ…æ‹¬å„ç§å¾ªç¯å¤„ç†ã€è®¡æ•°ç­‰ç­‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºè®¡ç®—å·¥ä½œå¤šï¼Œticksè®¡æ•°å¾ˆå¿«å°±ä¼šè¾¾åˆ°é˜ˆå€¼ï¼Œç„¶åè§¦å‘GILçš„é‡Šæ”¾ä¸å†ç«äº‰ï¼ˆå¤šä¸ªçº¿ç¨‹æ¥å›åˆ‡æ¢å½“ç„¶æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼‰ï¼Œæ‰€ä»¥pythonä¸‹çš„å¤šçº¿ç¨‹å¯¹CPUå¯†é›†å‹ä»£ç å¹¶ä¸å‹å¥½ã€‚</p><p>  <strong>IOå¯†é›†å‹</strong><br>  IOå¯†é›†å‹ä»£ç åŒ…æ‹¬æ–‡ä»¶å¤„ç†ã€ç½‘ç»œçˆ¬è™«ç­‰ï¼Œå¤šçº¿ç¨‹èƒ½å¤Ÿæœ‰æ•ˆæå‡æ•ˆç‡(å•çº¿ç¨‹ä¸‹æœ‰IOæ“ä½œä¼šè¿›è¡ŒIOç­‰å¾…ï¼Œé€ æˆä¸å¿…è¦çš„æ—¶é—´æµªè´¹ï¼Œè€Œå¼€å¯å¤šçº¿ç¨‹èƒ½åœ¨çº¿ç¨‹Aç­‰å¾…æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°çº¿ç¨‹Bï¼Œå¯ä»¥ä¸æµªè´¹CPUçš„èµ„æºï¼Œä»è€Œèƒ½æå‡ç¨‹åºæ‰§è¡Œæ•ˆç‡)ã€‚æ‰€ä»¥pythonçš„å¤šçº¿ç¨‹å¯¹IOå¯†é›†å‹ä»£ç æ¯”è¾ƒå‹å¥½ã€‚<br>è€Œåœ¨python3.xä¸­ï¼ŒGILä¸ä½¿ç”¨ticksè®¡æ•°ï¼Œæ”¹ä¸ºä½¿ç”¨è®¡æ—¶å™¨ï¼ˆæ‰§è¡Œæ—¶é—´è¾¾åˆ°é˜ˆå€¼åï¼Œå½“å‰çº¿ç¨‹é‡Šæ”¾GILï¼‰ï¼Œè¿™æ ·å¯¹CPUå¯†é›†å‹ç¨‹åºæ›´åŠ å‹å¥½ï¼Œä½†ä¾ç„¶æ²¡æœ‰è§£å†³GILå¯¼è‡´çš„åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹çš„é—®é¢˜ï¼Œæ‰€ä»¥æ•ˆç‡ä¾ç„¶ä¸å°½å¦‚äººæ„ã€‚<br>è¯·æ³¨æ„ï¼šå¤šæ ¸å¤šçº¿ç¨‹æ¯”å•æ ¸å¤šçº¿ç¨‹æ›´å·®ï¼ŒåŸå› æ˜¯å•æ ¸ä¸‹çš„å¤šçº¿ç¨‹ï¼Œæ¯æ¬¡é‡Šæ”¾GILï¼Œå”¤é†’çš„é‚£ä¸ªçº¿ç¨‹éƒ½èƒ½è·å–åˆ°GILé”ï¼Œæ‰€ä»¥èƒ½å¤Ÿæ— ç¼æ‰§è¡Œï¼Œä½†å¤šæ ¸ä¸‹ï¼ŒCPU0é‡Šæ”¾GILåï¼Œå…¶ä»–CPUä¸Šçš„çº¿ç¨‹éƒ½ä¼šè¿›è¡Œç«äº‰ï¼Œä½†GILå¯èƒ½ä¼šé©¬ä¸Šåˆè¢«CPU0æ‹¿åˆ°ï¼Œå¯¼è‡´å…¶ä»–å‡ ä¸ªCPUä¸Šè¢«å”¤é†’åçš„çº¿ç¨‹ä¼šé†’ç€ç­‰å¾…åˆ°åˆ‡æ¢æ—¶é—´ååˆè¿›å…¥å¾…è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·ä¼šé€ æˆçº¿ç¨‹é¢ ç°¸(thrashing)ï¼Œå¯¼è‡´æ•ˆç‡æ›´ä½ã€‚<br>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼šç»å¸¸æˆ‘ä»¬ä¼šå¬åˆ°è€æ‰‹è¯´ï¼šâ€œpythonä¸‹æƒ³è¦å……åˆ†åˆ©ç”¨å¤šæ ¸CPUï¼Œå°±ç”¨å¤šè¿›ç¨‹â€ï¼ŒåŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ<br>åŸå› æ˜¯ï¼šæ¯ä¸ªè¿›ç¨‹æœ‰å„è‡ªç‹¬ç«‹çš„GILï¼Œäº’ä¸å¹²æ‰°ï¼Œè¿™æ ·å°±å¯ä»¥çœŸæ­£æ„ä¹‰ä¸Šçš„å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥åœ¨pythonä¸­ï¼Œå¤šè¿›ç¨‹çš„æ‰§è¡Œæ•ˆç‡ä¼˜äºå¤šçº¿ç¨‹(ä»…ä»…é’ˆå¯¹å¤šæ ¸CPUè€Œè¨€)ã€‚<br>æ‰€ä»¥åœ¨è¿™é‡Œè¯´ç»“è®ºï¼šå¤šæ ¸ä¸‹ï¼Œæƒ³åšå¹¶è¡Œæå‡æ•ˆç‡ï¼Œæ¯”è¾ƒé€šç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨å¤šè¿›ç¨‹ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæé«˜æ‰§è¡Œæ•ˆç‡</p><p><strong>å…³äºå¤´å›¾</strong><br>æ‘„äºé¦–å¼€å¹¿åœº</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla
      
    
    </summary>
    
    
      <category term="Programming" scheme="https://xv44586.github.io/categories/Programming/"/>
    
    
      <category term="Python" scheme="https://xv44586.github.io/tags/Python/"/>
    
  </entry>
  
</feed>
